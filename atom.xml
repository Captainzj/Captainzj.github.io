<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Go Further</title>
  
  <subtitle>Stay Hungry, Stay Foolish</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2019-04-16T15:39:50.779Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>CaptainSE</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Win10+Ubuntu18.04.md</title>
    <link href="http://yoursite.com/2019/04/15/Win10-Ubuntu18-04/"/>
    <id>http://yoursite.com/2019/04/15/Win10-Ubuntu18-04/</id>
    <published>2019-04-15T11:49:13.000Z</published>
    <updated>2019-04-16T15:39:50.779Z</updated>
    
    <content type="html"><![CDATA[<p>ã€é˜…è¯»æ—¶é—´ã€‘XXX min XXX words<br>ã€é˜…è¯»å†…å®¹ã€‘â€¦â€¦</p><a id="more"></a><h2 id="åŒç³»ç»Ÿ"><a href="#åŒç³»ç»Ÿ" class="headerlink" title="åŒç³»ç»Ÿ"></a>åŒç³»ç»Ÿ</h2><h3 id="Windows10-å®‰è£…"><a href="#Windows10-å®‰è£…" class="headerlink" title="Windows10 å®‰è£…"></a>Windows10 å®‰è£…</h3><ul><li>é€‰æ‹©æœ€æ–°ç‰ˆæœ¬çš„å¤šç‰ˆæœ¬ï¼ˆå®¶åº­ç‰ˆ\ä¼ä¸šç‰ˆ\ä¸“ä¸šç‰ˆï¼‰é•œåƒçƒ§å½•å¯åŠ¨ç›˜</li></ul><h3 id="Ubuntu18-04-å®‰è£…"><a href="#Ubuntu18-04-å®‰è£…" class="headerlink" title="Ubuntu18.04 å®‰è£…"></a>Ubuntu18.04 å®‰è£…</h3><ul><li>å®‰è£…å‰ï¼Œäºwin10ç³»ç»Ÿ ã€Œæ­¤ç”µè„‘ï¼ˆå³é”®ï¼‰ - ç®¡ç† - å­˜å‚¨/ç£ç›˜ç®¡ç†ã€å¯¹æ¬²å®‰è£…Ubuntuç³»ç»Ÿçš„ç£ç›˜åˆ†åŒºè¿›è¡Œå‹ç¼©å·æ“ä½œ</li><li>ä½¿ç”¨UltraISOçƒ§å½•é•œåƒæ—¶ï¼Œéœ€é€‰æ‹©ä¾¿æºå¯åŠ¨</li><li>ä½¿ç”¨å¯åŠ¨ç›˜å®‰è£…è¿‡ç¨‹ï¼Œå‰æœŸæ— è„‘Continueï¼›ç›´è‡³é€‰æ‹©å®‰è£…ç±»å‹ï¼ˆæ–¹å¼ï¼‰ï¼Œé€‰åº•éƒ¨ã€Œelse somethingã€<ul><li>å›ºæ€ç¡¬ç›˜<ul><li>/ æ ¹ç›®å½•ï¼š32768MB(32G)  ä¸»åˆ†åŒºï¼ˆåˆ’é‡ç‚¹ï¼‰</li><li>swapï¼š32768MB(32G)  é€»è¾‘åˆ†åŒº</li><li>EFIï¼š1024MB(1G) é€»è¾‘åˆ†åŒº</li></ul></li><li>æœºæ¢°ç¡¬ç›˜<ul><li>/homeï¼š976GB é€»è¾‘åˆ†åŒº  </li></ul></li></ul></li><li>ï¼ˆåˆ’é‡ç‚¹ï¼‰è‹¥å¼€æœºæ¬²ç”±Ubuntuå¼•å¯¼ï¼Œé¡»é€‰ç”¨EFIæ‰€åœ¨ç›˜ç¬¦ä½œä¸ºloaderï¼›è‹¥éœ€ç”±Windowså¼•å¯¼bootï¼Œé€‰ã€ŒWin Boot Managerã€æ‰€åœ¨ç›˜ç¬¦ä½œä¸ºloader<ul><li>è‹¥é‡å¯æ—¶ï¼Œé»˜è®¤ä¸ºWindowsè‡ªå¯ï¼Œæ— Ubuntuå¼•å¯¼ï¼Œä½¿ç”¨EasyBCDæ·»åŠ å¼€æœºå¼•å¯¼é¡¹</li></ul></li></ul><h3 id="å¿ƒå¾—"><a href="#å¿ƒå¾—" class="headerlink" title="å¿ƒå¾—"></a>å¿ƒå¾—</h3><p>è£…æœºBUGï¼Œã€Œæ¨å€’é‡æ¥ã€æ˜¯æœ€ä¼˜è§£    </p><h2 id="Ubuntu-æ·±åº¦å­¦ä¹ ç¯å¢ƒé…ç½®"><a href="#Ubuntu-æ·±åº¦å­¦ä¹ ç¯å¢ƒé…ç½®" class="headerlink" title="Ubuntu æ·±åº¦å­¦ä¹ ç¯å¢ƒé…ç½®"></a>Ubuntu æ·±åº¦å­¦ä¹ ç¯å¢ƒé…ç½®</h2><h3 id="NVIDIAé©±åŠ¨å®‰è£…"><a href="#NVIDIAé©±åŠ¨å®‰è£…" class="headerlink" title="NVIDIAé©±åŠ¨å®‰è£…"></a>NVIDIAé©±åŠ¨å®‰è£…</h3><p>å‚è€ƒï¼š<a href="https://blog.csdn.net/wf19930209/article/details/81877822" target="_blank" rel="noopener">Linuxå®‰è£…NVIDIAæ˜¾å¡é©±åŠ¨çš„æ­£ç¡®å§¿åŠ¿</a>ã€<a href="https://blog.csdn.net/tjuyanming/article/details/80862290" target="_blank" rel="noopener">Ubuntu 18.04 NVIDIAé©±åŠ¨å®‰è£…æ€»ç»“</a><br>NVIDIA é©±åŠ¨ç¨‹åºä¸‹è½½ï¼š<a href="https://www.nvidia.cn/Download/index.aspx?lang=cn" target="_blank" rel="noopener">https://www.nvidia.cn/Download/index.aspx?lang=cn</a></p><ul><li><p>ç¦ç”¨nouveau</p>  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">1. ç¼–è¾‘é»‘åå•é…ç½®æ–‡ä»¶ `$ sudo gedit /etc/modprobe.d/blacklist.conf`</span><br><span class="line">2. æ–‡ä»¶æœ«æ·»åŠ </span><br><span class="line">    `blacklist nouveau`</span><br><span class="line">    `options nouveau modeset=0`</span><br><span class="line">3. æ›´æ–°initramfs   `$ sudo update-initramfs -u`</span><br><span class="line">4. é‡å¯            `$ reboot`</span><br><span class="line">5. é‡å¯åæ‰§è¡Œ `$ lsmod | grep nouveau` ï¼ˆæ— è¾“å‡ºå³å¯ï¼‰</span><br></pre></td></tr></table></figure></li><li><p>å°†<code>ppa:graphics-drivers/ppa</code>å­˜å‚¨åº“æ·»åŠ åˆ°ç³»ç»Ÿä¸­</p>  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span> sudo add-apt-repository ppa:graphics-drivers/ppa</span><br><span class="line"><span class="meta">$</span> sudo apt update # recommended: then run `sudo apt upgrade`</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>è¯†åˆ«æ˜¾å¡æ¨¡å‹å’Œæ¨èçš„é©±åŠ¨ç¨‹åº</p>  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span> ubuntu-drivers devices</span><br></pre></td></tr></table></figure></li><li><p>å¸è½½æ‰€æœ‰å®‰è£…çš„nvidiaé©±åŠ¨<br>  å¦‚æœä¹‹å‰æ²¡å®‰è£…è¿‡nvidiaé©±åŠ¨ï¼Œä¹Ÿå¯ä»¥ä¸æ‰§è¡Œæ­¤æ­¥éª¤ï¼Œä½†æ˜¯æ¨èæ‰§è¡Œï¼Œæ— å®³</p>  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span> sudo apt-get --purge remove   nvidia-*</span><br></pre></td></tr></table></figure><p>  å¸è½½å®Œä»¥åï¼Œé‡å¯</p></li><li><p>è‡ªåŠ¨å®‰è£…</p>  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span> sudo ubuntu-drivers autoinstall</span><br></pre></td></tr></table></figure></li><li><p>å®‰è£…æˆåŠŸåé‡å¯</p><ul><li><p>è‹¥æ˜¯UEFIå¯åŠ¨ï¼Œå…³é—­Secure Bootï¼ˆåˆ’é‡ç‚¹!!!ï¼‰</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span> éªŒè¯NVIDIAé©±åŠ¨æ˜¯å¦å®‰è£…æˆåŠŸ</span><br><span class="line"><span class="meta">$</span> nvidia-smi    #è¾“å…¥æŒ‡ä»¤æŸ¥çœ‹æ˜¾å¡ä¿¡æ¯ </span><br><span class="line"><span class="meta">$</span> nvidia-settings   #æ˜¾å¡è®¾ç½®</span><br><span class="line"><span class="meta">$</span> cat /proc/driver/nvidia/version æŸ¥çœ‹nvidiaé©±åŠ¨çš„ç‰ˆæœ¬ï¼ˆç‰ˆæœ¬418.56ï¼‰</span><br></pre></td></tr></table></figure></li></ul></li></ul><h4 id="Others"><a href="#Others" class="headerlink" title="Others"></a>Others</h4><h5 id="ç»“æŸX-windowæœåŠ¡"><a href="#ç»“æŸX-windowæœåŠ¡" class="headerlink" title="ç»“æŸX-windowæœåŠ¡"></a>ç»“æŸX-windowæœåŠ¡</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">KUbuntu : sudo /etc/init.d kdm stop</span><br><span class="line"></span><br><span class="line">Ubuntu : sudo /etc/init.d/gdm3 stop</span><br><span class="line"></span><br><span class="line">Ubuntu(&gt;11.10) : sudo /etc/init.d lightdm stop Â æˆ–sudo service lightdm stop</span><br><span class="line"></span><br><span class="line">æˆ–è€… $ sudo telinit 3    # åœæ­¢å¯è§†åŒ–æ¡Œé¢</span><br></pre></td></tr></table></figure><p>æŒ‰Ctrl + Alt + F1 è¿›å…¥tty1æ§åˆ¶å°</p><h5 id="é‡å¯X-window"><a href="#é‡å¯X-window" class="headerlink" title="é‡å¯X-window"></a>é‡å¯X-window</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">KUbuntu : sudo /etc/init.d kdm restart</span><br><span class="line"></span><br><span class="line">Ubuntu : sudo /etc/init.d gdm restart</span><br><span class="line"></span><br><span class="line">Ubuntu(&gt;11.10) : sudo start lightdm æˆ– sudo service lightdm start</span><br></pre></td></tr></table></figure><p> æŒ‰Ctrl + Alt + F7è¿”å›tty7å›¾å½¢ç•Œé¢   </p><h3 id="CUDAå®‰è£…"><a href="#CUDAå®‰è£…" class="headerlink" title="CUDAå®‰è£…"></a>CUDAå®‰è£…</h3><p>å‚è€ƒï¼š<a href="https://blog.csdn.net/m0_37924639/article/details/78785699" target="_blank" rel="noopener">Linuxä¸‹CUDA+CUDNN+TensorFlowå®‰è£…ç¬”è®°</a>ã€<a href="https://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html#ubuntu-installation" target="_blank" rel="noopener">NVIDIA CUDA Installation Guide for Linux</a>ã€<a href="https://blog.csdn.net/qq997843911/article/details/85039021" target="_blank" rel="noopener">ubuntu18.04 å®‰è£…NVIDIAæ˜¾å¡é©±åŠ¨ä¸ cuda10 ç¯å¢ƒ</a><br>CUDA Toolkit Archiveï¼š<a href="https://developer.nvidia.com/cuda-toolkit-archive" target="_blank" rel="noopener">https://developer.nvidia.com/cuda-toolkit-archive</a></p><ol><li><p>è¿›å…¥CUDAå®‰è£…è„šæœ¬æ‰€åœ¨çš„ç›®å½•ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo sh cuda_10.0.130_410.48_linux.run # sh ä½ çš„ç‰ˆæœ¬.run</span><br></pre></td></tr></table></figure><ul><li>ä¼šå‡ºç°ä¸€æ®µæé•¿çš„åè®®ï¼Œä¸€ç›´æŒ‰ç©ºæ ¼é”®æˆ–Enteré”®åˆ°100%ï¼Œæœ€åè¾“å…¥acceptè¡¨ç¤ºåŒæ„ï¼Œç„¶åä¼šé€‰æ‹©æ˜¯å¦å®‰è£…nvidiaé©±åŠ¨418ï¼Œ<strong>é€‰æ‹©no</strong>ï¼ˆä¹‹å‰å·²å®‰è£…è¿‡æ˜¾å¡é©±åŠ¨ï¼‰ï¼Œé‡åˆ°è¯¢é—®æ˜¯å¦å®‰è£…openglçš„åœ°æ–¹å¦‚æœä½ æ˜¯åŒæ˜¾å¡ä¹ŸåŠ¡å¿…<strong>é€‰æ‹©ä¸å®‰è£…</strong>ï¼Œå…¶ä»–åŒæ„æˆ–é»˜è®¤å³å¯ã€‚</li><li><code>Missing recommended library</code></li></ul></li><li><p>å®‰è£…å®Œæˆåéœ€è¦å°†CUDAçš„è·¯å¾„åŠ å…¥ç¯å¢ƒå˜é‡ï¼Œé¦–å…ˆæ‰“å¼€<code>~/.bashrc</code>æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span>æ³¨æ„ï¼Œæ ¹æ®è‡ªå·±çš„ç‰ˆæœ¬ï¼Œä¿®æ”¹cuda-10.0...</span><br><span class="line">export PATH=/usr/local/cuda-10.0/bin$&#123;PATH:+:$PATH&#125;&#125; Â  </span><br><span class="line">export LD_LIBRARY_PATH=/usr/local/cuda-10.0/lib64$&#123;LD_LIBRARY_PATH:+:$&#123;LD_LIBRARY_PATH&#125;&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ‰“å¼€<code>/etc/profile</code>ï¼Œæ–‡æœ«åŠ ä¸Šä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">export PATH=/usr/local/cuda/bin:$PATH</span><br></pre></td></tr></table></figure></li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span> source /etc/profile</span><br><span class="line"><span class="meta">$</span> source ~/.bashrc</span><br></pre></td></tr></table></figure><ol start="4"><li>å®‰è£…ç¬¬ä¸‰æ–¹ä¾èµ–<h4 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h4></li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span> nvcc -V   #æŸ¥çœ‹CUDAçš„ç‰ˆæœ¬</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span> run Sample </span><br><span class="line"><span class="meta">$</span> cd /usr/local/cuda/samples/2_Graphics/volumeRender</span><br><span class="line"><span class="meta">$</span> sudo make</span><br><span class="line"><span class="meta">$</span> ./volumeRender</span><br></pre></td></tr></table></figure><h3 id="cuDNN-å®‰è£…"><a href="#cuDNN-å®‰è£…" class="headerlink" title="cuDNN å®‰è£…"></a>cuDNN å®‰è£…</h3><p>å‚è€ƒï¼š<a href="https://blog.csdn.net/m0_37924639/article/details/78785699" target="_blank" rel="noopener">Linuxä¸‹CUDA+CUDNN+TensorFlowå®‰è£…ç¬”è®°</a>ã€<a href="https://blog.csdn.net/qq_32408773/article/details/84112166" target="_blank" rel="noopener">Ubuntu18.04å®‰è£…CUDA10ã€CUDNN</a><br><a href="https://developer.nvidia.com/rdp/cudnn-download" target="_blank" rel="noopener">cuDNN Download</a></p><p>è¿›å…¥CUDNNå®‰è£…åŒ…æ‰€åœ¨ç›®å½•ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo dpkg -i runtimeåŒ….deb</span><br><span class="line">sudo dpkg -i developeråŒ….deb</span><br><span class="line">sudo dpkg -i ä»£ç sampleåŒ….deb</span><br></pre></td></tr></table></figure><p>è‡³æ­¤ï¼ŒCUDNNå®‰è£…å®Œæˆ</p><hr><p>ä¸‹è½½å®Œæˆåè§£å‹<br><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span> sudo tar -xvzf cudnn-10.0-linux-x64-v7.5.0.56.tgz</span><br></pre></td></tr></table></figure></p><p>è¿›å…¥æ–‡ä»¶å¤¹ï¼š<br><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo cp cuda/include/cudnn.h /usr/local/cuda/include/ </span><br><span class="line">sudo cp cuda/lib64/libcudnn* /usr/local/cuda/lib64/ </span><br><span class="line">sudo chmod a+r /usr/local/cuda/include/cudnn.h </span><br><span class="line">sudo chmod a+r /usr/local/cuda/lib64/libcudnn*</span><br></pre></td></tr></table></figure></p><p>åœ¨ç»ˆç«¯æŸ¥çœ‹CUDNNç‰ˆæœ¬ï¼š<br><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cat /usr/local/cuda/include/cudnn.h | grep CUDNN_MAJOR -A 2</span><br></pre></td></tr></table></figure></p><p>å‚è€ƒï¼š<a href="https://blog.csdn.net/weixin_40859436/article/details/83152249" target="_blank" rel="noopener">Ubuntu18.04+RTX2080+cuda10+tensorflow</a>ã€<a href="https://blog.csdn.net/u010801439/article/details/80483036" target="_blank" rel="noopener">çœŸå®æœºä¸‹ ubuntu 18.04 å®‰è£…GPU +CUDA+cuDNN ä»¥åŠå…¶ç‰ˆæœ¬é€‰æ‹©ï¼ˆäº²æµ‹éå¸¸å®ç”¨ï¼‰</a></p><h2 id="Ubuntu-å¸¸ç”¨è½¯ä»¶"><a href="#Ubuntu-å¸¸ç”¨è½¯ä»¶" class="headerlink" title="Ubuntu å¸¸ç”¨è½¯ä»¶"></a>Ubuntu å¸¸ç”¨è½¯ä»¶</h2><h3 id="TeamViewer"><a href="#TeamViewer" class="headerlink" title="TeamViewer"></a>TeamViewer</h3><ol><li>ä¸‹è½½*.deb package 14.2.2558 <a href="https://www.teamviewer.com/zhcn/download/linux/" target="_blank" rel="noopener">https://www.teamviewer.com/zhcn/download/linux/</a></li><li><p>å‘½ä»¤è¡Œå®‰è£…</p> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo dpkg -i teamviewer-host_14.2.8352_amd64.deb</span><br><span class="line">sudo apt install -f</span><br></pre></td></tr></table></figure></li><li><p>å¯åŠ¨teamviewer</p> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span> teamviewer</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ã€é˜…è¯»æ—¶é—´ã€‘XXX min XXX words&lt;br&gt;ã€é˜…è¯»å†…å®¹ã€‘â€¦â€¦&lt;/p&gt;
    
    </summary>
    
      <category term="ç¯å¢ƒé…ç½®" scheme="http://yoursite.com/categories/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"/>
    
    
  </entry>
  
  <entry>
    <title>DeepLearing_papers</title>
    <link href="http://yoursite.com/2019/03/27/DeepLearning-papers/"/>
    <id>http://yoursite.com/2019/03/27/DeepLearning-papers/</id>
    <published>2019-03-27T05:54:56.000Z</published>
    <updated>2019-03-27T17:18:13.709Z</updated>
    
    <content type="html"><![CDATA[<p>ã€é˜…è¯»æ—¶é—´ã€‘XXX min XXX words<br>ã€é˜…è¯»å†…å®¹ã€‘â€¦â€¦</p><a id="more"></a><h4 id="ã€ŠFully-Convolutional-Networks-for-Semantic-Segmentationã€‹"><a href="#ã€ŠFully-Convolutional-Networks-for-Semantic-Segmentationã€‹" class="headerlink" title="ã€ŠFully Convolutional Networks for Semantic Segmentationã€‹"></a>ã€ŠFully Convolutional Networks for Semantic Segmentationã€‹</h4><h5 id="è®ºæ–‡é“¾æ¥"><a href="#è®ºæ–‡é“¾æ¥" class="headerlink" title="è®ºæ–‡é“¾æ¥"></a>è®ºæ–‡é“¾æ¥</h5><p><a href="https://arxiv.org/abs/1411.4038" target="_blank" rel="noopener">Fully Convolutional Networks for Semantic Segmentation</a></p><h5 id="å‚è€ƒç¬”è®°"><a href="#å‚è€ƒç¬”è®°" class="headerlink" title="å‚è€ƒç¬”è®°"></a>å‚è€ƒç¬”è®°</h5><p><a href="https://cloud.tencent.com/developer/article/1008418" target="_blank" rel="noopener">æ·±åº¦å­¦ä¹ è®ºæ–‡ç¬”è®°ï¼ˆå…­ï¼‰â€” FCN å…¨è¿æ¥ç½‘ç»œ</a>ã€<a href="https://zhuanlan.zhihu.com/p/37618638" target="_blank" rel="noopener">é˜…è¯»ç¬”è®°ï¼ˆçŸ¥ä¹ï¼‰</a>ã€<a href="https://blog.csdn.net/tangwei2014/article/details/46882257" target="_blank" rel="noopener">è®ºæ–‡é˜…è¯»ç¬”è®°</a> </p><h5 id="ç®€è¿°"><a href="#ç®€è¿°" class="headerlink" title="ç®€è¿°"></a>ç®€è¿°</h5><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://img-blog.csdn.net/20150714192055956?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>2015å¹´çš„CVPRä¸ŠJ.Longç­‰äººæå‡ºä¸€ç§å¯¹å›¾åƒè¿›è¡Œ<code>ç«¯åˆ°ç«¯çš„è¯­ä¹‰åˆ†å‰²</code>çš„ç­–ç•¥â€”â€”<code>åˆ©ç”¨FCNä»£æ›¿ä¼ ç»Ÿçš„CNN</code>ï¼Œè®­ç»ƒä¸€ä¸ªç«¯åˆ°ç«¯çš„ç½‘ç»œï¼Œè®©ç½‘ç»œåœ¨<code>åƒç´ çº§åˆ«è¿›è¡Œåˆ†ç±»é¢„æµ‹</code>ï¼Œç›´æ¥é¢„æµ‹å‡ºå…¨å›¾åƒç´ æ‰€å¯¹åº”çš„è¯­ä¹‰æ ‡ç­¾å¹¶å°†è¿™äº›è¯­ä¹‰é¢„æµ‹æ ‡ç­¾æ˜ å°„åˆ°å¯¹åº”çš„ä½ç½®ä¸Šã€‚<br>å³å°±æ˜¯ï¼š<br>æŠŠCNNæ”¹ä¸ºFCNï¼Œè¾“å…¥ä¸€å¹…å›¾åƒåç›´æ¥åœ¨è¾“å‡ºç«¯å¾—åˆ°é¢„æµ‹ç»“æœï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ªåƒç´ æ‰€å±çš„ç±»ï¼Œä»è€Œå¾—åˆ°ä¸€ä¸ªç«¯åˆ°ç«¯ï¼ˆend-to-endï¼‰çš„æ–¹æ³•æ¥å®ç°å›¾åƒçš„è¯­ä¹‰åˆ†å‰²ï¼ˆimage semantic segmentationï¼‰ã€‚</p><h5 id="è¯¦è§£"><a href="#è¯¦è§£" class="headerlink" title="è¯¦è§£"></a>è¯¦è§£</h5><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://img-blog.csdn.net/20150714193600011?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p><small>å›¾ç¤ºè¯´æ˜ï¼š<code>FCNå°†åŸæœ¬VGGNetæœ€åä¸‰å±‚çº¿æ€§å…¨è¿æ¥å±‚ç­‰æ•ˆåœ°æ”¹è¿›æˆäº†ç›¸åº”çš„å·ç§¯å±‚</code>ã€‚å·ç§¯æ¨¡æ¿å¤§å°å°±æ˜¯è¾“å…¥çš„ç‰¹å¾mapçš„å¤§å°ï¼Œä¹Ÿå°±æ˜¯è¯´æŠŠå…¨è¿æ¥ç½‘ç»œçœ‹æˆæ˜¯å¯¹æ•´å¼ è¾“å…¥mapåšå·ç§¯ï¼Œå…¨è¿æ¥å±‚åˆ†åˆ«æœ‰4096ä¸ª6*6çš„å·ç§¯æ ¸ï¼Œ4096ä¸ª1*1çš„å·ç§¯æ ¸ï¼Œ1000ä¸ª1*1çš„å·ç§¯æ ¸ï¼Œæ¥ä¸‹æ¥å°±è¦å¯¹è¿™1000ä¸ª1*1å·ç§¯æ ¸çš„è¾“å‡ºåšä¸Šé‡‡æ ·ï¼Œå¾—åˆ°1000ä¸ªåŸå›¾å¤§å°ï¼ˆå¦‚32*32ï¼‰çš„è¾“å‡ºï¼Œè¿™äº›è¾“å‡ºåˆå¹¶åå¾—åˆ°çƒ­åŠ›å›¾ï¼ˆheatmapï¼‰.</small></p><hr><p>ä¸Šè¿°æ–¹å¼èƒ½å¤Ÿå¾ˆå¥½åœ°åˆ©ç”¨å·²ç»è®­ç»ƒå¥½çš„VGGNetæ¨¡å‹çš„å‚æ•°ï¼Œä¸ç”¨åœ¨è¿›è¡Œä»å¤´åˆ°å°¾è®­ç»ƒï¼Œåªéœ€è¦å¯¹ä¸€äº›å‚æ•°è¿›è¡Œç›¸åº”çš„<code>å¾®è°ƒ</code>å³å¯ï¼Œè®­ç»ƒæ•ˆç‡å°†å¤§å¹…åº¦æé«˜ã€‚</p><p><strong>1. ä»»æ„å°ºå¯¸å›¾åƒå¯¹åº”è¾“å…¥è¾“å‡ºçš„å®ç°ï¼š</strong></p><blockquote><p>å¯¹äºCNNç½‘ç»œç»“æ„éœ€ç¡®å®šè¾“å…¥å›¾ç‰‡å¤§å°ï¼›å¯¹äºFCNæ— éœ€å…³æ³¨è¾“å…¥å°ºå¯¸</p></blockquote><p>ä¸€ä¸ªç¡®å®šçš„CNNç½‘ç»œç»“æ„ä¹‹æ‰€ä»¥è¦å›ºå®šè¾“å…¥å›¾ç‰‡å¤§å°ï¼Œæ˜¯å› ä¸ºå…¨è¿æ¥å±‚æƒå€¼æ•°å›ºå®šï¼Œè€Œè¯¥æƒå€¼æ•°å’Œfeature mapå¤§å°æœ‰å…³ã€‚<a href="https://zhuanlan.zhihu.com/p/37618638" target="_blank" rel="noopener">è¯¦æƒ…è¯´æ˜</a><br>å¯¹äºFCNï¼Œå…¶åœ¨CNNçš„åŸºç¡€ä¸ŠæŠŠ1000ä¸ªç»“ç‚¹çš„å…¨è¿æ¥å±‚æ”¹ä¸ºå«æœ‰1000ä¸ª1Ã—1å·ç§¯æ ¸çš„å·ç§¯å±‚ï¼Œç»è¿‡è¿™ä¸€å±‚ï¼Œè¿˜æ˜¯å¾—åˆ°äºŒç»´çš„feature mapï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä¸å…³å¿ƒè¿™ä¸ªfeature mapå¤§å°ã€‚</p><p><strong>2. é€šè¿‡ä¸Šé‡‡æ ·å¾—åˆ°é¢„æµ‹æ˜ å°„ï¼ˆdense predictionï¼‰çš„ç­–ç•¥ï¼š</strong><br>åœ¨è¯•éªŒä¸­å‘ç°ï¼Œå¾—åˆ°çš„åˆ†å‰²ç»“æœæ¯”è¾ƒç²—ç³™ï¼Œæ‰€ä»¥è€ƒè™‘åŠ å…¥æ›´å¤šå‰å±‚çš„ç»†èŠ‚ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯æŠŠå€’æ•°ç¬¬å‡ å±‚çš„è¾“å‡ºå’Œæœ€åçš„è¾“å‡ºåšä¸€ä¸ªfusionï¼Œå®é™…ä¸Šä¹Ÿå°±æ˜¯åŠ å’Œï¼š<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://img-blog.csdn.net/20150714195109640?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><br>2.1 ç¬¬ä¸€ç§æ–¹æ³•å¯¹æ‰€å¾—ç‰¹å¾å›¾åƒç›´æ¥è¿›è¡Œ32å€çš„ä¸Šé‡‡æ ·ï¼Œè¢«ç§°ä¸º<code>FCN-32s</code>ï¼Œå¤„ç†æ–¹æ³•ç®€å•è¿…é€Ÿï¼Œä½†æ˜¯å…¶é‡‡æ ·é¢„æµ‹ç»“æœçš„è¾¹ç¼˜ä¿¡æ¯æ¯”è¾ƒæ¨¡ç³Šï¼Œæ— æ³•è¡¨ç°å¾—æ›´å…·ä½“ã€‚<br>2.2 ç¬¬äºŒç§æ–¹æ³•æå‡ºäº†å±‚è·¨è¶Šï¼ˆskiplayersï¼‰çš„æ€è·¯ï¼Œå³ç‰¹å¾å›¾åƒè¿›è¡Œ2å€çš„ä¸Šé‡‡æ ·åï¼Œå°†å…¶ç»“æœä¸ç¬¬å››å±‚(skiplayer)æ± åŒ–æ“ä½œåçš„ç»“æœç›¸è¿­åŠ ï¼Œä¹‹åå†å¯¹ç»“æœè¿›è¡Œ16å€ä¸Šé‡‡æ ·ï¼Œæœ€ç»ˆè·å¾—é‡‡æ ·é¢„æµ‹ï¼Œå³<code>FCN-16s</code>ã€‚å…¶å°†ä½å±‚çš„finelayerä¸é«˜å±‚çš„coarselayerè¿›è¡Œç»“åˆï¼Œå…¼é¡¾äº†å±€éƒ¨ä¿¡æ¯ä¸å…¨å±€ä¿¡æ¯ï¼Œå¯¹åƒç´ çš„ç©ºé—´åˆ¤åˆ«ä¸è¯­ä¹‰åˆ¤åˆ«è¿›è¡Œäº†å¾ˆå¥½çš„æŠ˜ä¸­å¤„ç†ã€‚ç›¸è¾ƒFCN-32sï¼ŒFCN-16sæ‰€è·å¾—çš„é‡‡æ ·é¢„æµ‹ä¸ç®¡æ˜¯ä»é¢„æµ‹ç»“æœè¿˜æ˜¯ç½‘ç»œç»“æ„æ¥è¯´æ˜¾ç„¶éƒ½æ›´åŠ ä¼˜ç§€ã€‚<br>2.3 ç¬¬ä¸‰ç§æ–¹æ³•åˆ™æ˜¯åœ¨FCN-16sçš„åŸºç¡€ä¸Šï¼Œè¿›è¡Œäº†ä¸ç¬¬ä¸‰å±‚(skiplayer)æ± åŒ–æ“ä½œåçš„ç»“æœç›¸è¿­åŠ ï¼Œå†å¯¹ç»“æœè¿›è¡Œ8å€ä¸Šé‡‡æ ·çš„<code>FCN-8s</code>ã€‚<strong>æ˜¾ç„¶ï¼Œå…¶ç”Ÿæˆçš„è¯­ä¹‰æ ‡ç­¾å›¾åƒæ˜¯ä¸‰ç§æƒ…å†µä¸­æœ€å¥½çš„ã€‚</strong><br>ç»­è¨€ï¼šåœ¨é€å±‚fusionçš„è¿‡ç¨‹ä¸­ï¼Œåšåˆ°ç¬¬ä¸‰è¡Œå†å¾€ä¸‹ï¼Œç»“æœåˆä¼šå˜å·®ï¼Œæ‰€ä»¥ä½œè€…åšåˆ°è¿™é‡Œå°±åœäº†ã€‚</p><h4 id="ã€ŠThe-One-Hundred-Layers-Tiramisu-Fully-Convolutional-DenseNets-for-Semantic-Segmentationã€‹"><a href="#ã€ŠThe-One-Hundred-Layers-Tiramisu-Fully-Convolutional-DenseNets-for-Semantic-Segmentationã€‹" class="headerlink" title="ã€ŠThe One Hundred Layers Tiramisu: Fully Convolutional DenseNets for Semantic Segmentationã€‹"></a>ã€ŠThe One Hundred Layers Tiramisu: Fully Convolutional DenseNets for Semantic Segmentationã€‹</h4><h5 id="è®ºæ–‡é“¾æ¥-1"><a href="#è®ºæ–‡é“¾æ¥-1" class="headerlink" title="è®ºæ–‡é“¾æ¥"></a>è®ºæ–‡é“¾æ¥</h5><p><a href="https://arxiv.org/pdf/1611.09326.pdf" target="_blank" rel="noopener">The One Hundred Layers Tiramisu: Fully Convolutional DenseNets for Semantic Segmentation</a></p><h5 id="ä»£ç é“¾æ¥"><a href="#ä»£ç é“¾æ¥" class="headerlink" title="ä»£ç é“¾æ¥"></a>ä»£ç é“¾æ¥</h5><p>PyTorchä»£ç ï¼š</p><ul><li><a href="https://github.com/bfortuner/pytorch_tiramisu" target="_blank" rel="noopener">https://github.com/bfortuner/pytorch_tiramisu</a></li><li><a href="https://github.com/baldassarreFe/pytorch-densenet-tiramisu" target="_blank" rel="noopener">https://github.com/baldassarreFe/pytorch-densenet-tiramisu</a></li></ul><p>tensorflowä»£ç ï¼š</p><ul><li><a href="https://github.com/HasnainRaz/FC-DenseNet-TensorFlow" target="_blank" rel="noopener">https://github.com/HasnainRaz/FC-DenseNet-TensorFlow</a></li></ul><p>å®éªŒä»£ç ï¼š</p><ul><li><a href="https://github.com/fourmi1995/IronSegExperiment-FC-DenseNet.git" target="_blank" rel="noopener">https://github.com/fourmi1995/IronSegExperiment-FC-DenseNet.git</a></li><li><a href="https://github.com/SimJeg/FC-DenseNet" target="_blank" rel="noopener">https://github.com/SimJeg/FC-DenseNet</a></li></ul><h5 id="å‚è€ƒç¬”è®°-1"><a href="#å‚è€ƒç¬”è®°-1" class="headerlink" title="å‚è€ƒç¬”è®°"></a>å‚è€ƒç¬”è®°</h5><p><a href="https://www.cnblogs.com/fourmi/p/9881741.html" target="_blank" rel="noopener">è®ºæ–‡é˜…è¯»ç¬”è®°</a>ã€<a href="https://zhuanlan.zhihu.com/p/31730274" target="_blank" rel="noopener">ã€CV-Semantic Segmentationã€‘FC-DenseNeté˜…è¯»ç¬”è®°</a></p><h5 id="ç®€è¿°-1"><a href="#ç®€è¿°-1" class="headerlink" title="ç®€è¿°"></a>ç®€è¿°</h5><p><center><br><img src="/2019/03/27/DeepLearning-papers/Figure1.png" width="300"><br></center><br>æœ¬è®ºæ–‡å°†DenseNetsæ‰©å±•ä¸ºFCNsï¼Œå†åŠ ä¸Šä¸Šé‡‡æ ·è·¯å¾„æ¥æ¢å¤è¾“å…¥åˆ†è¾¨ç‡ã€‚åœ¨ç‰¹å¾å›¾ä¸Šé‡‡æ ·è¿‡ç¨‹ä¸­ï¼Œå¢åŠ ä¸Šé‡‡æ ·é€šé“æ— ç–‘ä¼šå¢åŠ è®¡ç®—é‡å’Œå‚æ•°ä¸ªæ•°ï¼Œä¸ºäº†æ¶ˆé™¤è¯¥å½±å“ï¼Œæˆ‘ä»¬<code>ä»…åœ¨denseæ¨¡å—åå¢åŠ ä¸Šé‡‡æ ·é€šé“</code>ï¼Œè¿™ä½¿å¾—æ¯ç§åˆ†è¾¨ç‡çš„denseæ¨¡å—<code>ä¸Šé‡‡æ ·é€šé“ä¸æ± åŒ–å±‚ä¸ªæ•°æ— å…³</code>ï¼Œé€šè¿‡ä¸‹é‡‡æ ·å’Œä¸Šé‡‡æ ·é—´çš„è·¨å±‚è¿æ¥ï¼Œé«˜åˆ†è¾¨ç‡çš„ä¿¡æ¯å¾—ä»¥ä¼ é€’ã€‚</p><p><strong>ä¸»è¦è´¡çŒ®ï¼š</strong><br>ï¼ˆ1ï¼‰æ”¹è¿›DenseNetç»“æ„ä¸ºFCNç”¨äºåˆ†å‰²ï¼ŒåŒæ—¶ç¼“è§£äº†feature mapæ•°é‡çš„æ¿€å¢ã€‚<br>ï¼ˆ2ï¼‰æ ¹æ®dense blockæå‡ºçš„ä¸Šé‡‡æ ·ç»“æ„ï¼Œæ¯”æ™®é€šçš„ä¸Šé‡‡æ ·æ–¹å¼æ•ˆæœå¥½å¾ˆå¤šã€‚<br>ï¼ˆ3ï¼‰è¯¥æ¨¡å‹ä¸éœ€è¦é¢„è®­ç»ƒæ¨¡å‹å’Œåå¤„ç†è¿‡ç¨‹ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ã€é˜…è¯»æ—¶é—´ã€‘XXX min XXX words&lt;br&gt;ã€é˜…è¯»å†…å®¹ã€‘â€¦â€¦&lt;/p&gt;
    
    </summary>
    
      <category term="Paper" scheme="http://yoursite.com/categories/Paper/"/>
    
    
  </entry>
  
  <entry>
    <title>PyTorch_Run_Notice</title>
    <link href="http://yoursite.com/2019/03/17/PyTorch-Run-Notice/"/>
    <id>http://yoursite.com/2019/03/17/PyTorch-Run-Notice/</id>
    <published>2019-03-16T18:53:23.000Z</published>
    <updated>2019-03-20T15:31:17.013Z</updated>
    
    <content type="html"><![CDATA[<p>ã€é˜…è¯»æ—¶é—´ã€‘XXX min XXX words<br>ã€é˜…è¯»å†…å®¹ã€‘â€¦â€¦</p><a id="more"></a><h4 id="ä½¿ç”¨å¤šå¼ GPU"><a href="#ä½¿ç”¨å¤šå¼ GPU" class="headerlink" title="ä½¿ç”¨å¤šå¼ GPU"></a>ä½¿ç”¨å¤šå¼ GPU</h4><p>æ–¹å¼ä¸€ï¼šï¼ˆæ¨èï¼‰</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"></span><br><span class="line">outputs = nn.parallel.data_parallel(model, inputs, device_ids=[<span class="number">2</span>, <span class="number">3</span>])</span><br></pre></td></tr></table></figure><p>æ–¹å¼äºŒï¼š<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">opt.device = t.device(<span class="string">'cuda:2,3'</span>) <span class="keyword">if</span> opt.use_gpu <span class="keyword">else</span> t.device(<span class="string">'cpu'</span>)</span><br></pre></td></tr></table></figure></p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"></span><br><span class="line">model=nn.DataParallel(model, device_ids=[<span class="number">2</span>, <span class="number">3</span>]) </span><br><span class="line">outputs = model(inputs)</span><br></pre></td></tr></table></figure><ul><li>å¯èƒ½ä¼šæŠ¥é”™ï¼š<code>RuntimeError: all tensors must be on devices[0]</code></li></ul><h5 id="ä½¿ç”¨æŒ‡å®šçš„GPU"><a href="#ä½¿ç”¨æŒ‡å®šçš„GPU" class="headerlink" title="ä½¿ç”¨æŒ‡å®šçš„GPU"></a>ä½¿ç”¨æŒ‡å®šçš„GPU</h5><p>ç›´æ¥ç»ˆç«¯ä¸­è®¾å®šï¼š<br><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">CUDA_VISIBLE_DEVICES=[2,3] python main.py</span><br></pre></td></tr></table></figure></p><p>or pythonä»£ç ä¸­è®¾å®šï¼š<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">os.environ[<span class="string">"CUDA_VISIBLE_DEVICES"</span>] = [<span class="number">2</span>,<span class="number">3</span>]</span><br></pre></td></tr></table></figure></p><h4 id="æ•°æ®é›†"><a href="#æ•°æ®é›†" class="headerlink" title="æ•°æ®é›†"></a>æ•°æ®é›†</h4><ul><li>è®­ç»ƒé›†ï¼ˆTrainï¼‰ä¸ éªŒè¯é›†ï¼ˆValidï¼‰<ul><li>æœ‰labelï¼Œå¯è®¡ç®—lossã€acc  ï¼ˆlossï¼šæ¦‚ç‡  accï¼šå®é™…ç»Ÿè®¡ï¼‰</li><li>å¯¹äºå°æ•°æ®é›†ï¼Œä»¥8ï¼š2æ¯”ä¾‹åˆ’åˆ†  ï¼ˆæ•°æ®é‡å¤§æ—¶ï¼Œäº¦å¯7ï¼š3åˆ’åˆ†ï¼‰</li><li>ä»…ä½¿ç”¨è®­ç»ƒé›†æ—¶ï¼Œè¿›è¡Œæ•°æ®å¢å¼ºã€åå‘ä¼ æ’­<code>backward</code>ã€ä¼˜åŒ–è¶…å‚æ•°<code>optimize</code></li></ul></li><li>æµ‹è¯•é›†ï¼ˆTestï¼‰<ul><li>æ— label</li></ul></li></ul><p>æ³¨ï¼šä¼˜åŒ–æ¨¡å‹æ—¶ï¼Œå°è¯•äº¤å‰éªŒè¯</p><h4 id="Grammar"><a href="#Grammar" class="headerlink" title="Grammar"></a>Grammar</h4><ul><li><code>Tensor.item() â†’ int</code></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ã€é˜…è¯»æ—¶é—´ã€‘XXX min XXX words&lt;br&gt;ã€é˜…è¯»å†…å®¹ã€‘â€¦â€¦&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>PyTorchå­¦ä¹ ä¹‹è·¯_CSDN</title>
    <link href="http://yoursite.com/2019/03/14/PyTorch%E5%AD%A6%E4%B9%A0%E4%B9%8B%E8%B7%AF_CSDN/"/>
    <id>http://yoursite.com/2019/03/14/PyTorchå­¦ä¹ ä¹‹è·¯_CSDN/</id>
    <published>2019-03-14T09:03:30.000Z</published>
    <updated>2019-03-16T17:30:00.350Z</updated>
    
    <content type="html"><![CDATA[<p>ã€é˜…è¯»æ—¶é—´ã€‘XXX min XXX words<br>ã€é˜…è¯»å†…å®¹ã€‘è½¬è½½äº <a href="https://blog.csdn.net/u014380165" target="_blank" rel="noopener">AIä¹‹è·¯</a></p><a id="more"></a><h2 id="PyTorchå­¦ä¹ ä¹‹è·¯ï¼ˆlevel1ï¼‰â€”â€”è®­ç»ƒä¸€ä¸ªå›¾åƒåˆ†ç±»æ¨¡å‹"><a href="#PyTorchå­¦ä¹ ä¹‹è·¯ï¼ˆlevel1ï¼‰â€”â€”è®­ç»ƒä¸€ä¸ªå›¾åƒåˆ†ç±»æ¨¡å‹" class="headerlink" title="PyTorchå­¦ä¹ ä¹‹è·¯ï¼ˆlevel1ï¼‰â€”â€”è®­ç»ƒä¸€ä¸ªå›¾åƒåˆ†ç±»æ¨¡å‹"></a><a href="https://blog.csdn.net/u014380165/article/details/78525273" target="_blank" rel="noopener">PyTorchå­¦ä¹ ä¹‹è·¯ï¼ˆlevel1ï¼‰â€”â€”è®­ç»ƒä¸€ä¸ªå›¾åƒåˆ†ç±»æ¨¡å‹</a></h2><h3 id="æ•°æ®å¯¼å…¥éƒ¨åˆ†"><a href="#æ•°æ®å¯¼å…¥éƒ¨åˆ†" class="headerlink" title="æ•°æ®å¯¼å…¥éƒ¨åˆ†"></a>æ•°æ®å¯¼å…¥éƒ¨åˆ†</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">data_dir = <span class="string">'/data'</span></span><br><span class="line">image_datasets = &#123;x: datasets.ImageFolder(</span><br><span class="line">                    os.path.join(data_dir, x),</span><br><span class="line">                    data_transforms[x])ï¼Œ </span><br><span class="line">                    <span class="keyword">for</span> x <span class="keyword">in</span> [<span class="string">'train'</span>, <span class="string">'val'</span>]&#125;</span><br></pre></td></tr></table></figure><h4 id="data-transforms"><a href="#data-transforms" class="headerlink" title="data_transforms"></a>data_transforms</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">data_transforms = &#123;</span><br><span class="line">    <span class="string">'train'</span>: transforms.Compose([</span><br><span class="line">        transforms.RandomSizedCrop(<span class="number">224</span>),  <span class="comment"># è¾“å…¥å¯¹è±¡æ˜¯PIL Image</span></span><br><span class="line">        transforms.RandomHorizontalFlip(),</span><br><span class="line">        transforms.ToTensor(),</span><br><span class="line">        transforms.Normalize([<span class="number">0.485</span>, <span class="number">0.456</span>, <span class="number">0.406</span>], [<span class="number">0.229</span>, <span class="number">0.224</span>, <span class="number">0.225</span>])</span><br><span class="line">    ]),</span><br><span class="line">    <span class="string">'val'</span>: transforms.Compose([</span><br><span class="line">        transforms.Scale(<span class="number">256</span>),  <span class="comment"># ç›®å‰å·²ç»è¢«transforms.Resizeç±»å–ä»£</span></span><br><span class="line">        transforms.CenterCrop(<span class="number">224</span>),</span><br><span class="line">        transforms.ToTensor(),</span><br><span class="line">        transforms.Normalize([<span class="number">0.485</span>, <span class="number">0.456</span>, <span class="number">0.406</span>], [<span class="number">0.229</span>, <span class="number">0.224</span>, <span class="number">0.225</span>])</span><br><span class="line">    ]),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="torch-utils-data-DataLoader"><a href="#torch-utils-data-DataLoader" class="headerlink" title="torch.utils.data.DataLoader"></a>torch.utils.data.DataLoader</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">dataloders = &#123;x: torch.utils.data.DataLoader(image_datasets[x], batch_size=<span class="number">4</span>, shuffle=<span class="keyword">True</span>, num_workers=<span class="number">4</span>) <span class="keyword">for</span> x <span class="keyword">in</span> [<span class="string">'train'</span>, <span class="string">'val'</span>]&#125;</span><br></pre></td></tr></table></figure><p><code>torchvision.datasets.ImageFolder</code>ä»…è¿”å›listï¼Œlistæ˜¯ä¸èƒ½ä½œä¸ºæ¨¡å‹è¾“å…¥çš„ï¼Œå› æ­¤åœ¨PyTorchä¸­éœ€è¦ç”¨å¦ä¸€ä¸ªç±»æ¥å°è£…listï¼Œé‚£å°±æ˜¯ï¼štorch.utils.data.DataLoaderã€‚ï¼ˆlist â†’ Tensorï¼‰</p><h4 id="torch-utils-data-Dataset"><a href="#torch-utils-data-Dataset" class="headerlink" title="torch.utils.data.Dataset"></a>torch.utils.data.Dataset</h4><ul><li>è¿™æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œåœ¨pytorchä¸­æ‰€æœ‰å’Œæ•°æ®ç›¸å…³çš„ç±»ï¼ˆä¾‹å¦‚ï¼Œtorchvision.datasets.ImageFolderã€torch.util.data.DataLoaderï¼‰éƒ½è¦ç»§æ‰¿è¿™ä¸ªç±»æ¥å®ç°ã€‚</li><li>å½“ä½ çš„æ•°æ®ä¸æ˜¯æŒ‰ç…§ä¸€ä¸ªç±»åˆ«ä¸€ä¸ªæ–‡ä»¶å¤¹è¿™ç§æ–¹å¼å­˜å‚¨æ—¶ï¼Œä½ å°±è¦è‡ªå®šä¹‰ä¸€ä¸ªç±»æ¥è¯»å–æ•°æ®ï¼Œè‡ªå®šä¹‰çš„è¿™ä¸ªç±»å¿…é¡»ç»§æ‰¿è‡ªtorch.utils.data.Datasetè¿™ä¸ªåŸºç±»ï¼Œæœ€ååŒæ ·ç”¨torch.utils.data.DataLoaderå°è£…æˆTensorã€‚</li></ul><h5 id="Variable"><a href="#Variable" class="headerlink" title="Variable"></a>Variable</h5><p>å°†Tensoræ•°æ®ç±»å‹å°è£…æˆVariableæ•°æ®ç±»å‹ï¼Œä¾¿å¯ä»¥ä½œä¸ºæ¨¡å‹çš„è¾“å…¥äº† ğŸ‘‡<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> data <span class="keyword">in</span> dataloders[<span class="string">'train'</span>]:  <span class="comment"># type(dataloaders): Dictionary</span></span><br><span class="line">   inputs, labels = data   <span class="comment"># type(input) / type(labels): Tensor</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">if</span> use_gpu:</span><br><span class="line">       inputs = Variable(inputs.cuda())</span><br><span class="line">       labels = Variable(labels.cuda())</span><br><span class="line">   <span class="keyword">else</span>:</span><br><span class="line">       inputs, labels = Variable(inputs), Variable(labels)</span><br></pre></td></tr></table></figure></p><ul><li>Tensor + gradient_Info â†’ Variable</li><li><p>Variable.data â†’ Tensor</p><ul><li>Tensor: torch.tensor</li><li>Variable: torch.autograd.Variable</li></ul></li></ul><h3 id="å¯¼å…¥æ¨¡å‹"><a href="#å¯¼å…¥æ¨¡å‹" class="headerlink" title="å¯¼å…¥æ¨¡å‹"></a>å¯¼å…¥æ¨¡å‹</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">model = models.resnet18(pretrained=<span class="keyword">True</span>)  <span class="comment"># åŠ è½½å™«é¢„è®­ç»ƒçš„æ¨¡å‹å‚æ•°</span></span><br><span class="line">num_ftrs = model.fc.in_features  <span class="comment"># è·å–å…¨è¿æ¥å±‚çš„è¾“å…¥channelä¸ªæ•°</span></span><br><span class="line">model.fc = nn.Linear(num_ftrs, <span class="number">2</span>) <span class="comment"># æ›¿æ¢æœ€åçš„å…¨è¿æ¥å±‚ä¸ºä½ æ‰€éœ€è¦çš„è¾“å‡º</span></span><br></pre></td></tr></table></figure><h3 id="å®šä¹‰æŸå¤±å‡½æ•°"><a href="#å®šä¹‰æŸå¤±å‡½æ•°" class="headerlink" title="å®šä¹‰æŸå¤±å‡½æ•°"></a>å®šä¹‰æŸå¤±å‡½æ•°</h3><p>ä½¿ç”¨äº¤å‰ç†µå‡½æ•° ğŸ‘‡<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">criterion = nn.CrossEntropyLoss()</span><br></pre></td></tr></table></figure></p><h4 id="å®šä¹‰ä¼˜åŒ–å‡½æ•°"><a href="#å®šä¹‰ä¼˜åŒ–å‡½æ•°" class="headerlink" title="å®šä¹‰ä¼˜åŒ–å‡½æ•°"></a>å®šä¹‰ä¼˜åŒ–å‡½æ•°</h4><p>Adamçš„ä¼˜åŒ–æ–¹å¼ ğŸ‘‡<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">optimizer = optim.SGD(model.parameters(), lr=<span class="number">0.001</span>, momentum=<span class="number">0.9</span>)</span><br></pre></td></tr></table></figure></p><h3 id="å®šä¹‰å­¦ä¹ ç‡çš„å˜åŒ–ç­–ç•¥"><a href="#å®šä¹‰å­¦ä¹ ç‡çš„å˜åŒ–ç­–ç•¥" class="headerlink" title="å®šä¹‰å­¦ä¹ ç‡çš„å˜åŒ–ç­–ç•¥"></a>å®šä¹‰å­¦ä¹ ç‡çš„å˜åŒ–ç­–ç•¥</h3><p>ä½¿ç”¨torch.optim.lr_scheduleræ¨¡å—çš„StepLRç±» ğŸ‘‡<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"> <span class="comment"># æ¯éš”step_sizeä¸ªepochå°±å°†å­¦ä¹ ç‡é™ä¸ºåŸæ¥çš„gammaå€</span></span><br><span class="line">scheduler = lr_scheduler.StepLR(optimizer, step_size=<span class="number">7</span>, gamma=<span class="number">0.1</span>)</span><br></pre></td></tr></table></figure></p><h3 id="è®­ç»ƒ"><a href="#è®­ç»ƒ" class="headerlink" title="è®­ç»ƒ"></a>è®­ç»ƒ</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åœ¨æ¯ä¸ªepochå¼€å§‹æ—¶éƒ½è¦æ›´æ–°å­¦ä¹ ç‡ï¼ˆaccording to å­¦ä¹ ç‡çš„å˜åŒ–ç­–ç•¥ï¼‰</span></span><br><span class="line">scheduler.step()</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®æ¨¡å‹çŠ¶æ€ä¸ºè®­ç»ƒçŠ¶æ€</span></span><br><span class="line">model.train(<span class="keyword">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†ç½‘ç»œä¸­çš„æ‰€æœ‰æ¢¯åº¦ç½®0</span></span><br><span class="line">optimizer.zero_grad()</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç½‘ç»œçš„å‰å‘ä¼ æ’­</span></span><br><span class="line">outputs = model(inputs)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†è¾“å‡ºçš„outputså’ŒåŸæ¥å¯¼å…¥çš„labelsä½œä¸ºlosså‡½æ•°çš„è¾“å…¥å°±å¯ä»¥å¾—åˆ°æŸå¤±</span></span><br><span class="line">loss = criterion(outputs, labels)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Get æ¨¡å‹é¢„æµ‹è¯¥æ ·æœ¬å±äºå“ªä¸ªç±»åˆ«çš„ä¿¡æ¯</span></span><br><span class="line">_, preds = torch.max(outputs.data, <span class="number">1</span>)  <span class="comment"># ç¬¬äºŒä¸ªå‚æ•°1æ˜¯ä»£è¡¨dimçš„æ„æ€ï¼Œä¹Ÿå°±æ˜¯å–æ¯ä¸€è¡Œçš„æœ€å¤§å€¼ï¼Œå…¶å®å°±æ˜¯æˆ‘ä»¬å¸¸è§çš„å–æ¦‚ç‡æœ€å¤§çš„é‚£ä¸ªindex</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å›ä¼ æŸå¤±</span></span><br><span class="line">loss.backward()  <span class="comment"># æ³¨æ„: è¿™æ˜¯åœ¨è®­ç»ƒçš„æ—¶å€™æ‰ä¼šæœ‰çš„æ“ä½œï¼Œæµ‹è¯•æ—¶å€™åªæœ‰forwardè¿‡ç¨‹</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ ¹æ®å›ä¼ è¿‡ç¨‹ä¸­è®¡ç®—å¾—åˆ°çš„æ¢¯åº¦æ›´æ–°å‚æ•°</span></span><br><span class="line">optimizer.step()</span><br><span class="line"><span class="comment"># æŸ¥çœ‹å„ä¸ªå±‚çš„æ¢¯åº¦å’Œæƒå€¼ä¿¡æ¯</span></span><br><span class="line"><span class="comment"># optimizer.param_groups[0][â€˜paramsâ€™]</span></span><br></pre></td></tr></table></figure><p>å®Œæ•´ä»£ç ï¼š<a href="https://github.com/miraclewkf/ImageClassification-PyTorch/blob/master/level1/train.py" target="_blank" rel="noopener">ImageClassification-PyTorch</a></p><h2 id="PyTorchå­¦ä¹ ä¹‹è·¯ï¼ˆlevel2ï¼‰â€”â€”è‡ªå®šä¹‰æ•°æ®è¯»å–"><a href="#PyTorchå­¦ä¹ ä¹‹è·¯ï¼ˆlevel2ï¼‰â€”â€”è‡ªå®šä¹‰æ•°æ®è¯»å–" class="headerlink" title="PyTorchå­¦ä¹ ä¹‹è·¯ï¼ˆlevel2ï¼‰â€”â€”è‡ªå®šä¹‰æ•°æ®è¯»å–"></a><a href="https://blog.csdn.net/u014380165/article/details/78634829" target="_blank" rel="noopener">PyTorchå­¦ä¹ ä¹‹è·¯ï¼ˆlevel2ï¼‰â€”â€”è‡ªå®šä¹‰æ•°æ®è¯»å–</a></h2><h3 id="ImageFolder"><a href="#ImageFolder" class="headerlink" title="ImageFolder"></a>ImageFolder</h3><h4 id="åˆå§‹åŒ–init"><a href="#åˆå§‹åŒ–init" class="headerlink" title="åˆå§‹åŒ–init"></a>åˆå§‹åŒ–<strong>init</strong></h4><ul><li><p><code>__init__</code>æ–¹æ³•</p>  <figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, root, transform=None, target_transform=None,loader=default_loader)</span></span></span><br></pre></td></tr></table></figure></li></ul><ol><li><p>é€šè¿‡find_classeså‡½æ•°å¾—åˆ°åˆ†ç±»çš„ç±»åˆ«åï¼ˆclassesï¼‰å’Œç±»åˆ«åä¸æ•°å­—ç±»åˆ«çš„æ˜ å°„å…³ç³»å­—å…¸ï¼ˆclass_to_idxï¼‰</p> <figure class="highlight python"><table><tr><td class="code"><pre><span class="line">classes, class_to_idx = find_classes(root)</span><br></pre></td></tr></table></figure></li><li><p>é€šè¿‡make_datasetå‡½æ•°å¾—åˆ°imagsï¼Œè¿™ä¸ªimagsæ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œå…¶ä¸­æ¯ä¸ªå€¼æ˜¯ä¸€ä¸ªtupleï¼Œæ¯ä¸ªtupleåŒ…å«ä¸¤ä¸ªå…ƒç´ ï¼šå›¾åƒè·¯å¾„å’Œæ ‡ç­¾ã€‚</p> <figure class="highlight python"><table><tr><td class="code"><pre><span class="line">imgs = make_dataset(root, class_to_idx)</span><br><span class="line"><span class="keyword">if</span> len(imgs) == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">raise</span>(RuntimeError(<span class="string">"Found 0 images in subfolders of: "</span> + root + <span class="string">"\n"</span></span><br><span class="line">                           <span class="string">"Supported image extensions are: "</span> + <span class="string">","</span>.join(IMG_EXTENSIONS)))</span><br></pre></td></tr></table></figure></li><li><p>å‰©ä¸‹çš„å°±æ˜¯ä¸€äº›èµ‹å€¼æ“ä½œäº†</p> <figure class="highlight python"><table><tr><td class="code"><pre><span class="line">self.root = root</span><br><span class="line">self.imgs = imgs</span><br><span class="line">self.classes = classes</span><br><span class="line">self.class_to_idx = class_to_idx</span><br><span class="line">self.transform = transform</span><br><span class="line">self.target_transform = target_transform</span><br><span class="line">self.loader = loader</span><br></pre></td></tr></table></figure></li></ol><h4 id="è·å–å›¾åƒgetitem"><a href="#è·å–å›¾åƒgetitem" class="headerlink" title="è·å–å›¾åƒgetitem"></a>è·å–å›¾åƒ<strong>getitem</strong></h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span><span class="params">(self, index)</span>:</span></span><br><span class="line">    </span><br><span class="line">    path, target = self.imgs[index]</span><br><span class="line">        img = self.loader(path)   <span class="comment"># é‡ç‚¹  #  self.loader = default_loader ğŸ‘‡ æœ‰è§£æ</span></span><br><span class="line">        <span class="keyword">if</span> self.transform <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</span><br><span class="line">            img = self.transform(img)</span><br><span class="line">        <span class="keyword">if</span> self.target_transform <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</span><br><span class="line">            target = self.target_transform(target)</span><br><span class="line">    </span><br><span class="line">        <span class="keyword">return</span> img, target</span><br></pre></td></tr></table></figure><h5 id="default-loaderå‡½æ•°"><a href="#default-loaderå‡½æ•°" class="headerlink" title="default_loaderå‡½æ•°"></a>default_loaderå‡½æ•°</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">default_loader</span><span class="params">(path)</span>:</span></span><br><span class="line">    <span class="keyword">from</span> torchvision <span class="keyword">import</span> get_image_backend</span><br><span class="line">    <span class="keyword">if</span> get_image_backend() == <span class="string">'accimage'</span>:</span><br><span class="line">        <span class="keyword">return</span> accimage_loader(path)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> pil_loader(path)</span><br></pre></td></tr></table></figure><h6 id="pil-loaderæ–¹æ³•"><a href="#pil-loaderæ–¹æ³•" class="headerlink" title="pil_loaderæ–¹æ³•"></a>pil_loaderæ–¹æ³•</h6><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">pil_loader</span><span class="params">(path)</span>:</span></span><br><span class="line">    <span class="keyword">with</span> open(path, <span class="string">'rb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">        <span class="keyword">with</span> Image.open(f) <span class="keyword">as</span> img:</span><br><span class="line">            <span class="keyword">return</span> img.convert(<span class="string">'RGB'</span>)</span><br></pre></td></tr></table></figure><h6 id="accimage-loaderæ–¹æ³•"><a href="#accimage-loaderæ–¹æ³•" class="headerlink" title="accimage_loaderæ–¹æ³•"></a>accimage_loaderæ–¹æ³•</h6><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">accimage_loader</span><span class="params">(path)</span>:</span></span><br><span class="line">    <span class="keyword">import</span> accimage</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">return</span> accimage.Image(path)</span><br><span class="line">    <span class="keyword">except</span> IOError:</span><br><span class="line">        <span class="comment"># Potentially a decoding problem, fall back to PIL.Image</span></span><br><span class="line">        <span class="keyword">return</span> pil_loader(path)</span><br></pre></td></tr></table></figure><h4 id="æ•°æ®é›†æ•°é‡len"><a href="#æ•°æ®é›†æ•°é‡len" class="headerlink" title="æ•°æ®é›†æ•°é‡len"></a>æ•°æ®é›†æ•°é‡<strong>len</strong></h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__len__</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> len(self.imgs)</span><br></pre></td></tr></table></figure><h3 id="è‡ªå®šä¹‰æ•°æ®è¯»å–æ¥å£"><a href="#è‡ªå®šä¹‰æ•°æ®è¯»å–æ¥å£" class="headerlink" title="è‡ªå®šä¹‰æ•°æ®è¯»å–æ¥å£"></a>è‡ªå®šä¹‰æ•°æ®è¯»å–æ¥å£</h3><p>æ€è·¯ï¼š</p><ol><li>åœ¨PyTorchä¸­å’Œæ•°æ®è¯»å–ç›¸å…³çš„ç±»åŸºæœ¬éƒ½è¦ç»§æ‰¿ä¸€ä¸ªåŸºç±»ï¼š<code>torch.utils.data.Dataset</code></li><li>æ”¹å†™å…¶ä¸­çš„<code>__init__</code>ã€<code>__len__</code>ã€<code>__getitem__</code>ç­‰æ–¹æ³•å³å¯</li></ol><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">img_path: [&apos;train&apos;, &apos;val&apos;]</span><br><span class="line">txt_path: [&apos;train.txt&apos;, &apos;val.txt&apos;]</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">customData</span><span class="params">(Dataset)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, img_path, txt_path, dataset = <span class="string">''</span>, data_transforms=None, loader = default_loader)</span>:</span></span><br><span class="line">    <span class="comment"># self.img_nameå’Œself.img_labelçš„è¯»å–æ–¹å¼å°±è·Ÿä½ æ•°æ®çš„å­˜æ”¾æ–¹å¼æœ‰å…³ï¼Œä½ å¯ä»¥æ ¹æ®ä½ å®é™…æ•°æ®çš„ç»´æŠ¤æ–¹å¼åšè°ƒæ•´</span></span><br><span class="line">        <span class="keyword">with</span> open(txt_path) <span class="keyword">as</span> input_file:</span><br><span class="line">            lines = input_file.readlines()</span><br><span class="line">            self.img_name = [os.path.join(img_path, line.strip().split(<span class="string">'\t'</span>)[<span class="number">0</span>]) <span class="keyword">for</span> line <span class="keyword">in</span> lines]</span><br><span class="line">            self.img_label = [int(line.strip().split(<span class="string">'\t'</span>)[<span class="number">-1</span>]) <span class="keyword">for</span> line <span class="keyword">in</span> lines]</span><br><span class="line">            </span><br><span class="line">        self.data_transforms = data_transforms</span><br><span class="line">        self.dataset = dataset</span><br><span class="line">        self.loader = loader</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__len__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> len(self.img_name)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span><span class="params">(self, item)</span>:</span></span><br><span class="line">        img_name = self.img_name[item]</span><br><span class="line">        label = self.img_label[item]</span><br><span class="line">        img = self.loader(img_name)     <span class="comment"># é‡‡ç”¨default_loaderæ–¹æ³•æ¥è¯»å–å›¾åƒ</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> self.data_transforms <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                <span class="comment"># åœ¨Transformä¸­å°†æ¯å¼ å›¾åƒéƒ½å°è£…æˆTensor</span></span><br><span class="line">                img = self.data_transforms[self.dataset](img)</span><br><span class="line">            <span class="keyword">except</span>:</span><br><span class="line">                print(<span class="string">"Cannot transform image: &#123;&#125;"</span>.format(img_name))</span><br><span class="line">        <span class="keyword">return</span> img, label</span><br></pre></td></tr></table></figure><p>æ•°æ®è¯»å–æ¥å£çš„ä½¿ç”¨ ğŸ‘‡<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># call</span></span><br><span class="line">image_datasets = &#123;x: customData(img_path=<span class="string">'/ImagePath'</span>,</span><br><span class="line">                                    txt_path=(<span class="string">'/TxtFile/'</span> + x + <span class="string">'.txt'</span>),</span><br><span class="line">                                    data_transforms=data_transforms,</span><br><span class="line">                                    dataset=x) <span class="keyword">for</span> x <span class="keyword">in</span> [<span class="string">'train'</span>, <span class="string">'val'</span>]&#125;</span><br><span class="line">     </span><br><span class="line"><span class="comment"># DataLoader (list â†’ Tensor)ï¼Œå°†è¿™ä¸ªbatchçš„å›¾åƒæ•°æ®å’Œæ ‡ç­¾éƒ½åˆ†åˆ«å°è£…æˆTensor</span></span><br><span class="line">dataloders = &#123;x: torch.utils.data.DataLoader(image_datasets[x],</span><br><span class="line">                                                 batch_size=batch_size,</span><br><span class="line">                                                 shuffle=<span class="keyword">True</span>) <span class="keyword">for</span> x <span class="keyword">in</span> [<span class="string">'train'</span>, <span class="string">'val'</span>]&#125;</span><br></pre></td></tr></table></figure></p><h3 id="ä¿å­˜æ¨¡å‹"><a href="#ä¿å­˜æ¨¡å‹" class="headerlink" title="ä¿å­˜æ¨¡å‹"></a>ä¿å­˜æ¨¡å‹</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">torch.save(model, <span class="string">'output/resnet_epoch&#123;&#125;.pkl'</span>.format(epoch)) <span class="comment"># å¦‚æœè¿™ä¸ªoutputæ–‡ä»¶å¤¹æ²¡æœ‰ï¼Œå¯ä»¥æ‰‹åŠ¨æ–°å»ºä¸€ä¸ªæˆ–è€…åœ¨ä»£ç é‡Œé¢æ–°å»º</span></span><br></pre></td></tr></table></figure><p>å®Œæ•´ä»£ç ï¼š<a href="https://github.com/miraclewkf/ImageClassification-PyTorch/blob/master/level2/train_customData.py" target="_blank" rel="noopener">train_customData.py</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ã€é˜…è¯»æ—¶é—´ã€‘XXX min XXX words&lt;br&gt;ã€é˜…è¯»å†…å®¹ã€‘è½¬è½½äº &lt;a href=&quot;https://blog.csdn.net/u014380165&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;AIä¹‹è·¯&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="PyTorch" scheme="http://yoursite.com/tags/PyTorch/"/>
    
  </entry>
  
  <entry>
    <title>é¢ç»æ€»ç»“</title>
    <link href="http://yoursite.com/2019/03/13/%E9%9D%A2%E7%BB%8F%E6%80%BB%E7%BB%93/"/>
    <id>http://yoursite.com/2019/03/13/é¢ç»æ€»ç»“/</id>
    <published>2019-03-13T12:56:45.000Z</published>
    <updated>2019-03-13T12:59:17.618Z</updated>
    
    <content type="html"><![CDATA[<p>ã€é˜…è¯»æ—¶é—´ã€‘XXX min XXX words<br>ã€é˜…è¯»å†…å®¹ã€‘â€¦â€¦</p><a id="more"></a><h3 id="æœºå™¨å­¦ä¹ "><a href="#æœºå™¨å­¦ä¹ " class="headerlink" title="æœºå™¨å­¦ä¹ "></a>æœºå™¨å­¦ä¹ </h3><p><a href="https://blog.csdn.net/zongza/article/details/80167654" target="_blank" rel="noopener">ã€ç½®é¡¶ã€‘é¢è¯•çŸ¥è¯†ç‚¹</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ã€é˜…è¯»æ—¶é—´ã€‘XXX min XXX words&lt;br&gt;ã€é˜…è¯»å†…å®¹ã€‘â€¦â€¦&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>DeepLiver_model_note</title>
    <link href="http://yoursite.com/2019/03/13/DeepLiver-model-note/"/>
    <id>http://yoursite.com/2019/03/13/DeepLiver-model-note/</id>
    <published>2019-03-13T12:47:58.000Z</published>
    <updated>2019-03-20T05:41:04.035Z</updated>
    
    <content type="html"><![CDATA[<p>ã€é˜…è¯»æ—¶é—´ã€‘XXX min XXX words<br>ã€é˜…è¯»å†…å®¹ã€‘â€¦â€¦</p><a id="more"></a><h3 id="Method-Description"><a href="#Method-Description" class="headerlink" title="Method Description"></a>Method Description</h3><h4 id="simpleitk"><a href="#simpleitk" class="headerlink" title="simpleitk"></a>simpleitk</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> SimpleITK <span class="keyword">as</span> sitk</span><br><span class="line"></span><br><span class="line">writer = sitk.ImageFileWriter()</span><br><span class="line">writer.SetFileName(target_file)</span><br><span class="line">writer.Execute(image)</span><br></pre></td></tr></table></figure><p><code>sitk.ReadImage(name)</code> é€‚ç”¨èŒƒå›´ï¼šâ€¦</p><h4 id="argparse"><a href="#argparse" class="headerlink" title="argparse"></a><a href="http://wiki.jikexueyuan.com/project/explore-python/Standard-Modules/argparse.html" target="_blank" rel="noopener">argparse</a></h4><ol><li>åˆ›å»º <code>ArgumentParser()</code> å¯¹è±¡</li><li>è°ƒç”¨ <code>add_argument()</code> æ–¹æ³•æ·»åŠ å‚æ•°</li><li>ä½¿ç”¨ <code>parse_args()</code> è§£ææ·»åŠ çš„å‚æ•°</li></ol><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"><span class="comment"># åˆ›å»º ArgumentParser() å¯¹è±¡</span></span><br><span class="line">parser = argparse.ArgumentParser(description=<span class="string">'U-Net 2d'</span>) </span><br><span class="line"><span class="comment"># è°ƒç”¨ add_argument() æ–¹æ³•æ·»åŠ å‚æ•°</span></span><br><span class="line">parser.add_argument(<span class="string">'--resume'</span>, <span class="string">'-m'</span>, default=<span class="string">''</span>, metavar=<span class="string">'RESUME'</span>,help=<span class="string">'model parameters to load'</span>)   <span class="comment"># å¯é€‰å‚æ•°</span></span><br><span class="line">parser.add_argument(<span class="string">'--save_dir'</span>, default=<span class="string">''</span>, type=str, metavar=<span class="string">'PATH'</span>,help=<span class="string">'path to save checkpoint files'</span>) <span class="comment"># å¯é€‰å‚æ•°</span></span><br><span class="line">parser.add_argument(<span class="string">'--test'</span>, default=<span class="number">0</span>, type=int, metavar=<span class="string">'TEST'</span>,help=<span class="string">'1 do test evaluation, 0 not'</span>) <span class="comment"># å¯é€‰å‚æ•°</span></span><br><span class="line"><span class="comment"># ä½¿ç”¨ parse_args() è§£ææ·»åŠ çš„å‚æ•°</span></span><br><span class="line">args = parser.parse_args()</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> args.resume</span><br></pre></td></tr></table></figure><ul><li>metavar - åœ¨ usage è¯´æ˜ä¸­çš„å‚æ•°åç§°ï¼Œå¯¹äºå¿…é€‰å‚æ•°é»˜è®¤å°±æ˜¯å‚æ•°åç§°ï¼Œå¯¹äºå¯é€‰å‚æ•°é»˜è®¤æ˜¯å…¨å¤§å†™çš„å‚æ•°åç§°.</li></ul><h4 id="torch"><a href="#torch" class="headerlink" title="torch"></a>torch</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, out, seg)</span>:</span></span><br><span class="line">    b, w, h = seg.shape</span><br><span class="line">    seg = seg.unsqueeze(<span class="number">1</span>)</span><br><span class="line">    seg_one_hot = Variable(torch.FloatTensor(b,<span class="number">2</span>, w, h)).zero_().cuda()</span><br><span class="line">    seg = seg_one_hot.scatter_(<span class="number">1</span>, seg, <span class="number">1</span>)</span><br><span class="line">    loss = Variable(torch.FloatTensor(b)).zero_().cuda()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">2</span>):</span><br><span class="line">        loss += (<span class="number">1</span> - <span class="number">2.</span>*((out[:,i]*seg[:,i]).sum(<span class="number">1</span>).sum(<span class="number">1</span>)) / ((out[:,i]*out[:,i]).sum(<span class="number">1</span>).sum(<span class="number">1</span>)+(seg[:,i]*seg[:,i]).sum(<span class="number">1</span>).sum(<span class="number">1</span>)+<span class="number">1e-15</span>))</span><br><span class="line">    loss = loss.mean()</span><br><span class="line">    <span class="keyword">del</span> seg_one_hot, seg</span><br><span class="line">    <span class="keyword">return</span> loss</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨PyTorchè¿›è¡Œè®­ç»ƒå’Œæµ‹è¯•æ—¶ä¸€å®šæ³¨æ„è¦æŠŠå®ä¾‹åŒ–çš„modelæŒ‡å®štrain/evalï¼Œ<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># train</span></span><br><span class="line">Model.train(mode=<span class="keyword">True</span>)</span><br><span class="line"><span class="comment"># test</span></span><br><span class="line">Model.eval() <span class="comment"># evalï¼ˆï¼‰æ—¶ï¼Œæ¡†æ¶ä¼šè‡ªåŠ¨æŠŠBNå’ŒDropOutå›ºå®šä½ï¼Œä¸ä¼šå–å¹³å‡ï¼Œè€Œæ˜¯ç”¨è®­ç»ƒå¥½çš„å€¼ï¼Œä¸ç„¶çš„è¯ï¼Œä¸€æ—¦testçš„batch_sizeè¿‡å°ï¼Œå¾ˆå®¹æ˜“å°±ä¼šè¢«BNå±‚å¯¼è‡´ç”Ÿæˆå›¾ç‰‡é¢œè‰²å¤±çœŸæå¤§ï¼ï¼ï¼ï¼ï¼ï¼</span></span><br></pre></td></tr></table></figure></p><h3 id="numpy"><a href="#numpy" class="headerlink" title="numpy"></a>numpy</h3><p>å†™nrrdæ–‡ä»¶çš„æ—¶å€™ï¼Œå¯ä»¥è€ƒè™‘nrrdçš„æ•°ç»„å­˜å‚¨å½¢å¼ä¸æ­£å¸¸æ•°ç»„ç»´åº¦ä¸ä¸€è‡´<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr = np.squeeze(arr) <span class="comment"># ä»æ•°ç»„çš„å½¢çŠ¶ä¸­åˆ é™¤å•ç»´åº¦æ¡ç›®ï¼Œå³æŠŠshapeä¸­ä¸º1çš„ç»´åº¦å»æ‰</span></span><br><span class="line">y=np.transpose(y,(<span class="number">1</span>,<span class="number">2</span>,<span class="number">0</span>))  <span class="comment"># å°†æ•°ç»„çš„è½´äº¤æ¢ (0, 1, 2) =&gt; (1, 2, 0)</span></span><br></pre></td></tr></table></figure></p><h3 id="çŸ¥è¯†ç‚¹"><a href="#çŸ¥è¯†ç‚¹" class="headerlink" title="çŸ¥è¯†ç‚¹"></a>çŸ¥è¯†ç‚¹</h3><h4 id="æ•°æ®å¤„ç†è¿‡ç¨‹"><a href="#æ•°æ®å¤„ç†è¿‡ç¨‹" class="headerlink" title="æ•°æ®å¤„ç†è¿‡ç¨‹"></a>æ•°æ®å¤„ç†è¿‡ç¨‹</h4><p>å–æœ€å¤§è¿é€šåŸŸ ğŸ‘‡<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">max_connected_domain_3D</span><span class="params">(arr)</span>:</span></span><br><span class="line">    labels = measure.label(arr)  <span class="comment"># &lt;1.2s</span></span><br><span class="line">    t = np.bincount(labels.flatten())[<span class="number">1</span>:]  <span class="comment"># &lt;1.5s</span></span><br><span class="line">    max_pixel = np.argmax(t) + <span class="number">1</span>  <span class="comment"># ä½ç½®å˜äº†,å»é™¤äº†0</span></span><br><span class="line">    labels[labels != max_pixel] = <span class="number">0</span></span><br><span class="line">    labels[labels == max_pixel] = <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> labels.astype(np.uint8)</span><br></pre></td></tr></table></figure></p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> skimage <span class="keyword">import</span> measure</span><br><span class="line"></span><br><span class="line">arr = np.asarray([[<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">3</span>], [<span class="number">1</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">3</span>], [<span class="number">0</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">3</span>], [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>]])</span><br><span class="line"></span><br><span class="line">print(arr)</span><br><span class="line">print(max_connected_domain_3D(arr))</span><br></pre></td></tr></table></figure><p>$$\begin{bmatrix}1 & 1 & 0 & 3\\ 1 & 0 & 3 & 3\\ 0 & 1 & 3 & 3\\0 & 0 & 0 & 0\end{bmatrix}\Rightarrow \begin{bmatrix}0 & 0 & 0 & 1\\ 0 & 0 & 1 & 1\\ 0 & 0 & 1 & 1\\0 & 0 & 0 & 0\end{bmatrix}$$</p><p>å½’ä¸€åŒ– ğŸ‘‡<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">preprocess</span><span class="params">(img)</span>:</span>  </span><br><span class="line">    img = np.clip(img, <span class="number">-150</span>, <span class="number">250</span>)</span><br><span class="line">    min_nrrd_data = np.min(img)</span><br><span class="line">    max_nrrd_data = np.max(img)</span><br><span class="line">    img = (img - min_nrrd_data) / (max_nrrd_data - min_nrrd_data)</span><br><span class="line">    <span class="keyword">return</span> img</span><br></pre></td></tr></table></figure></p><h4 id="æ•°ç»„é˜ˆå€¼å¤„ç†"><a href="#æ•°ç»„é˜ˆå€¼å¤„ç†" class="headerlink" title="æ•°ç»„é˜ˆå€¼å¤„ç†"></a>æ•°ç»„é˜ˆå€¼å¤„ç†</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">img ä¸ºå›¾åƒæ•°ç»„ï¼ŒåŒæ—¶ä¹Ÿæ˜¯numpyæ•°ç»„</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line">img[np.where(img &lt; min)] = min  </span><br><span class="line">img[np.where(img &gt; <span class="number">250</span>)] = max</span><br></pre></td></tr></table></figure><h4 id="ç»˜åˆ¶æ¨¡å‹"><a href="#ç»˜åˆ¶æ¨¡å‹" class="headerlink" title="ç»˜åˆ¶æ¨¡å‹"></a>ç»˜åˆ¶æ¨¡å‹</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span> pip install graphviz</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> keras.utils <span class="keyword">import</span> plot_model</span><br><span class="line"></span><br><span class="line">plot_model(model, <span class="string">"RUnet.png"</span>, <span class="keyword">True</span>)</span><br></pre></td></tr></table></figure><h2 id="Common-Operation"><a href="#Common-Operation" class="headerlink" title="Common Operation"></a>Common Operation</h2><h3 id="GPU"><a href="#GPU" class="headerlink" title="GPU"></a>GPU</h3><h4 id="LinuxæŸ¥çœ‹Nvidiaæ˜¾å¡ä¿¡æ¯åŠä½¿ç”¨æƒ…å†µ"><a href="#LinuxæŸ¥çœ‹Nvidiaæ˜¾å¡ä¿¡æ¯åŠä½¿ç”¨æƒ…å†µ" class="headerlink" title="LinuxæŸ¥çœ‹Nvidiaæ˜¾å¡ä¿¡æ¯åŠä½¿ç”¨æƒ…å†µ"></a><a href="https://blog.csdn.net/dcrmg/article/details/78146797" target="_blank" rel="noopener">LinuxæŸ¥çœ‹Nvidiaæ˜¾å¡ä¿¡æ¯åŠä½¿ç”¨æƒ…å†µ</a></h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span> nvidia-smi</span><br></pre></td></tr></table></figure><p><center><br><img src="/2019/03/13/DeepLiver-model-note/nvidia-smi.png" width="600"><br></center><br>è¡¨å¤´é‡Šä¹‰ ğŸ‘‡<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">- Fanï¼šæ˜¾ç¤ºé£æ‰‡è½¬é€Ÿï¼Œæ•°å€¼åœ¨0åˆ°100%ä¹‹é—´ï¼Œæ˜¯è®¡ç®—æœºçš„æœŸæœ›è½¬é€Ÿï¼Œå¦‚æœè®¡ç®—æœºä¸æ˜¯é€šè¿‡é£æ‰‡å†·å´æˆ–è€…é£æ‰‡åäº†ï¼Œæ˜¾ç¤ºå‡ºæ¥å°±æ˜¯N/Aï¼›Â </span><br><span class="line">- Tempï¼šæ˜¾å¡å†…éƒ¨çš„æ¸©åº¦ï¼Œå•ä½æ˜¯æ‘„æ°åº¦ï¼›</span><br><span class="line">- Perfï¼šè¡¨å¾æ€§èƒ½çŠ¶æ€ï¼Œä»P0åˆ°P12ï¼ŒP0è¡¨ç¤ºæœ€å¤§æ€§èƒ½ï¼ŒP12è¡¨ç¤ºçŠ¶æ€æœ€å°æ€§èƒ½ï¼›</span><br><span class="line">- Pwrï¼šèƒ½è€—è¡¨ç¤ºï¼›Â </span><br><span class="line">- Bus-Idï¼šæ¶‰åŠGPUæ€»çº¿çš„ç›¸å…³ä¿¡æ¯ï¼›Â </span><br><span class="line">- Disp.Aï¼šæ˜¯Display Activeçš„æ„æ€ï¼Œè¡¨ç¤ºGPUçš„æ˜¾ç¤ºæ˜¯å¦åˆå§‹åŒ–ï¼›Â </span><br><span class="line">- Memory Usageï¼šæ˜¾å­˜çš„ä½¿ç”¨ç‡ï¼›Â </span><br><span class="line">- Volatile GPU-Utilï¼šæµ®åŠ¨çš„GPUåˆ©ç”¨ç‡ï¼›</span><br><span class="line">- Compute Mï¼šè®¡ç®—æ¨¡å¼ï¼›</span><br><span class="line"></span><br><span class="line">- Processesæ˜¾ç¤ºæ¯å—GPUä¸Šæ¯ä¸ªè¿›ç¨‹æ‰€ä½¿ç”¨çš„æ˜¾å­˜æƒ…å†µã€‚</span><br></pre></td></tr></table></figure></p><h4 id="åˆ¤æ–­torchæ˜¯å¦å¯ç”¨GPU"><a href="#åˆ¤æ–­torchæ˜¯å¦å¯ç”¨GPU" class="headerlink" title="åˆ¤æ–­torchæ˜¯å¦å¯ç”¨GPU"></a>åˆ¤æ–­torchæ˜¯å¦å¯ç”¨GPU</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Python <span class="number">3.6</span><span class="number">.8</span> |Anaconda, Inc.| (default, Dec <span class="number">30</span> <span class="number">2018</span>, <span class="number">01</span>:<span class="number">22</span>:<span class="number">34</span>)</span><br><span class="line">[GCC <span class="number">7.3</span><span class="number">.0</span>] on linux</span><br><span class="line">Type <span class="string">"help"</span>, <span class="string">"copyright"</span>, <span class="string">"credits"</span> <span class="keyword">or</span> <span class="string">"license"</span> <span class="keyword">for</span> more information.</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> torch</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>torch.cuda.is_available()</span><br><span class="line"><span class="keyword">True</span></span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure><h4 id="å¤šGPUçš„ä½¿ç”¨"><a href="#å¤šGPUçš„ä½¿ç”¨" class="headerlink" title="å¤šGPUçš„ä½¿ç”¨"></a>å¤šGPUçš„ä½¿ç”¨</h4><p>PyTorchæ”¯æŒå¤šGPUè®­ç»ƒæ¨¡å‹ï¼Œå‡è®¾ä½ çš„ç½‘ç»œæ˜¯modelï¼Œé‚£ä¹ˆåªéœ€è¦ä¸‹é¢ä¸€è¡Œä»£ç ï¼ˆè°ƒç”¨ torch.nn.DataParallelæ¥å£ï¼‰å°±å¯ä»¥è®©åç»­çš„æ¨¡å‹è®­ç»ƒåœ¨0å’Œ1ä¸¤å—GPUä¸Šè®­ç»ƒï¼ŒåŠ å¿«è®­ç»ƒé€Ÿåº¦ã€‚<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">model = torch.nn.DataParallel(model, device_ids=[<span class="number">0</span>,<span class="number">1</span>])</span><br></pre></td></tr></table></figure></p><h2 id="ä¼˜ç§€é“¾æ¥"><a href="#ä¼˜ç§€é“¾æ¥" class="headerlink" title="ä¼˜ç§€é“¾æ¥"></a>ä¼˜ç§€é“¾æ¥</h2><p><a href="https://zhuanlan.zhihu.com/p/57958993?utm_source=wechat_session&amp;utm_medium=social&amp;utm_oi=539484443807711232&amp;from=singlemessage&amp;s_r=0" target="_blank" rel="noopener">pytorch + apex ç”Ÿæ´»å˜å¾—æ›´ç¾å¥½</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ã€é˜…è¯»æ—¶é—´ã€‘XXX min XXX words&lt;br&gt;ã€é˜…è¯»å†…å®¹ã€‘â€¦â€¦&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>vtk-Introduction</title>
    <link href="http://yoursite.com/2019/03/08/vtk-Introduction/"/>
    <id>http://yoursite.com/2019/03/08/vtk-Introduction/</id>
    <published>2019-03-08T11:04:27.000Z</published>
    <updated>2019-03-08T16:53:42.927Z</updated>
    
    <content type="html"><![CDATA[<p>ã€é˜…è¯»æ—¶é—´ã€‘XXX min XXX words<br>ã€é˜…è¯»å†…å®¹ã€‘To be continuedâ€¦</p><a id="more"></a><p>å‚è€ƒï¼š<a href="https://lorensen.github.io/VTKExamples/site/Python/" target="_blank" rel="noopener">VTKExamples</a>ã€<a href="https://vtk.org/documentation/" target="_blank" rel="noopener">Userâ€™s Guide</a>ã€<a href="https://www.cnblogs.com/zhhfan/p/10312170.html" target="_blank" rel="noopener">Python vtkå­¦ä¹ </a></p><h2 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pip install vtk</span><br></pre></td></tr></table></figure><h2 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h2><h3 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><center><br><img src="/2019/03/08/vtk-Introduction/vtk_example.png" width="500"><br></center><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> vtk</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç®­å¤´æº</span></span><br><span class="line">arrow_source = vtk.vtkArrowSource()</span><br><span class="line"><span class="comment"># æ˜ å°„å™¨</span></span><br><span class="line">mapper = vtk.vtkPolyDataMapper()</span><br><span class="line"><span class="comment"># æ˜ å°„å™¨æ·»åŠ æ•°æ®æº</span></span><br><span class="line">mapper.SetInputConnection(arrow_source.GetOutputPort())</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¼”å‘˜ï¼ˆæ‰§è¡Œè€…ï¼‰</span></span><br><span class="line">actor = vtk.vtkActor()</span><br><span class="line"><span class="comment"># æ¼”å‘˜æ·»åŠ æ˜ å°„å™¨</span></span><br><span class="line">actor.SetMapper(mapper)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¸²æŸ“å™¨</span></span><br><span class="line">ren = vtk.vtkRenderer()</span><br><span class="line"><span class="comment"># æ¸²æŸ“å™¨æ·»åŠ æ¼”å‘˜</span></span><br><span class="line">ren.AddActor(actor)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»˜åˆ¶çª—å£</span></span><br><span class="line">renWin = vtk.vtkRenderWindow()</span><br><span class="line"><span class="comment"># ç»˜åˆ¶çª—å£æ·»åŠ æ¸²æŸ“å™¨</span></span><br><span class="line">renWin.AddRenderer(ren)</span><br><span class="line"><span class="comment"># çª—å£è¯»å–æ¸²æŸ“å™¨ç”Ÿæˆçš„å›¾å½¢</span></span><br><span class="line">renWin.Render()   </span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºçª—å£äº¤äº’å™¨</span></span><br><span class="line">iren = vtk.vtkRenderWindowInteractor()</span><br><span class="line">iren.SetRenderWindow(renWin)</span><br><span class="line">iren.Initialize()</span><br><span class="line">iren.Start()</span><br></pre></td></tr></table></figure><h3 id="æ–‡ä»¶è¯»å–"><a href="#æ–‡ä»¶è¯»å–" class="headerlink" title="æ–‡ä»¶è¯»å–"></a>æ–‡ä»¶è¯»å–</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">read_data</span><span class="params">(file_name)</span>:</span></span><br><span class="line">    reader = vtk.vtkSTLReader()  <span class="comment"># è¯»å–STLæ–‡ä»¶</span></span><br><span class="line">    reader.SetFileName(file_name)</span><br><span class="line">    <span class="keyword">return</span> reader</span><br></pre></td></tr></table></figure><table><thead><tr><th style="text-align:center">æ–‡ä»¶ç±»å‹</th><th style="text-align:center">è¯»å–æ–¹æ³•</th></tr></thead><tbody><tr><td style="text-align:center">STL</td><td style="text-align:center">vtkSTLReader()</td></tr><tr><td style="text-align:center">SLC</td><td style="text-align:center">vtkSLCReader()</td></tr><tr><td style="text-align:center">VTP</td><td style="text-align:center">vtkXMLPolyDataReader()</td></tr><tr><td style="text-align:center">UnstructuredGrid</td><td style="text-align:center">vtkNamedColors()</td></tr><tr><td style="text-align:center">ExodusData</td><td style="text-align:center">vtkExodusIIReader()</td></tr></tbody></table><h3 id="å›¾åƒæ—‹è½¬"><a href="#å›¾åƒæ—‹è½¬" class="headerlink" title="å›¾åƒæ—‹è½¬"></a>å›¾åƒæ—‹è½¬</h3><p>transform.RotateWXYZ(90, 0, 0, 1) ğŸ‘‡ æ¨ªç½®â†’ç«–ç½®</p><center><br><img src="/2019/03/08/vtk-Introduction/transform.RotateWXYZ(90, 0, 0, 1).png" width="500"><br></center><p>transform.RotateWXYZ(90, 1, 0, 1) ğŸ‘‡ æ­£æ–¹å½¢å¯¹è§’çº¿</p><center><br><img src="/2019/03/08/vtk-Introduction/transform.RotateWXYZ(90, 1, 0, 1).png" width="500"><br></center><p>transform.RotateWXYZ(90, 1, 1, 1) ğŸ‘‡ ç«‹æ–¹ä½“å¯¹è§’çº¿ </p><center><br><img src="/2019/03/08/vtk-Introduction/transform.RotateWXYZ(90, 1, 1, 1).png" width="500"><br></center><p>ä»£ç è¯¦æƒ… ğŸ‘‡</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> vtk</span><br><span class="line"></span><br><span class="line">arrow_source = vtk.vtkArrowSource()</span><br><span class="line">mapper = vtk.vtkPolyDataMapper()</span><br><span class="line"></span><br><span class="line"><span class="comment"># transform</span></span><br><span class="line">transform = vtk.vtkTransform()</span><br><span class="line"><span class="comment"># transform.RotateWXYZ(angle, x, y, z)  # x,y,zæ—‹è½¬(0,1)è¡¨ç¤ºæ˜¯å¦æ—‹è½¬</span></span><br><span class="line">transform.RotateWXYZ(<span class="number">90</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>) <span class="comment"># (90, 1, 0, 1) / (90, 1, 1, 1)  </span></span><br><span class="line">transformFilter = vtk.vtkTransformPolyDataFilter()</span><br><span class="line">transformFilter.SetTransform(transform)</span><br><span class="line">transformFilter.SetInputConnection(arrow_source.GetOutputPort())</span><br><span class="line">transformFilter.Update()</span><br><span class="line">mapper.SetInputConnection(transformFilter.GetOutputPort())</span><br><span class="line"></span><br><span class="line">actor = vtk.vtkActor()</span><br><span class="line">actor.SetMapper(mapper)</span><br><span class="line">ren = vtk.vtkRenderer()</span><br><span class="line">ren.AddActor(actor)</span><br><span class="line">renWin = vtk.vtkRenderWindow()</span><br><span class="line">renWin.AddRenderer(ren)</span><br><span class="line">renWin.Render()</span><br><span class="line">iren = vtk.vtkRenderWindowInteractor()</span><br><span class="line">iren.SetRenderWindow(renWin)</span><br><span class="line">iren.Initialize()</span><br><span class="line">renWin.Render()</span><br><span class="line">iren.Start()</span><br></pre></td></tr></table></figure><ul><li>ç¼©æ”¾</li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">set_scale</span><span class="params">(x, y, z)</span>:</span></span><br><span class="line">    actor.SetScale(x, y, z)</span><br></pre></td></tr></table></figure><ul><li>å¹³ç§»</li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add_position</span><span class="params">(x, y, z)</span>:</span></span><br><span class="line">    actor.AddPosition(x, y, z)</span><br></pre></td></tr></table></figure><h3 id="å¹³é¢åˆ‡å‰²"><a href="#å¹³é¢åˆ‡å‰²" class="headerlink" title="å¹³é¢åˆ‡å‰²"></a>å¹³é¢åˆ‡å‰²</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">cut</span><span class="params">(file_name)</span>:</span></span><br><span class="line">    reader = read_data(file_name)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å®šä¹‰åˆ‡å‰²å¹³é¢</span></span><br><span class="line">    clipPlane = vtk.vtkPlane()</span><br><span class="line">    clipPlane.SetNormal(<span class="number">1.0</span>, <span class="number">-1.0</span>, <span class="number">-1.0</span>)</span><br><span class="line">    clipPlane.SetOrigin(<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¹³é¢åˆ‡å‰²ä¸‰ç»´æ•°æ®</span></span><br><span class="line">    clipper = vtk.vtkClipPolyData()</span><br><span class="line">    clipper.SetInputConnection(reader.GetOutputPort())</span><br><span class="line">    clipper.SetClipFunction(clipPlane)</span><br><span class="line">    clipper.InsideOutOn()  <span class="comment"># ?</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># å®šä¹‰mapperå’Œactor</span></span><br><span class="line">    superMapper = vtk.vtkPolyDataMapper()</span><br><span class="line">    superMapper.SetInputConnection(clipper.GetOutputPort())</span><br><span class="line">    superActor = vtk.vtkActor()</span><br><span class="line">    <span class="comment"># è®¾ç½®åè½¬è§’åº¦</span></span><br><span class="line">    set_origin(superActor, <span class="number">-50</span>, <span class="number">-75</span>, <span class="number">120</span>)</span><br><span class="line">    superActor.SetMapper(superMapper)</span><br><span class="line">    superActor.GetProperty().SetColor(colors.GetColor3d(<span class="string">"Cyan"</span>))</span><br><span class="line">    only_show(superActor)</span><br></pre></td></tr></table></figure><ul><li>è®¾ç½®æ¼”å‘˜åˆå§‹æ–¹å‘</li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">set_origin</span><span class="params">(actor, x, y, z)</span>:</span></span><br><span class="line">    actor.SetOrientation(x, y, z)</span><br></pre></td></tr></table></figure><h3 id="é¼ æ ‡äº‹ä»¶ç›‘å¬"><a href="#é¼ æ ‡äº‹ä»¶ç›‘å¬" class="headerlink" title="é¼ æ ‡äº‹ä»¶ç›‘å¬"></a>é¼ æ ‡äº‹ä»¶ç›‘å¬</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç›‘å¬äº‹ä»¶</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyEvent</span><span class="params">(vtk.vtkInteractorStyleTrackballCamera)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, parent=None)</span>:</span></span><br><span class="line">        self.AddObserver(<span class="string">"MiddleButtonPressEvent"</span>, self.middle_button_press_event)</span><br><span class="line">        self.AddObserver(<span class="string">"MiddleButtonReleaseEvent"</span>, self.middle_button_release_event)</span><br><span class="line">        self.AddObserver(<span class="string">"LeftButtonPressEvent"</span>, self.left_button_press_event)</span><br><span class="line">        self.AddObserver(<span class="string">"LeftButtonReleaseEvent"</span>, self.left_button_release_event)</span><br><span class="line">        self.AddObserver(<span class="string">"RightButtonPressEvent"</span>, self.right_button_press_event)</span><br><span class="line">        self.AddObserver(<span class="string">"RightButtonReleaseEvent"</span>, self.right_button_release_event)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">middle_button_press_event</span><span class="params">(self, obj, event)</span>:</span></span><br><span class="line">        print(<span class="string">"Middle Button pressed"</span>)</span><br><span class="line">        self.OnMiddleButtonDown()</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">middle_button_release_event</span><span class="params">(self, obj, event)</span>:</span></span><br><span class="line">        print(<span class="string">"Middle Button released"</span>)</span><br><span class="line">        self.OnMiddleButtonUp()</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">left_button_press_event</span><span class="params">(self, obj, event)</span>:</span></span><br><span class="line">        print(<span class="string">"Left Button pressed"</span>)</span><br><span class="line">        self.OnLeftButtonDown()</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">left_button_release_event</span><span class="params">(self, obj, event)</span>:</span></span><br><span class="line">        print(<span class="string">"Left Button released"</span>)</span><br><span class="line">        self.OnLeftButtonUp()</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">right_button_press_event</span><span class="params">(self, obj, event)</span>:</span></span><br><span class="line">        print(<span class="string">"right Button pressed"</span>)</span><br><span class="line">        self.OnRightButtonDown()</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">right_button_release_event</span><span class="params">(self, obj, event)</span>:</span></span><br><span class="line">        print(<span class="string">"right Button released"</span>)</span><br><span class="line">        self.OnLeftButtonUp()</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼•å…¥ä¸Šä¸€æ®µä»£ç è°ƒç”¨</span></span><br><span class="line">iren.SetInteractorStyle(MyEvent())</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ã€é˜…è¯»æ—¶é—´ã€‘XXX min XXX words&lt;br&gt;ã€é˜…è¯»å†…å®¹ã€‘To be continuedâ€¦&lt;/p&gt;
    
    </summary>
    
      <category term="Python" scheme="http://yoursite.com/categories/Python/"/>
    
    
      <category term="vtk" scheme="http://yoursite.com/tags/vtk/"/>
    
  </entry>
  
  <entry>
    <title>PyQt5_2_exe/app</title>
    <link href="http://yoursite.com/2019/03/04/PyQt5-2-exe/"/>
    <id>http://yoursite.com/2019/03/04/PyQt5-2-exe/</id>
    <published>2019-03-03T17:00:09.000Z</published>
    <updated>2019-03-04T07:33:36.281Z</updated>
    
    <content type="html"><![CDATA[<p>ã€é˜…è¯»æ—¶é—´ã€‘XXX min XXX words<br>ã€é˜…è¯»å†…å®¹ã€‘Not Completed</p><a id="more"></a><h2 id="PyQt5æ‰“åŒ…ç¨‹åºä¸ºå¯æ‰§è¡Œæ–‡ä»¶"><a href="#PyQt5æ‰“åŒ…ç¨‹åºä¸ºå¯æ‰§è¡Œæ–‡ä»¶" class="headerlink" title="PyQt5æ‰“åŒ…ç¨‹åºä¸ºå¯æ‰§è¡Œæ–‡ä»¶"></a>PyQt5æ‰“åŒ…ç¨‹åºä¸ºå¯æ‰§è¡Œæ–‡ä»¶</h2><ol><li><p><code>$ pyinstaller -Fw window.py</code></p><ul><li><p>Requirementsï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> pip install -U pip setuptools / pip install --upgrade setuptools</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> pip install tornado</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> pip install IPython</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> pip install ipykernel</span></span><br><span class="line"></span><br><span class="line"><span class="meta"> #</span><span class="bash"> No module named <span class="string">'wx'</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> pip install -U  -f https://extras.wxpython.org/wxPython4/extras/linux/gtk3/ubuntu-16.04 \ wxPython </span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> cairo backend requires that cairocffi or pycairo is installed</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> pip install cairocffi</span></span><br></pre></td></tr></table></figure></li><li><p>Some INFO</p><pre><code class="powershell"><span class="number">117</span> INFO: UPX is not available.<span class="number">38433</span> INFO:   Matplotlib backend <span class="string">"MacOSX"</span>: ignoredPython is not installed as a framework. The Mac OS X backend will not be able to <span class="keyword">function</span> correctly <span class="keyword">if</span> Python is not installed as a framework. See the Python documentation <span class="keyword">for</span> more information on installing Python as a framework on Mac OS X. Please either reinstall Python as a framework, or <span class="keyword">try</span> one of the other backends. <span class="keyword">If</span> you are using (Ana)Conda please install python.app and replace the use of <span class="string">'python'</span> with <span class="string">'pythonw'</span>. See <span class="string">'Working with Matplotlib on OSX'</span> <span class="keyword">in</span> the Matplotlib FAQ <span class="keyword">for</span> more information.<span class="number">51301</span> WARNING: library user32 required via ctypes not found<span class="number">53437</span> INFO: Warnings written to /Users/Captain/Desktop/client/build/window/warn-window.txt</code></pre></li><li>Outputï¼š<code>./build</code>ã€ <code>./dist</code>ã€ <code>./window.spec</code></li></ul></li><li><code>$ pyinstaller window.spec</code><ul><li>Outputï¼š<code>window.app</code> / <code>window.exe</code>    </li></ul></li><li>å°†ä¸ç¨‹åºå…³è”çš„ä»£ç ï¼ˆå½“å‰æ–‡ä»¶å¤¹ä¸­é™¤./buildå’Œ./distå¤–çš„æ‰€æœ‰æ–‡ä»¶ï¼‰å‡copyè‡³<code>./dist</code>ï¼Œå³å¯</li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ã€é˜…è¯»æ—¶é—´ã€‘XXX min XXX words&lt;br&gt;ã€é˜…è¯»å†…å®¹ã€‘Not Completed&lt;/p&gt;
    
    </summary>
    
    
      <category term="PyQt5" scheme="http://yoursite.com/tags/PyQt5/"/>
    
  </entry>
  
  <entry>
    <title>PyTorch_å¯è§†åŒ–ä¹‹TensorboardX</title>
    <link href="http://yoursite.com/2019/03/03/PyTorch-%E5%8F%AF%E8%A7%86%E5%8C%96%E4%B9%8BTensorboardX/"/>
    <id>http://yoursite.com/2019/03/03/PyTorch-å¯è§†åŒ–ä¹‹TensorboardX/</id>
    <published>2019-03-03T04:33:11.000Z</published>
    <updated>2019-03-03T06:36:49.416Z</updated>
    
    <content type="html"><![CDATA[<p>ã€é˜…è¯»æ—¶é—´ã€‘XXX min XXX words<br>ã€é˜…è¯»å†…å®¹ã€‘â€¦â€¦</p><a id="more"></a><h2 id="Tensorboard"><a href="#Tensorboard" class="headerlink" title="Tensorboard"></a>Tensorboard</h2><p>é“¾æ¥ï¼š<a href="https://morvanzhou.github.io/tutorials/machine-learning/tensorflow/4-1-tensorboard1/" target="_blank" rel="noopener">https://morvanzhou.github.io/tutorials/machine-learning/tensorflow/4-1-tensorboard1/</a></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">(tensorflow) âœ  Morvan_Tensorflow tensorboard --logdir logs</span><br><span class="line">TensorBoard 1.11.0 at http://MacBook-Pro:6006 (Press CTRL+C to quit)</span><br></pre></td></tr></table></figure><ul><li>Chrome</li></ul><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">http://0.0.0.0:6006</span><br></pre></td></tr></table></figure><h2 id="TensorboardX"><a href="#TensorboardX" class="headerlink" title="TensorboardX"></a>TensorboardX</h2><p>è¯¦ç»†å†…å®¹ï¼Œè®¿é—®æ–‡æ¡£ï¼š<a href="https://tensorboardx.readthedocs.io/en/latest/index.html" target="_blank" rel="noopener">https://tensorboardx.readthedocs.io/en/latest/index.html</a><br>æºä»£ç ï¼š<a href="https://github.com/lanpa/tensorboardX" target="_blank" rel="noopener">https://github.com/lanpa/tensorboardX</a><br>å‚è€ƒï¼š<a href="https://www.pytorchtutorial.com/pytorch-tensorboardx/" target="_blank" rel="noopener">https://www.pytorchtutorial.com/pytorch-tensorboardx/</a></p><h3 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pip install tensorboardX</span><br></pre></td></tr></table></figure><h3 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#-*-coding:utf-8-*-</span></span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torchvision</span><br><span class="line"><span class="keyword">from</span> torch.autograd <span class="keyword">import</span> Variable</span><br><span class="line"><span class="keyword">from</span> tensorboardX <span class="keyword">import</span> SummaryWriter</span><br><span class="line"> </span><br><span class="line"><span class="comment"># æ¨¡æ‹Ÿè¾“å…¥æ•°æ®</span></span><br><span class="line">input_data = Variable(torch.rand(<span class="number">16</span>, <span class="number">3</span>, <span class="number">224</span>, <span class="number">224</span>))</span><br><span class="line"> </span><br><span class="line"><span class="comment"># ä»torchvisionä¸­å¯¼å…¥å·²æœ‰æ¨¡å‹</span></span><br><span class="line">model = torchvision.models.resnet18()</span><br><span class="line"><span class="comment"># print(model)</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># å£°æ˜writerå¯¹è±¡ï¼Œä¿å­˜çš„æ–‡ä»¶å¤¹ï¼Œå¼‚å·±åç§°</span></span><br><span class="line">writer = SummaryWriter(log_dir=\<span class="string">'./log\', comment=\'resnet18\')</span></span><br><span class="line"><span class="string">with writer:   # necessary</span></span><br><span class="line"><span class="string">    writer.add_graph(model, (input_data,))</span></span><br></pre></td></tr></table></figure><h3 id="View"><a href="#View" class="headerlink" title="View"></a>View</h3><p>åœ¨å¯¹åº”è·¯å¾„ä¸‹è¿è¡Œtensorboard<br><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">(pytorch) âœ  Desktop  tensorboard --logdir log</span><br><span class="line">TensorBoard 1.12.0 at http://MacBook-Pro:6006 (Press CTRL+C to quit)</span><br></pre></td></tr></table></figure></p><h2 id="PyTorch-å¯è§†åŒ–å·¥å…·-Visdom-ä»‹ç»"><a href="#PyTorch-å¯è§†åŒ–å·¥å…·-Visdom-ä»‹ç»" class="headerlink" title="PyTorch å¯è§†åŒ–å·¥å…· Visdom ä»‹ç»"></a>PyTorch å¯è§†åŒ–å·¥å…· Visdom ä»‹ç»</h2><p>å¯å‚è€ƒ <a href="https://captainzj.github.io/2018/12/31/visdom-Tutorial/" target="_blank" rel="noopener">https://captainzj.github.io/2018/12/31/visdom-Tutorial/</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ã€é˜…è¯»æ—¶é—´ã€‘XXX min XXX words&lt;br&gt;ã€é˜…è¯»å†…å®¹ã€‘â€¦â€¦&lt;/p&gt;
    
    </summary>
    
      <category term="PyTorch" scheme="http://yoursite.com/categories/PyTorch/"/>
    
    
  </entry>
  
  <entry>
    <title>NiftyNet-Process</title>
    <link href="http://yoursite.com/2019/03/02/NiftyNet-Process/"/>
    <id>http://yoursite.com/2019/03/02/NiftyNet-Process/</id>
    <published>2019-03-02T08:04:58.000Z</published>
    <updated>2019-03-02T09:06:38.097Z</updated>
    
    <content type="html"><![CDATA[<p>ã€é˜…è¯»æ—¶é—´ã€‘XXX min XXX words<br>ã€é˜…è¯»å†…å®¹ã€‘<br><a id="more"></a></p><h2 id="æ•°æ®é¢„å¤„ç†"><a href="#æ•°æ®é¢„å¤„ç†" class="headerlink" title="æ•°æ®é¢„å¤„ç†"></a><a href="https://www.cnblogs.com/zhhfan/p/10424489.html" target="_blank" rel="noopener">æ•°æ®é¢„å¤„ç†</a></h2><h3 id="ç”Ÿæˆ-csvæ–‡ä»¶"><a href="#ç”Ÿæˆ-csvæ–‡ä»¶" class="headerlink" title="ç”Ÿæˆ.csvæ–‡ä»¶"></a>ç”Ÿæˆ.csvæ–‡ä»¶</h3><table><thead><tr><th style="text-align:center"></th><th style="text-align:center">image</th><th style="text-align:center">path</th></tr></thead><tbody><tr><td style="text-align:center">img.csv</td><td style="text-align:center">img_name</td><td style="text-align:center">img_path</td></tr><tr><td style="text-align:center">label.csv</td><td style="text-align:center">img_label</td><td style="text-align:center">img_path</td></tr></tbody></table><ul><li>äºŒåˆ†ç±»çš„ç”Ÿæˆè¯¥æ–‡ä»¶çš„demo</li></ul><blockquote><p>å‡†å¤‡å·¥ä½œï¼šå°†ä¸¤ä¸ªç±»åˆ«çš„å›¾ç‰‡åˆ†åˆ«å­˜å‚¨åœ¨ä¸¤ä¸ªæ–‡ä»¶å¤¹ä¸­ã€‚</p></blockquote><p>ä¸‹è¿°ä»£ç ä¸­å°†åˆ†ç±»çš„å›¾ç‰‡åˆ†åˆ«å­˜å‚¨äº<code>./DogsVSCats/train/cat</code> å’Œ <code>./DogsVSCats/train/dog</code><br>æ³¨: DogsVSCats datasets å¯åœ¨<a href="https://www.kaggle.com/c/dogs-vs-cats/data" target="_blank" rel="noopener">æ­¤å¤„</a>ä¸‹è½½</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">dir_path = <span class="string">'./DogsVSCats/train'</span></span><br><span class="line">dir_names = os.listdir(dir_path)   <span class="comment"># ['cat', 'dog']</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”Ÿæˆ img.csv</span></span><br><span class="line">list_img, list_path = [], []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> dir_name <span class="keyword">in</span> dir_names:</span><br><span class="line"></span><br><span class="line">    img_path = dir_path + <span class="string">"/"</span> + dir_name</span><br><span class="line">    img_name = os.listdir(img_path)  </span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> _, item <span class="keyword">in</span> enumerate(img_name):</span><br><span class="line">        list_img.append(item)</span><br><span class="line">        list_path.append(img_path + <span class="string">"/"</span> + item)</span><br><span class="line">        </span><br><span class="line">data_frame = pd.DataFrame(&#123;<span class="string">'image'</span>: list_img, <span class="string">'path'</span>: list_path&#125;)</span><br><span class="line">data_frame.to_csv(<span class="string">'./img_path.csv'</span>, index=<span class="keyword">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”Ÿæˆlabel.csv</span></span><br><span class="line">list_label_name, list_label_path = [], []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> dir_name <span class="keyword">in</span> dir_names:</span><br><span class="line"></span><br><span class="line">    label_path = dir_path + <span class="string">"/"</span> + dir_name</span><br><span class="line">    label_name = os.listdir(label_path)  </span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> _, elem <span class="keyword">in</span> enumerate(label_name):</span><br><span class="line">        list_label_name.append(elem[<span class="number">0</span>:<span class="number">3</span>])  <span class="comment"># elem[0:3] : cat / dog</span></span><br><span class="line">        list_label_path.append(label_path + <span class="string">"/"</span> + elem)</span><br><span class="line"></span><br><span class="line">label_dataframe = pd.DataFrame(&#123;<span class="string">'label'</span>: list_label_name, <span class="string">'path'</span>: list_label_path&#125;)</span><br><span class="line">label_dataframe.to_csv(<span class="string">'./label.csv'</span>, index=<span class="keyword">False</span>)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ã€é˜…è¯»æ—¶é—´ã€‘XXX min XXX words&lt;br&gt;ã€é˜…è¯»å†…å®¹ã€‘&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="åŒ»ç–—å›¾åƒ" scheme="http://yoursite.com/categories/%E5%8C%BB%E7%96%97%E5%9B%BE%E5%83%8F/"/>
    
    
      <category term="NiftyNet" scheme="http://yoursite.com/tags/NiftyNet/"/>
    
  </entry>
  
  <entry>
    <title>NiftyNet-Configuration-file</title>
    <link href="http://yoursite.com/2019/03/02/NiftyNet-Configuration-file/"/>
    <id>http://yoursite.com/2019/03/02/NiftyNet-Configuration-file/</id>
    <published>2019-03-02T07:59:58.000Z</published>
    <updated>2019-03-02T13:06:58.664Z</updated>
    
    <content type="html"><![CDATA[<p>ã€é˜…è¯»æ—¶é—´ã€‘XXX min XXX words<br>ã€é˜…è¯»å†…å®¹ã€‘<a href="https://www.cnblogs.com/zhhfan/p/9806900.html" target="_blank" rel="noopener">NiftyNetå¼€æºå¹³å°çš„ä½¿ç”¨ â€“ é…ç½®æ–‡ä»¶</a></p><a id="more"></a><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://niftynet.readthedocs.io/en/latest/config_spec.html" target="_blank" rel="noopener">https://niftynet.readthedocs.io/en/latest/config_spec.html</a></p><h3 id="è¿è¡ŒNiftyNetå·¥ä½œæµ"><a href="#è¿è¡ŒNiftyNetå·¥ä½œæµ" class="headerlink" title="è¿è¡ŒNiftyNetå·¥ä½œæµ"></a>è¿è¡ŒNiftyNetå·¥ä½œæµ</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">python net_run.py [train|inference|evaluation] -c &lt;path_to/config.ini&gt; -a &lt;application&gt;</span><br><span class="line"><span class="meta">#</span><span class="bash"> net_runå‘½ä»¤ä¹Ÿæ”¯æŒå‘½ä»¤è¡Œå‚æ•°ï¼Œä»¥`--&lt;name&gt; &lt;value&gt;`æˆ–`--&lt;name&gt;=&lt;value&gt;`çš„å½¢å¼è¡¨ç¤ºã€‚è¾“å…¥çš„å‚æ•°å°†å–ä»£ç³»ç»Ÿé»˜è®¤çš„å’Œé…ç½®æ–‡ä»¶ä¸­çš„å‚æ•°ã€‚</span></span><br></pre></td></tr></table></figure><ul><li><code>[train|inference|evaluation]</code><ul><li>trainï¼šä½¿ç”¨æä¾›çš„æ•°æ® æ›´æ–° å·²å­˜åœ¨çš„ç½‘ç»œæ¨¡å‹</li><li>inferenceï¼šæ ¹æ®æä¾›çš„æ•°æ®ç”Ÿæˆå“åº”ï¼ˆåŠ è½½å·²å­˜åœ¨çš„ç½‘ç»œæ¨¡å‹ï¼‰</li><li>evaluationï¼šï¼Ÿï¼Ÿ</li></ul></li><li><code>-c &lt;path_to/config.ini&gt;</code>ï¼šæŒ‡å®šé…ç½®æ–‡ä»¶è·¯å¾„</li><li><code>-a &lt;application&gt;</code>ï¼šæŒ‡å®šåº”ç”¨ç§ç±»ï¼ˆå¸¸è§ç§ç±»å¦‚ä¸‹è¡¨ğŸ‘‡ï¼‰</li></ul><table><thead><tr><th style="text-align:left">applicationå‚æ•°</th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left">å›¾åƒåˆ†å‰² <small> [SEGMENTATION] </small></td><td style="text-align:left"><code>net_segment -c ...</code></td></tr><tr><td style="text-align:left">å›¾åƒå›å½’ <small> [REGRESSION] </small></td><td style="text-align:left"><code>net_regress -c ...</code></td></tr><tr><td style="text-align:left">è‡ªåŠ¨ç¼–ç  <small> [AUTOENCODER] </small></td><td style="text-align:left"><code>net_autoencoder -c ...</code></td></tr><tr><td style="text-align:left">ç”Ÿæˆå¯¹æŠ—ç½‘ç»œ <small> [GAN] </small></td><td style="text-align:left"><code>net_gan -c ...</code></td></tr></tbody></table><h3 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h3><p>æ¯ä¸ªç½‘ç»œæƒ³è¦è¿è¡Œ<strong>å¿…é¡»</strong>åŒ…å«ä¸€ä¸ª<code>config.ini</code>é…ç½®æ–‡ä»¶ï¼Œç”¨æ¥è®¾ç½®è®­ç»ƒ/æµ‹è¯•æ‰€ç”¨çš„å…¨éƒ¨å‚æ•°ã€‚</p><h4 id="Configuration-File-Structure"><a href="#Configuration-File-Structure" class="headerlink" title="Configuration-File-Structure"></a>Configuration-File-Structure</h4><p>æ¯ä¸ªé…ç½®æ–‡ä»¶ä¸­åŒ…å«çš„sections: </p><ul><li>[SYSTEM]  </li><li>[NETWORK]  </li><li>[APPLICATION] ï¼ˆcustomğŸ‘‡ï¼‰<ul><li><code>[GAN]</code> â€“ ç”Ÿæˆå¯¹æŠ—ç½‘ç»œ  </li><li><code>[SEGMENTATION]</code> â€“ åˆ†å‰²ç½‘ç»œ  </li><li><code>[REGRESSION]</code> â€“ å›å½’ç½‘ç»œ  </li><li><code>[AUTOENCODER]</code> â€“ è‡ªåŠ¨ç¼–ç ç½‘ç»œ </li></ul></li><li>[TRAINING]   ï¼ˆå¯é€‰â€”when need trainï¼‰</li><li>[INFERENCE]   ï¼ˆå¯é€‰â€”when need inferenceï¼‰</li></ul><h4 id="Section-Arguments"><a href="#Section-Arguments" class="headerlink" title="Section_Arguments"></a>Section_Arguments</h4><h5 id="Input-data-source"><a href="#Input-data-source" class="headerlink" title="[Input data source]"></a>[Input data source]</h5><p><small></small></p><ul><li>csv_file:  è¾“å…¥å›¾åƒè·¯å¾„  </li><li>path_to_search: æœç´¢å›¾åƒçš„å•ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ï¼Œå¦‚æœæœ‰å¤šä¸ªç”¨é€—å·åˆ†å¼€  </li><li>filename_contains:  åŒ¹é…æ–‡ä»¶åçš„å…³é”®è¯  </li><li>filename_not_contains:  æ’é™¤æ–‡ä»¶åçš„å…³é”®è¯  </li><li>filename_removefromid:  ä»æ–‡ä»¶å‘½ä¸­æŠ½å–ä¸»é¢˜idçš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œè¢«åŒ¹é…çš„æ¨¡å¼å°†ä»æ–‡ä»¶åä¸­ç§»é™¤å¹¶ç”Ÿæˆä¸»é¢˜idã€‚  </li><li>interp_order:  æ’å€¼æ³•ï¼Œå½“è®¾å®šé‡‡æ ·æ–¹æ³•ä¸ºresizeæ—¶ï¼Œéœ€è¦è¯¥å‚æ•°å¯¹å›¾ç‰‡è¿›è¡Œä¸Šé‡‡æ ·æˆ–ä¸‹é‡‡æ ·ï¼Œ0è¡¨ç¤ºæœ€è¿‘æ’å€¼ï¼Œ1è¡¨ç¤ºåŒçº¿æ€§æ’å€¼ï¼Œ3è¡¨ç¤ºä¸‰æ¬¡æ ·æ¡æ’å€¼ï¼Œé»˜è®¤ä¸º3  </li><li>pixdimï¼š  å¦‚æœè¢«æŒ‡å®šï¼Œè¾“å…¥volumåœ¨è¢«å–‚ç»™ç½‘ç»œä¹‹å‰å°†è¢«é‡é‡‡æ ·æˆvoxelå°ºå¯¸  </li><li>axcodesï¼š  å¦‚æœè¢«æŒ‡å®šï¼Œè¾“å…¥volumåœ¨è¢«å–‚ç»™ç½‘ç»œä¹‹å‰å°†è¢«è°ƒæ•´ä¸ºåæ ‡ç (axes code)  </li><li>spatial_window_size:  è¾“å…¥åˆ°ç½‘ç»œä¸­çš„å›¾ç‰‡å°ºå¯¸ï¼Œéœ€æŒ‡æ˜ä¸‰ä¸ªç»´åº¦ï¼Œç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªåˆ†åˆ«è¡¨ç¤ºå›¾ç‰‡çš„é•¿å’Œå®½ï¼Œç¬¬ä¸‰ä¸ªå¦‚æœä¸º1è¡¨ç¤ºä½¿ç”¨2då·ç§¯ï¼Œå¦åˆ™ä½¿ç”¨3då·ç§¯  </li><li>loaderï¼š  å›¾ç‰‡è¯»å–å™¨ï¼Œé»˜è®¤å€¼Noneå°†å°è¯•æ‰€æœ‰å¯å¾—åˆ°çš„è¯»å–å™¨<br>ã€€ã€€è¯»å–å™¨æ”¯æŒçš„ç±»å‹æœ‰ï¼š<br>ã€€ã€€nibabel  æ”¯æŒ.niiåŒ»å­¦æ–‡ä»¶æ ¼å¼<br>ã€€ã€€simpleitk  æ”¯æŒ.dcmå’Œ.mhdæ ¼å¼çš„åŒ»ç–—å›¾åƒ<br>ã€€ã€€opencv  æ”¯æŒ.jpgç­‰å¸¸è§å›¾åƒï¼Œè¯»å–åé€šé“é¡ºåºä¸ºBGR<br>ã€€ã€€skimage  æ”¯æŒ.jpgç­‰å¸¸è§å›¾åƒ<br>ã€€ã€€pillow  æ”¯æŒ.jpgç­‰å¸¸è§å›¾åƒï¼Œè¯»å–åé€šé“é¡ºåºä¸ºRGB<br></li></ul><p>ã€€ã€€</p><h5 id="System"><a href="#System" class="headerlink" title="[System]"></a>[System]</h5><p><small></small></p><ul><li>cuda_devices:  è®¾ç½®tensorflowçš„CUDA_VISIBLE_DEVICESå˜é‡  </li><li>num_threads:  è®¾ç½®è®­ç»ƒçš„é¢„å¤„ç†çº¿ç¨‹æ•°  </li><li>num_gpus:  è®¾ç½®è®­ç»ƒçš„GPUçš„æ•°é‡  </li><li>model_dir:  è®­ç»ƒæ¨¡å‹çš„ä¿å­˜å’ŒåŠ è½½è·¯å¾„  </li><li>dataset_split_file:  æ–‡ä»¶åˆ†é…ç§‘ç›®åˆ°å­é›†  </li><li>event_handler:  äº‹ä»¶å¤„ç†å™¨<br></li></ul><h5 id="NETWORK"><a href="#NETWORK" class="headerlink" title="[NETWORK]"></a>[NETWORK]</h5><p><small></small></p><ul><li>name:  niftynet/networkä¸­çš„ç½‘ç»œç±»æˆ–ç”¨æˆ·è‡ªå®šä¹‰çš„æ¨¡å—  </li><li>activation_function:  ç½‘ç»œçš„æ¿€æ´»å‡½æ•°é›†åˆ  </li><li>batch_size:  è®¾ç½®æ¯æ¬¡è¿­ä»£å›¾åƒçª—å£çš„æ•°é‡  </li><li>smaller_final_batch_mode:  å½“batch_sizeçš„çª—å£é‡‡æ ·å™¨æ€»æ•°æ˜¯ä¸å¯è§çš„æ—¶æ”¯æŒæœ€åçš„batchä½¿ç”¨ä¸åŒçš„æ¨¡å¼<br>ã€€ã€€å¯é€‰ç±»å‹æœ‰ï¼š<br>ã€€ã€€drop:  ç»ˆæ­¢å‰©ä½™çš„batch<br>ã€€ã€€pad: ç”¨-1å¡«è¡¥æœ€åæ›´å°çš„batch<br>ã€€ã€€dynamic: ç›´æ¥è¾“å‡ºå‰©ä½™çš„batch </li><li>reg_type:  å¯è®­ç»ƒçš„æ­£è§„åŒ–å‚æ•°çš„ç±»å‹  </li><li>decay:  æ­£è§„åŒ–çš„å¼ºåº¦ï¼Œç”¨äºé¢„é˜²è¿‡æ‹Ÿåˆ  </li><li>volume_padding_size:  å›¾ç‰‡çš„å¡«è¡¥å€¼  </li><li>window_sampling:  è¿›å…¥ç½‘ç»œçš„å›¾ç‰‡çš„é‡‡æ ·æ–¹æ³•<br>ã€€ã€€uniform:  è¾“å‡ºçš„å›¾ç‰‡ä¿æŒåŸæœ¬å¤§å°<br>ã€€ã€€weighted:  å¯¹æˆæ¯”ä¾‹çš„voxelçš„é‡‡æ ·åˆ°ç´¯ç§¯ç›´æ–¹å›¾çš„ä¼¼ç„¶<br>ã€€ã€€balanced:  æ¯ä¸ªæ ‡ç­¾éƒ½è¢«é‡‡æ ·çš„å¯èƒ½æ€§åŒæ ·<br>ã€€ã€€resize:  å°†è¿›å…¥ç½‘ç»œçš„å›¾ç‰‡é¦–å…ˆresizeåˆ°spatial_window_size </li><li>queue_length:  NiftyNetä¼šè®¾ç½®ä¸¤ä¸ªé˜Ÿåˆ—ï¼Œä¸€ä¸ªè´Ÿè´£ä»æ•°æ®é›†ä¸­è¯»å–æ•°æ®å¹¶æ‰°ä¹±ï¼Œå¦ä¸€ä¸ªä»å‰ä¸€ä¸ªé˜Ÿåˆ—ä¸­è¯»å–batch_sizeå¼ å›¾ç‰‡è¾“å…¥ç½‘ç»œï¼Œè¿™ä¸ªå‚æ•°æ˜¯æŒ‡ç¬¬ä¸€ä¸ªé˜Ÿåˆ—çš„é•¿åº¦ï¼Œæœ€å°å€¼ä¸ºbatch_size * 2.5  </li><li>keep_prob: å¦‚æœå¤±æ´»è¢«ç½‘ç»œæ”¯æŒçš„è¯ï¼Œæ¯ä¸ªå…ƒç´ å­˜æ´»çš„å¯èƒ½æ€§<br></li></ul><h5 id="Volume-normalisation"><a href="#Volume-normalisation" class="headerlink" title="[Volume-normalisation]"></a>[Volume-normalisation]</h5><p><small></small></p><ul><li>normalisation:  æŒ‡ç¤ºç›´æ–¹å›¾æ ‡å‡†åŒ–æ˜¯å¦åº”è¯¥è¢«åº”ç”¨äºæ•°æ®  </li><li>whitening:  åªæ˜¯è¢«åŠ è½½çš„å›¾ç‰‡æ˜¯å¦åº”è¯¥è¢«å¢ç™½ï¼Œå¦‚æœæ˜¯ï¼Œè¾“å…¥Iï¼Œè¿”å›(I - mean(I)) / std(I)  </li><li>histogram_ref_file:  æ ‡å‡†åŒ–å‚æ•°çš„æ–‡ä»¶  </li><li>norm_file:  åŸºäºç›´æ–¹å›¾çš„æ ‡å‡†åŒ–çš„ç›´æ–¹å›¾landmarkç±»å‹  </li><li>cutoff:  ä¸‹çº§å’Œä¸Šçº§çš„åŸºäºç›´æ–¹å›¾çš„æ ‡å‡†åŒ–çš„æˆªæ–­  </li><li>normalise_foreground_only:  æŒ‡ç¤ºä¸€ä¸ªmaskæ˜¯å¦éœ€è¦è¢«åŸºäºå‰æ™¯æˆ–å¤šæ ·å‰æ™¯è¿›è¡Œè®¡ç®—ï¼Œå¦‚è®¾ç½®Trueï¼Œæ‰€æœ‰çš„æ ‡å‡†åŒ–æ­¥éª¤éƒ½å°†è¢«åº”ç”¨äºç”Ÿæˆå‰æ™¯åŒº  </li><li>foreground_type:  ç”Ÿæˆä¸€ä¸ªå‰æ™¯maskï¼Œå¹¶ä¸”å®ƒåªç”¨äºå‰æ™¯  </li><li>mutimod_foreground_type:  ç»“åˆå‰æ™¯maskå’Œå¤šæ¨¡æ€çš„ç­–ç•¥<br>ã€€ã€€å¯é€‰ç±»å‹ï¼š<br>ã€€ã€€or:  å¯å¾—åˆ°çš„masksçš„åˆé›†<br>ã€€ã€€and:  å¯å¾—åˆ°çš„maskçš„äº¤é›†<br>ã€€ã€€all:  maskä»æ¯ä¸ªæ¨¡æ€ç‹¬ç«‹è®¡ç®—<br></li></ul><h5 id="TRAINING"><a href="#TRAINING" class="headerlink" title="[TRAINING]"></a>[TRAINING]</h5><p><small></small></p><ul><li>optimiser:  è®¡ç®—å›¾æ¢¯åº¦ä¼˜åŒ–å™¨çš„ç±»å‹ï¼Œæ”¯æŒadagradeï¼Œadamï¼Œgradientdescentï¼Œmomentumï¼Œrmspropï¼Œnesterov  </li><li>sample_per_volumeï¼šæ¯å¼ å›¾çš„é‡‡æ ·æ¬¡æ•°  </li><li>lr:  å­¦ä¹ ç‡  </li><li>loss_type:  losså‡½æ•°çš„ç±»å‹ï¼Œæ”¯æŒsegmentation,regression,autoencoder,gan  </li><li>starting_iter:  è®¾ç½®é‡æ–°è®­ç»ƒæ¨¡å‹çš„è¿­ä»£æ¬¡æ•°  </li><li>save_every_n:  ä¿å­˜å½“å‰æ¨¡å‹çš„é¢‘ç‡ï¼Œ0ä¸ºä¸ä¿å­˜  </li><li>tensorboard_every_n:  è®¡ç®—å›¾ä¸­çš„å…ƒç´ å’Œå†™åˆ°tensorboardä¸Šçš„é¢‘ç‡  </li><li>max_iter:  æœ€å¤§è®­ç»ƒè¿­ä»£æ¬¡æ•°<br></li></ul><h5 id="Validation-during-training"><a href="#Validation-during-training" class="headerlink" title="[Validation during training]"></a>[Validation during training]</h5><p><small></small></p><ul><li>validation_every_n:  æ¯næ¬¡è¿­ä»£è¿è¡Œä¸€æ¬¡éªŒè¯è¿­ä»£  </li><li>validation_max_iter:  éªŒè¯è¿­ä»£è¿è¡Œçš„æ¬¡æ•°  </li><li>exclude_fraction_for_validation:  ç”¨äºéªŒè¯çš„æ•°æ®é›†çš„æ¯”ä¾‹  </li><li>exclude_fraction_for_inference:  ç”¨äºæ¨æ–­çš„æ•°æ®é›†çš„æ¯”ä¾‹<br></li></ul><h5 id="Data-augmentation-during-training"><a href="#Data-augmentation-during-training" class="headerlink" title="[Data augmentation during training]"></a>[Data augmentation during training]</h5><p><small></small></p><ul><li>rotation_angle:  æŒ‡ç¤ºè¾“å…¥çš„å›¾ç‰‡æ—‹è½¬ä¸€ä¸ªéšæœºçš„æ—‹è½¬  </li><li>scaling_percentage:  æŒ‡ç¤ºä¸€ä¸ªéšæœºçš„ç¼©æ”¾æ¯”ä¾‹(-50,50)  </li><li>random_flipping_axes:  å¯ä»¥ç¿»è½¬å¢å¼ºæ•°æ®çš„è½´(???)<br></li></ul><h5 id="INFERENCE"><a href="#INFERENCE" class="headerlink" title="[INFERENCE]"></a>[INFERENCE]</h5><p><small></small></p><ul><li>spatial_window_size:  æŒ‡ç¤ºè¾“å…¥çª—å£çš„å¤§å°(int array)  </li><li>border:  ä¸€ä¸ªç”¨äºä¿®å‰ªè¾“å‡ºçª—å£å¤§å°çš„è¾¹ç•Œå€¼(int tuple)ï¼Œå¦‚è®¾ç½®(3,3,3)ï¼Œå°†æŠŠä¸€ä¸ª(64*64*64)çš„çª—å£ä¿®å‰ªä¸º(58*58*58)  </li><li>inference_iter:  æŒ‡å®šå·²è®­ç»ƒçš„æ¨¡å‹ç”¨äºæ¨æµ‹(integer)  </li><li>save_seg_dir:  é¢„æµ‹ç›®å½•çš„åå­—  </li><li>output_postfix:  å‘æ¯ä¸€ä¸ªè¾“å‡ºæ–‡ä»¶çš„åç§°åæ·»åŠ åç¼€  </li><li>output_interp_order:  ç½‘ç»œè¾“å‡ºçš„æ¨æ–­é¡ºåº  </li><li>dataset_to_infer:  å­—ç¬¦ä¸²æŒ‡å®šè®¡ç®—æ¨ç†çš„æ•°æ®é›†ï¼ˆâ€˜trainingâ€™, â€˜validationâ€™, â€˜inferenceâ€™ï¼‰<br></li></ul><h5 id="EVALUATION"><a href="#EVALUATION" class="headerlink" title="[EVALUATION]"></a>[EVALUATION]</h5><p><small></small></p><ul><li>save_csv_dir:  å­˜å‚¨è¾“å‡ºçš„csvæ–‡ä»¶çš„è·¯å¾„  </li><li>evaluations:  è¦è®¡ç®—çš„è¯„ä»·æŒ‡æ ‡åˆ—è¡¨ä»¥é€—å·åˆ†éš”çš„å­—ç¬¦ä¸²è¡¨ç¤ºï¼Œæ¯ä¸ªåº”ç”¨ç¨‹åºå¯èƒ½çš„è¯„ä¼°æŒ‡æ ‡åˆ—è¡¨å¯ç”¨äºå›å½’è¯„ä¼°ã€åˆ†æ®µè¯„ä¼°å’Œåˆ†ç±»è¯„ä¼°  </li><li>evaluation_units:  æè¿°åœ¨åˆ†å‰²çš„æƒ…å†µä¸‹åº”è¯¥å¦‚ä½•è¿›è¡Œè¯„ä¼°<br>ã€€ã€€foreground:  åªå¯¹ä¸€ä¸ªæ ‡ç­¾<br>ã€€ã€€labelï¼š  å¯¹æ¯ä¸€ä¸ªæ ‡ç­¾åº¦é‡<br>ã€€ã€€cc:  å¯¹æ¯ä¸ªè¿æ¥ç»„ä»¶åº¦é‡<br></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ã€é˜…è¯»æ—¶é—´ã€‘XXX min XXX words&lt;br&gt;ã€é˜…è¯»å†…å®¹ã€‘&lt;a href=&quot;https://www.cnblogs.com/zhhfan/p/9806900.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;NiftyNetå¼€æºå¹³å°çš„ä½¿ç”¨ â€“ é…ç½®æ–‡ä»¶&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="åŒ»ç–—å›¾åƒ" scheme="http://yoursite.com/categories/%E5%8C%BB%E7%96%97%E5%9B%BE%E5%83%8F/"/>
    
    
      <category term="NiftyNet" scheme="http://yoursite.com/tags/NiftyNet/"/>
    
  </entry>
  
  <entry>
    <title>PyTorch-å®˜æ–¹æ–‡æ¡£-å­¦ä¹ è·¯çº¿</title>
    <link href="http://yoursite.com/2019/03/01/PyTorch-%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3-%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/"/>
    <id>http://yoursite.com/2019/03/01/PyTorch-å®˜æ–¹æ–‡æ¡£-å­¦ä¹ è·¯çº¿/</id>
    <published>2019-03-01T03:54:25.000Z</published>
    <updated>2019-03-16T17:28:05.972Z</updated>
    
    <content type="html"><![CDATA[<p>ã€é˜…è¯»æ—¶é—´ã€‘XXX min XXX words<br>ã€é˜…è¯»å†…å®¹ã€‘â€¦â€¦</p><a id="more"></a><h3 id="DATA-LOADING-AND-PROCESSING-TUTORIAL"><a href="#DATA-LOADING-AND-PROCESSING-TUTORIAL" class="headerlink" title="DATA LOADING AND PROCESSING TUTORIAL"></a><a href="https://pytorch.org/tutorials/beginner/data_loading_tutorial.html#" target="_blank" rel="noopener">DATA LOADING AND PROCESSING TUTORIAL</a></h3><p>Letâ€™s quickly read the CSV and get the annotations in an (N, 2) array where N is the number of landmarks.</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">landmarks_frame = pd.read_csv(<span class="string">'data/faces/face_landmarks.csv'</span>)</span><br><span class="line"></span><br><span class="line">n = <span class="number">65</span></span><br><span class="line">img_name = landmarks_frame.iloc[n, <span class="number">0</span>]  <span class="comment">#select the first column (image_name) in .csv file</span></span><br><span class="line">landmarks = landmarks_frame.iloc[n, <span class="number">1</span>:].as_matrix() <span class="comment">#select the rest datas in .csv file #landmarks.shape: (136,)</span></span><br><span class="line">landmarks = landmarks.astype(<span class="string">'float'</span>).reshape(<span class="number">-1</span>, <span class="number">2</span>) </span><br><span class="line"></span><br><span class="line">print(<span class="string">'Image name: &#123;&#125;'</span>.format(img_name))  </span><br><span class="line">print(<span class="string">'Landmarks shape: &#123;&#125;'</span>.format(landmarks.shape))</span><br><span class="line">print(<span class="string">'First 4 Landmarks: &#123;&#125;'</span>.format(landmarks[:<span class="number">4</span>]))</span><br></pre></td></tr></table></figure><p>Out:</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">Image name: person-<span class="number">7</span>.jpg</span><br><span class="line">Landmarks shape: (<span class="number">68</span>, <span class="number">2</span>)</span><br><span class="line">First <span class="number">4</span> Landmarks: [[<span class="number">32</span>. <span class="number">65</span>.]  <span class="comment"># å¯¹åº”äº person-7.jpg</span></span><br><span class="line"> [<span class="number">33</span>. <span class="number">76</span>.]</span><br><span class="line"> [<span class="number">34</span>. <span class="number">86</span>.]</span><br><span class="line"> [<span class="number">34</span>. <span class="number">97</span>.]]</span><br></pre></td></tr></table></figure><h4 id="Dataset-class"><a href="#Dataset-class" class="headerlink" title="Dataset class"></a>Dataset class</h4><ul><li><code>__len__</code>: so that <code>len(dataset)</code> returns the size of the dataset.</li><li><code>__getitem__</code>: to support the indexing such that <code>dataset[i]</code> can be used to get $ith$ sample</li></ul><h4 id="Transforms"><a href="#Transforms" class="headerlink" title="Transforms"></a>Transforms</h4><ul><li><code>Rescale</code>: to scale the image</li><li><code>RandomCrop</code>: to crop from image randomly. This is data augmentation.</li><li><code>ToTensor</code>: to convert the numpy images to torch images (we need to swap axes).</li></ul><h4 id="Iterating-through-the-dataset"><a href="#Iterating-through-the-dataset" class="headerlink" title="Iterating through the dataset"></a>Iterating through the dataset</h4><ul><li><code>torch.utils.data.DataLoader</code>: an iterator which provides all these features (i. <code>Batching the data</code>   ii. <code>Shuffling the data</code>    iii. <code>Load the data in parallel using multiprocessing workers</code>).</li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">transformed_dataset = FaceLandmarksDataset(csv_file=<span class="string">'data/faces/face_landmarks.csv'</span>,</span><br><span class="line">                                           root_dir=<span class="string">'data/faces/'</span>,</span><br><span class="line">                                           transform=transforms.Compose([</span><br><span class="line">                                               Rescale(<span class="number">256</span>),</span><br><span class="line">                                               RandomCrop(<span class="number">224</span>),</span><br><span class="line">                                               ToTensor()</span><br><span class="line">                                           ]))</span><br><span class="line">                                           </span><br><span class="line">dataloader = DataLoader(transformed_dataset, batch_size=<span class="number">4</span>,</span><br><span class="line">                        shuffle=<span class="keyword">True</span>, num_workers=<span class="number">4</span>) <span class="comment"># !!! &lt;class 'torch.utils.data.dataloader.DataLoader'&gt;  (inputs, labels)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Helper function to show a batch</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">show_landmarks_batch</span><span class="params">(sample_batched)</span>:</span></span><br><span class="line">    <span class="string">"""Show image with landmarks for a batch of samples."""</span></span><br><span class="line">    images_batch, landmarks_batch = \</span><br><span class="line">            sample_batched[<span class="string">'image'</span>], sample_batched[<span class="string">'landmarks'</span>]</span><br><span class="line">    batch_size = len(images_batch) <span class="comment"># batch_size: 4</span></span><br><span class="line">    im_size = images_batch.size(<span class="number">2</span>) <span class="comment">#images_batch.size(): torch.Size([4, 3, 224, 224])  #im_size: 224</span></span><br><span class="line"></span><br><span class="line">    grid = utils.make_grid(images_batch) <span class="comment"># &lt;class 'torch.Tensor'&gt;</span></span><br><span class="line">    plt.imshow(grid.numpy().transpose((<span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>))) <span class="comment"># transpose &lt;class 'numpy.ndarray'&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(batch_size):</span><br><span class="line">        plt.scatter(landmarks_batch[i, :, <span class="number">0</span>].numpy() + i * im_size, <span class="comment"># x  #landmarks_batch.size(): torch.Size([4, 68, 2])</span></span><br><span class="line">                    landmarks_batch[i, :, <span class="number">1</span>].numpy(),<span class="comment"># y</span></span><br><span class="line">                    s=<span class="number">10</span>, marker=<span class="string">'.'</span>, c=<span class="string">'r'</span>)</span><br><span class="line"></span><br><span class="line">        plt.title(<span class="string">'Batch from dataloader'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i_batch, sample_batched <span class="keyword">in</span> enumerate(dataloader):</span><br><span class="line">    print(i_batch, sample_batched[<span class="string">'image'</span>].size(),  <span class="comment"># torch.Size([4, 3, 224, 224])</span></span><br><span class="line">          sample_batched[<span class="string">'landmarks'</span>].size()) <span class="comment"># torch.Size([4, 68, 2])</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># observe 4th batch and stop.</span></span><br><span class="line">    <span class="keyword">if</span> i_batch == <span class="number">3</span>:</span><br><span class="line">        plt.figure()</span><br><span class="line">        show_landmarks_batch(sample_batched)</span><br><span class="line">        plt.axis(<span class="string">'off'</span>)</span><br><span class="line">        plt.ioff()</span><br><span class="line">        plt.show()</span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></table></figure><h4 id="Afterword-torchvision"><a href="#Afterword-torchvision" class="headerlink" title="Afterword: torchvision"></a>Afterword: torchvision</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> torchvision <span class="keyword">import</span> transforms, datasets</span><br><span class="line"></span><br><span class="line">data_transform = transforms.Compose([</span><br><span class="line">        transforms.RandomSizedCrop(<span class="number">224</span>),</span><br><span class="line">        transforms.RandomHorizontalFlip(), <span class="comment">#  operate on PIL.Image</span></span><br><span class="line">        transforms.ToTensor(),</span><br><span class="line">        transforms.Normalize(mean=[<span class="number">0.485</span>, <span class="number">0.456</span>, <span class="number">0.406</span>],</span><br><span class="line">                             std=[<span class="number">0.229</span>, <span class="number">0.224</span>, <span class="number">0.225</span>])</span><br><span class="line">    ])</span><br><span class="line">    </span><br><span class="line"><span class="comment"># ImageFolder is one of the more generic datasets available in torchvision.</span></span><br><span class="line">hymenoptera_dataset = datasets.ImageFolder(root=<span class="string">'hymenoptera_data/train'</span>,</span><br><span class="line">                                           transform=data_transform)</span><br><span class="line">                                           </span><br><span class="line">dataset_loader = torch.utils.data.DataLoader(hymenoptera_dataset,</span><br><span class="line">                                             batch_size=<span class="number">4</span>, shuffle=<span class="keyword">True</span>,</span><br><span class="line">                                             num_workers=<span class="number">4</span>)</span><br></pre></td></tr></table></figure><h3 id="TRANSFER-LEARNING-TUTORIAL"><a href="#TRANSFER-LEARNING-TUTORIAL" class="headerlink" title="TRANSFER LEARNING TUTORIAL"></a><a href="https://pytorch.org/tutorials/beginner/transfer_learning_tutorial.html" target="_blank" rel="noopener">TRANSFER LEARNING TUTORIAL</a></h3><p>These two major transfer learning scenarios look as follows:</p><ul><li><strong>Finetuning the convnet</strong>: Instead of random initializaion, we initialize the network with <code>a pretrained network</code>, like the one that is trained on imagenet 1000 dataset. Rest of the training looks as usual.</li><li><strong>ConvNet as fixed feature extractor</strong>: Here, we will <code>freeze the weights</code> for all of the network except that of the final fully connected layer. This last fully connected layer is replaced with a new one with random weights and only this layer is trained.</li></ul><p><strong>å‚è€ƒ</strong>ï¼š<a href="https://blog.csdn.net/u014380165/article/details/78525273/" target="_blank" rel="noopener">PyTorchå­¦ä¹ ä¹‹è·¯ï¼ˆlevel1ï¼‰â€”â€”è®­ç»ƒä¸€ä¸ªå›¾åƒåˆ†ç±»æ¨¡å‹</a></p><h4 id="Load-Data"><a href="#Load-Data" class="headerlink" title="Load Data"></a>Load Data</h4><h4 id="Training-the-model"><a href="#Training-the-model" class="headerlink" title="Training the model"></a>Training the model</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">train_model</span><span class="params">(model, criterion, optimizer, scheduler, num_epochs=<span class="number">25</span>)</span>:</span></span><br><span class="line">    since = time.time()</span><br><span class="line"></span><br><span class="line">    best_model_wts = copy.deepcopy(model.state_dict()) <span class="comment"># æ·±æ‹·è´ ï¼ˆ'éå¼•ç”¨'æ‹·è´ï¼‰</span></span><br><span class="line">    best_acc = <span class="number">0.0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> epoch <span class="keyword">in</span> range(num_epochs):</span><br><span class="line">        print(<span class="string">'Epoch &#123;&#125;/&#123;&#125;'</span>.format(epoch, num_epochs - <span class="number">1</span>))</span><br><span class="line">        print(<span class="string">'-'</span> * <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Each epoch has a training and validation phase</span></span><br><span class="line">        <span class="keyword">for</span> phase <span class="keyword">in</span> [<span class="string">'train'</span>, <span class="string">'val'</span>]:</span><br><span class="line">            <span class="keyword">if</span> phase == <span class="string">'train'</span>:</span><br><span class="line">                scheduler.step()  <span class="comment"># æ›´æ–°å­¦ä¹ ç‡</span></span><br><span class="line">                model.train()  <span class="comment"># Set model to training mode</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                model.eval()   <span class="comment"># Set model to evaluate mode</span></span><br><span class="line"></span><br><span class="line">            running_loss = <span class="number">0.0</span></span><br><span class="line">            running_corrects = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">            <span class="comment"># Iterate over data.</span></span><br><span class="line">            <span class="keyword">for</span> inputs, labels <span class="keyword">in</span> dataloaders[phase]:</span><br><span class="line">                </span><br><span class="line">                <span class="comment"># é€‰å–è°ƒç”¨ gpu or cpu </span></span><br><span class="line">                <span class="comment"># (æ•°æ®ç±»å‹ä¸å˜ &lt;class 'torch.Tensor'&gt; â†’ &lt;class 'torch.Tensor'&gt;)</span></span><br><span class="line">                inputs = inputs.to(device)</span><br><span class="line">                labels = labels.to(device)</span><br><span class="line"></span><br><span class="line">                <span class="comment"># zero the parameter gradients ç½‘ç»œä¸­çš„æ‰€æœ‰æ¢¯åº¦ç½®0</span></span><br><span class="line">                optimizer.zero_grad()</span><br><span class="line"></span><br><span class="line">                <span class="comment"># forward</span></span><br><span class="line">                <span class="comment"># track history if only in train</span></span><br><span class="line">                <span class="keyword">with</span> torch.set_grad_enabled(phase == <span class="string">'train'</span>):</span><br><span class="line">                    outputs = model(inputs) <span class="comment"># ç½‘ç»œçš„å‰å‘ä¼ æ’­</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="comment"># é¢„æµ‹è¯¥æ ·æœ¬å±äºå“ªä¸ªç±»åˆ«çš„ä¿¡æ¯   </span></span><br><span class="line">                    <span class="comment"># torch.max()çš„ç¬¬ä¸€ä¸ªè¾“å…¥æ˜¯tensoræ ¼å¼,ç¬¬äºŒä¸ªå‚æ•°1æ˜¯ä»£è¡¨dimçš„æ„æ€ </span></span><br><span class="line">                    <span class="comment"># å–æ¯ä¸€è¡Œçš„æœ€å¤§å€¼ï¼Œå…¶å®å°±æ˜¯æˆ‘ä»¬å¸¸è§çš„å–æ¦‚ç‡æœ€å¤§çš„é‚£ä¸ªindex</span></span><br><span class="line">                    _, preds = torch.max(outputs, <span class="number">1</span>) </span><br><span class="line">                    </span><br><span class="line">                    <span class="comment"># å°†è¾“å‡ºçš„outputså’ŒåŸæ¥å¯¼å…¥çš„labelsä½œä¸ºlosså‡½æ•°çš„è¾“å…¥å°±å¯ä»¥å¾—åˆ°æŸå¤±</span></span><br><span class="line">                    loss = criterion(outputs, labels) </span><br><span class="line"></span><br><span class="line">                    <span class="comment"># backward + optimize only if in training phase</span></span><br><span class="line">                    <span class="comment"># è®¡ç®—å¾—åˆ°lossåå°±è¦å›ä¼ æŸå¤±.è¦æ³¨æ„çš„æ˜¯è¿™æ˜¯åœ¨è®­ç»ƒçš„æ—¶å€™æ‰ä¼šæœ‰çš„æ“ä½œï¼ˆæµ‹è¯•æ—¶åªæœ‰forwardè¿‡ç¨‹ï¼‰</span></span><br><span class="line">                    <span class="keyword">if</span> phase == <span class="string">'train'</span>:</span><br><span class="line">                        loss.backward()</span><br><span class="line">                        optimizer.step() <span class="comment"># æ›´æ–°å‚æ•°ï¼ˆæ¢¯åº¦å’Œæƒå€¼ä¿¡æ¯ï¼‰</span></span><br><span class="line"></span><br><span class="line">                <span class="comment"># statistics</span></span><br><span class="line">                running_loss += loss.item() * inputs.size(<span class="number">0</span>)</span><br><span class="line">                running_corrects += torch.sum(preds == labels.data)</span><br><span class="line"></span><br><span class="line">            epoch_loss = running_loss / dataset_sizes[phase]</span><br><span class="line">            epoch_acc = running_corrects.double() / dataset_sizes[phase]</span><br><span class="line"></span><br><span class="line">            print(<span class="string">'&#123;&#125; Loss: &#123;:.4f&#125; Acc: &#123;:.4f&#125;'</span>.format(</span><br><span class="line">                phase, epoch_loss, epoch_acc))</span><br><span class="line"></span><br><span class="line">            <span class="comment"># deep copy the model</span></span><br><span class="line">            <span class="keyword">if</span> phase == <span class="string">'val'</span> <span class="keyword">and</span> epoch_acc &gt; best_acc:</span><br><span class="line">                best_acc = epoch_acc</span><br><span class="line">                best_model_wts = copy.deepcopy(model.state_dict())</span><br><span class="line"></span><br><span class="line">        print()</span><br><span class="line"></span><br><span class="line">    time_elapsed = time.time() - since</span><br><span class="line">    print(<span class="string">'Training complete in &#123;:.0f&#125;m &#123;:.0f&#125;s'</span>.format(</span><br><span class="line">        time_elapsed // <span class="number">60</span>, time_elapsed % <span class="number">60</span>))</span><br><span class="line">    print(<span class="string">'Best val Acc: &#123;:4f&#125;'</span>.format(best_acc))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># load best model weights</span></span><br><span class="line">    model.load_state_dict(best_model_wts)</span><br><span class="line">    <span class="keyword">return</span> model</span><br></pre></td></tr></table></figure><h4 id="Visualizing-the-model-predictions"><a href="#Visualizing-the-model-predictions" class="headerlink" title="Visualizing the model predictions"></a>Visualizing the model predictions</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">was_training = model.training  <span class="comment"># record the last model mode</span></span><br></pre></td></tr></table></figure><h4 id="Finetuning-the-convnet"><a href="#Finetuning-the-convnet" class="headerlink" title="Finetuning the convnet"></a>Finetuning the convnet</h4><p>Load a pretrained model and <code>reset</code> final fully connected layer.<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">model_ft = models.resnet18(pretrained=<span class="keyword">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Parameters of newly constructed modules have requires_grad=True by default</span></span><br><span class="line">num_ftrs = model_ft.fc.in_features  <span class="comment"># in_features: num inputs </span></span><br><span class="line">model_ft.fc = nn.Linear(num_ftrs, <span class="number">2</span>)  <span class="comment"># 2: num outputs  </span></span><br><span class="line"></span><br><span class="line">model_ft = model_ft.to(device)</span><br><span class="line"></span><br><span class="line">criterion = nn.CrossEntropyLoss()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Observe that all parameters are being optimized</span></span><br><span class="line">optimizer_ft = optim.SGD(model_ft.parameters(), lr=<span class="number">0.001</span>, momentum=<span class="number">0.9</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Decay LR (learning rate) by a factor of 0.1 every 7 epochs</span></span><br><span class="line"><span class="comment"># torch.optim.lr_scheduleræ¨¡å—çš„StepLRç±»ï¼Œè¡¨ç¤ºæ¯éš”step_sizeä¸ªepochå°±å°†å­¦ä¹ ç‡é™ä¸ºåŸæ¥çš„gammaå€</span></span><br><span class="line">exp_lr_scheduler = lr_scheduler.StepLR(optimizer_ft, step_size=<span class="number">7</span>, gamma=<span class="number">0.1</span>)</span><br></pre></td></tr></table></figure></p><h4 id="Train-and-evaluate"><a href="#Train-and-evaluate" class="headerlink" title="Train and evaluate"></a>Train and evaluate</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Train and evaluate</span></span><br><span class="line">model_ft = train_model(model_ft, criterion, optimizer_ft, exp_lr_scheduler,</span><br><span class="line">                       num_epochs=<span class="number">25</span>)</span><br><span class="line"><span class="comment"># visualize</span></span><br><span class="line">visualize_model(model_ft)</span><br></pre></td></tr></table></figure><h4 id="ConvNet-as-fixed-feature-extractor"><a href="#ConvNet-as-fixed-feature-extractor" class="headerlink" title="ConvNet as fixed feature extractor"></a>ConvNet as fixed feature extractor</h4><p>Here, we need to <code>freeze</code> all the network except the final layer. We need to set <code>requires_grad == False</code> to freeze the parameters so that the gradients are not computed in <code>backward()</code>.<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">model_conv = torchvision.models.resnet18(pretrained=<span class="keyword">True</span>)</span><br><span class="line"><span class="keyword">for</span> param <span class="keyword">in</span> model_conv.parameters():</span><br><span class="line">    param.requires_grad = <span class="keyword">False</span></span><br></pre></td></tr></table></figure></p><h4 id="Train-and-evaluate-1"><a href="#Train-and-evaluate-1" class="headerlink" title="Train and evaluate"></a>Train and evaluate</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Train and evaluate</span></span><br><span class="line">model_conv = train_model(model_conv, criterion, optimizer_conv,</span><br><span class="line">                         exp_lr_scheduler, num_epochs=<span class="number">25</span>)</span><br><span class="line">              </span><br><span class="line"><span class="comment"># visualize           </span></span><br><span class="line">visualize_model(model_conv)</span><br><span class="line"></span><br><span class="line">plt.ioff()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h3 id="Extended-Reading"><a href="#Extended-Reading" class="headerlink" title="Extended Reading"></a>Extended Reading</h3><ul><li><a href="https://zhuanlan.zhihu.com/p/29024978" target="_blank" rel="noopener">PyTorchå®æˆ˜æŒ‡å—</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ã€é˜…è¯»æ—¶é—´ã€‘XXX min XXX words&lt;br&gt;ã€é˜…è¯»å†…å®¹ã€‘â€¦â€¦&lt;/p&gt;
    
    </summary>
    
    
      <category term="PyTorch" scheme="http://yoursite.com/tags/PyTorch/"/>
    
  </entry>
  
  <entry>
    <title>å¤è¯</title>
    <link href="http://yoursite.com/2019/03/01/%E5%8F%A4%E8%AF%8D/"/>
    <id>http://yoursite.com/2019/03/01/å¤è¯/</id>
    <published>2019-03-01T02:23:25.000Z</published>
    <updated>2019-03-11T02:42:04.368Z</updated>
    
    <content type="html"><![CDATA[<p>ã€é˜…è¯»æ—¶é—´ã€‘XXX min XXX words<br>ã€é˜…è¯»å†…å®¹ã€‘â€¦â€¦</p><a id="more"></a><h5 id="ã€Šè™ç¾äººÂ·å¬é›¨ã€‹ï¼ˆå®‹ï¼‰è’‹æ·"><a href="#ã€Šè™ç¾äººÂ·å¬é›¨ã€‹ï¼ˆå®‹ï¼‰è’‹æ·" class="headerlink" title="ã€Šè™ç¾äººÂ·å¬é›¨ã€‹ï¼ˆå®‹ï¼‰è’‹æ·"></a>ã€Šè™ç¾äººÂ·å¬é›¨ã€‹ï¼ˆå®‹ï¼‰è’‹æ·</h5><p>  å°‘å¹´å¬é›¨æ­Œæ¥¼ä¸Šï¼Œçº¢çƒ›æ˜ç½—å¸ã€‚å£®å¹´å¬é›¨å®¢èˆŸä¸­ï¼Œæ±Ÿé˜”äº‘ä½ï¼Œæ–­é›å«è¥¿é£ã€‚<br>  è€Œä»Šå¬é›¨åƒ§åºä¸‹ï¼Œé¬“å·²æ˜Ÿæ˜Ÿä¹Ÿã€‚æ‚²æ¬¢ç¦»åˆæ€»æ— æƒ…ï¼Œä¸€ä»»é˜¶å‰ç‚¹æ»´åˆ°å¤©æ˜ã€‚</p><h5 id="ã€Šæ´›ç¥èµ‹ã€‹èŠ‚é€‰-ï¼ˆä¸‰å›½ï¼‰æ›¹æ¤"><a href="#ã€Šæ´›ç¥èµ‹ã€‹èŠ‚é€‰-ï¼ˆä¸‰å›½ï¼‰æ›¹æ¤" class="headerlink" title="ã€Šæ´›ç¥èµ‹ã€‹èŠ‚é€‰ ï¼ˆä¸‰å›½ï¼‰æ›¹æ¤"></a>ã€Šæ´›ç¥èµ‹ã€‹èŠ‚é€‰ ï¼ˆä¸‰å›½ï¼‰æ›¹æ¤</h5><p>  å…¶å½¢ä¹Ÿï¼Œç¿©è‹¥æƒŠé¸¿ï¼Œå©‰è‹¥æ¸¸é¾™ï¼Œè£æ›œç§‹èŠï¼ŒåèŒ‚æ˜¥æ¾ã€‚<br>  é«£é«´ï¼ˆfÇng fÃºï¼‰å…®è‹¥è½»äº‘ä¹‹è”½æœˆï¼Œé£˜é£–ï¼ˆyÃ¡oï¼‰å…®è‹¥æµé£ä¹‹å›é›ªã€‚<br>  è¿œè€Œæœ›ä¹‹ï¼Œçšè‹¥å¤ªé˜³å‡æœéœï¼›è¿«è€Œå¯Ÿä¹‹ï¼Œç¼è‹¥èŠ™è•–å‡ºæ¸Œï¼ˆlÃ¹ï¼‰æ³¢ã€‚<br>  ç§¾çº¤å¾—ä¸­ï¼Œä¿®çŸ­åˆåº¦ã€‚è‚©è‹¥å‰Šæˆï¼Œè…°å¦‚çº¦ç´ ã€‚å»¶é¢ˆç§€é¡¹ï¼Œçš“è´¨å‘ˆéœ²ã€‚<br>  èŠ³æ³½æ— åŠ ï¼Œé“…åä¸å¾¡ã€‚äº‘é«»å³¨å³¨ï¼Œä¿®çœ‰è”å¨Ÿã€‚ä¸¹å”‡å¤–æœ—ï¼Œçš“é½¿å†…é²œã€‚<br>  æ˜çœ¸å–„çï¼Œé¥è¾…æ‰¿æƒã€‚ç“Œå§¿è‰³é€¸ï¼Œä»ªé™ä½“é—²ã€‚æŸ”æƒ…ç»°æ€ï¼Œåªšäºè¯­è¨€ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ã€é˜…è¯»æ—¶é—´ã€‘XXX min XXX words&lt;br&gt;ã€é˜…è¯»å†…å®¹ã€‘â€¦â€¦&lt;/p&gt;
    
    </summary>
    
      <category term="è¯­å½•" scheme="http://yoursite.com/categories/%E8%AF%AD%E5%BD%95/"/>
    
    
  </entry>
  
  <entry>
    <title>è¿ç§»å­¦ä¹ -Introduction</title>
    <link href="http://yoursite.com/2019/02/27/%E8%BF%81%E7%A7%BB%E5%AD%A6%E4%B9%A0/"/>
    <id>http://yoursite.com/2019/02/27/è¿ç§»å­¦ä¹ /</id>
    <published>2019-02-27T13:30:31.000Z</published>
    <updated>2019-03-02T06:37:28.737Z</updated>
    
    <content type="html"><![CDATA[<p>ã€é˜…è¯»æ—¶é—´ã€‘XXX min XXX words<br>ã€é˜…è¯»å†…å®¹ã€‘æ·±åº¦å­¦ä¹ ä¹‹PyTorchå®æˆ˜è®¡ç®—æœºè§†è§‰ ç¬¬7ç« </p><a id="more"></a><p>å¦‚æœæˆ‘ä»¬ç”¨è¿™ä¹ˆå¤šèµ„æºè®­ç»ƒçš„æ¨¡å‹èƒ½å¤Ÿ<code>è§£å†³åŒä¸€ç±»é—®é¢˜</code>ï¼Œé‚£ä¹ˆæ¨¡å‹çš„æ€§ä»·æ¯”ä¼šæé«˜å¾ˆå¤šï¼Œè¿™å°±ä¿ƒä½¿ä½¿ç”¨è¿ç§»æ¨¡å‹è§£å†³åŒ ä¸€ç±»é—®é¢˜çš„æ–¹æ³•å‡ºç° ã€‚å› ä¸ºè¯¥æ–¹æ³•çš„å‡ºç°ï¼Œæˆ‘ä»¬é€šè¿‡å¯¹ ä¸€ä¸ªè®­ç»ƒå¥½çš„æ¨¡å‹è¿›è¡Œç»†å¾®è°ƒæ•´ï¼Œå°±èƒ½å°†å…¶åº”ç”¨åˆ°ç›¸ä¼¼çš„é—®é¢˜ä¸­ï¼Œæœ€åè¿˜èƒ½å–å¾—å¾ˆå¥½çš„æ•ˆæœ ; å¦å¤–ï¼Œå¯¹äºåŸå§‹æ•°æ®è¾ƒå°‘çš„é—®é¢˜ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½å¤Ÿé€šè¿‡é‡‡ç”¨è¿ç§»æ¨¡å‹è¿›è¡Œæœ‰æ•ˆè§£å†³ ï¼Œæ‰€ä»¥ï¼Œå¦‚æœèƒ½å¤Ÿé€‰å–åˆé€‚çš„è¿ç§»å­¦ä¹ æ–¹æ³•ï¼Œåˆ™ä¼šå¯¹è§£å†³æˆ‘ä»¬æ‰€é¢ä¸´çš„é—®é¢˜æœ‰å¾ˆå¤§çš„å¸®åŠ© ã€‚</p><p>å»ºè®®å¯åŒæ—¶é˜…è¯» <a href="https://captainzj.github.io/2018/12/28/torchvision-pretrained-Model/" target="_blank" rel="noopener">torchvision_pretrained_Model</a>ï¼Œå¹¶ä¸”è¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£<a href="https://pytorch.org/tutorials/beginner/transfer_learning_tutorial.html" target="_blank" rel="noopener">Transfer Learning Tutorial</a>ã€‚ </p><h3 id="æ¨¡å‹æ­å»ºå’Œå‚æ•°ä¼˜åŒ–"><a href="#æ¨¡å‹æ­å»ºå’Œå‚æ•°ä¼˜åŒ–" class="headerlink" title="æ¨¡å‹æ­å»ºå’Œå‚æ•°ä¼˜åŒ–"></a>æ¨¡å‹æ­å»ºå’Œå‚æ•°ä¼˜åŒ–</h3><p>æœ¬èŠ‚ä¼šå…ˆåŸºäºä¸€ä¸ªç®€åŒ–çš„VGGNet æ¶æ„æ­å»ºå·ç§¯ç¥ç»ç½‘ç»œæ¨¡å‹äº•è¿›è¡Œæ¨¡å‹è®­ç»ƒå’Œå‚æ•°ä¼˜åŒ–ï¼Œç„¶åè¿ç§»ä¸€ä¸ªå®Œæ•´çš„VGGI6æ¶æ„çš„å·ç§¯ç¥ç»ç½‘ç»œæ¨¡å‹ï¼Œæœ€åè¿ç§»ä¸€ä¸ªResNet50æ¶æ„çš„å·ç§¯ç¥ç»ç½‘ç»œæ¨¡å‹ï¼Œå¹¶å¯¹æ¯”è¿™ä¸‰ä¸ªæ¨¡å‹åœ¨é¢„æµ‹ç»“æœä¸Šçš„å‡†ç¡®æ€§å’Œåœ¨æ³›åŒ–èƒ½åŠ›ä¸Šçš„å·®å¼‚ ã€‚</p><h4 id="è‡ªå®šä¹‰VGGNet"><a href="#è‡ªå®šä¹‰VGGNet" class="headerlink" title="è‡ªå®šä¹‰VGGNet"></a>è‡ªå®šä¹‰VGGNet</h4><p>æˆ‘ä»¬é¦–å…ˆéœ€è¦æ­å»ºä¸€ä¸ªå·ç§¯ç¥ç»ç½‘ç»œæ¨¡å‹ï¼Œ è€ƒè™‘åˆ°è®­ç»ƒæ—¶é—´çš„æˆæœ¬ï¼Œæˆ‘ä»¬åŸºäºVGG16æ¶æ„æ¥æ­å»ºä¸€ä¸ªç®€åŒ–ç‰ˆçš„VGGNetæ¨¡å‹ï¼Œè¿™ä¸ªç®€åŒ–ç‰ˆæ¨¡å‹è¦æ±‚è¾“å…¥çš„å›¾ç‰‡å¤§å°å…¨éƒ¨<code>ç¼©æ”¾åˆ°64Ã—64</code>ï¼Œ è€Œåœ¨æ ‡å‡†çš„VGGl6æ¶æ„æ¨¡å‹ä¸­è¾“å…¥çš„å›¾ç‰‡å¤§å°åº”å½“æ˜¯224Ã—224çš„; åŒæ—¶ç®€åŒ–ç‰ˆæ¨¡å‹<code>åˆ é™¤äº†VGG16æœ€åçš„ä¸‰ä¸ªå·ç§¯å±‚å’Œæ± åŒ–å±‚</code>ï¼Œä¹Ÿ<code>æ”¹å˜äº†å…¨è¿æ¥å±‚ä¸­çš„è¿æ¥å‚æ•°</code>ï¼Œè¿™ä¸€ç³»åˆ—çš„æ”¹å˜éƒ½æ˜¯ä¸ºäº†å‡å°‘æ•´ä¸ªæ¨¡å‹å‚ä¸è®­ç»ƒçš„å‚æ•°æ•°é‡ã€‚<br>åœ¨æ­å»ºå¥½æ¨¡å‹åï¼Œé€šè¿‡ print å¯¹æ­å»ºçš„æ¨¡å‹è¿›è¡Œæ‰“å°è¾“å‡ºæ¥æ˜¾ç¤ºæ¨¡å‹ä¸­çš„ç»†èŠ‚ï¼Œæ‰“å°è¾“å‡ºçš„ä»£ç å¦‚ä¸‹:</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">model = Models() </span><br><span class="line"><span class="keyword">print</span> (model)</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œå®šä¹‰æ¨¡å‹çš„æŸå¤±å‡½æ•°å’Œå¯¹å‚æ•°è¿›è¡Œä¼˜åŒ–çš„ä¼˜åŒ–å‡½æ•°ï¼ˆåœ¨ä»£ç ä¸­ä¼˜åŒ–å‡½æ•°ä½¿ç”¨çš„æ˜¯ Adamï¼Œ æŸå¤±å‡½æ•°ä½¿ç”¨çš„æ˜¯äº¤å‰ç†µï¼Œè®­ç»ƒæ¬¡æ•°æ€»å…±æ˜¯ 10 æ¬¡ï¼‰<br>è§‚å¯Ÿè¾“å‡ºç»“æœå¯è§ï¼ŒTrainingâ€¦<code>train Loss:0.5051 Acc:75.3450</code> Validingâ€¦ <code>valid Loss:0.4841 Acc:76.6600</code> (Time) <code>29520.38271522522</code>ï¼ˆçº¦ä¸º492åˆ†é’Ÿï¼‰<br>æ˜¾ç„¶ï¼Œè¿‡äºè€—æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨GPUsè®¡ç®—æ¥åŠ é€Ÿè®­ç»ƒï¼Œè¿™ä¸ªè¿‡ç¨‹éå¸¸ç®€å•å’Œæ–¹ä¾¿ï¼Œ<code>åªéœ€é‡æ–°å¯¹è¿™éƒ¨åˆ†å‚æ•°è¿›è¡Œç±»å‹è½¬æ¢å°±å¯ä»¥äº†</code>. ğŸ‘‡</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å‚æ•°è¿ç§»è‡³ GPUs çš„å…·ä½“ä»£ç </span></span><br><span class="line">model = model.cuda()</span><br><span class="line">X, y = Variable(X.cuda()), Variable(y.cuda())</span><br></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œåœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆç¡®è®¤GPUsç¡¬ä»¶æ˜¯å¦å¯ç”¨ï¼Œ å…·ä½“çš„ä»£ç å¦‚ä¸‹:</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(torch.cuda.is_available ())   <span class="comment"># è‹¥è¿”å›çš„å€¼æ˜¯Trueï¼Œè¿™è¯´æ˜æˆ‘ä»¬çš„GPUså·²ç»å…·å¤‡äº†è¢«ä½¿ç”¨çš„å…¨éƒ¨æ¡ä»¶</span></span><br></pre></td></tr></table></figure><p>è§‚å¯Ÿè¾“å‡ºç»“æœå¯è§ï¼ŒTrainingâ€¦<code>train Loss:0.1903 Acc:92.4450</code> Validingâ€¦ <code>valid Loss:0.2874 Acc:88.0400</code> (Time) <code>855.5901200771332</code>ï¼ˆçº¦ä¸º14åˆ†é’Ÿï¼‰<br>ä»ç»“æœå¯ä»¥çœ‹å‡ºï¼Œä¸ä»…éªŒè¯æµ‹è¯•é›†çš„å‡†ç¡®ç‡æå‡äº†è¿‘10%ï¼Œè€Œä¸”è€—æ—¶å¤§å¹…ä¸‹é™ã€‚ï¼ˆä½¿ç”¨GPUè®¡ç®—å‚æ•°ï¼Œæ•ˆç‡æœ‰æ˜æ˜¾æå‡ï¼‰</p><h4 id="è¿ç§»-VGG16"><a href="#è¿ç§»-VGG16" class="headerlink" title="è¿ç§» VGG16"></a>è¿ç§» VGG16</h4><p>å› ä¸ºæ‰¿æ‹…æ•´ä¸ªæ¨¡å‹è¾“å‡ºåˆ†ç±»å·¥ä½œçš„æ˜¯å·ç§¯ç¥ç»ç½‘ç»œæ¨¡å‹ä¸­çš„<code>å…¨è¿æ¥å±‚</code>ï¼Œæ‰€ä»¥åœ¨è¿ç§»å­¦ä¹ çš„è¿‡ç¨‹ ä¸­è°ƒæ•´æœ€å¤šçš„ä¹Ÿæ˜¯å…¨è¿æ¥å±‚éƒ¨åˆ†ã€‚å…¶åŸºæœ¬æ€è·¯æ˜¯<code>å†»ç»“</code>å·ç§¯ç¥ç»ç½‘ç»œä¸­å…¨è¿æ¥å±‚ä¹‹å‰çš„å…¨éƒ¨ç½‘ç»œå±‚æ¬¡ï¼Œè®©è¿™äº›è¢«å†»ç»“çš„ç½‘ç»œå±‚æ¬¡ä¸­çš„å‚æ•°åœ¨æ¨¡å‹çš„è®­ç»ƒè¿‡ç¨‹ä¸­ä¸è¿›è¡Œæ¢¯åº¦æ›´æ–° ï¼Œèƒ½å¤Ÿè¢«ä¼˜åŒ–çš„å‚æ•°ä»…ä»…æ˜¯æ²¡æœ‰è¢«å†»ç»“çš„å…¨è¿æ¥å±‚ï¼ˆå³è‡ªå®šä¹‰ä¿®æ”¹çš„æ–°çš„å…¨è¿æ¥å±‚ï¼‰çš„å…¨éƒ¨å‚æ•°ã€‚</p><p>ä¸‹é¢çœ‹çœ‹å…·ä½“çš„ä»£ç ã€‚é¦–å…ˆï¼Œè¿ç§»è¿‡æ¥çš„ VGG16æ¶æ„æ¨¡å‹åœ¨æœ€åè¾“å‡ºçš„ç»“æœæ˜¯ 1000 ä¸ª ï¼Œåœ¨æˆ‘ä»¬çš„é—®é¢˜ä¸­åªéœ€ä¸¤ä¸ªè¾“å‡ºç»“æœï¼Œæ‰€ä»¥å…¨è¿æ¥å±‚å¿…é¡»è¿›è¡Œè°ƒæ•´ã€‚æ¨¡å‹è°ƒæ•´çš„å…·ä½“<a href="https://github.com/Captainzj/PyTorch_Practice/blob/master/chapter-7/chapter-7.ipynb" target="_blank" rel="noopener">code</a>å¦‚ä¸‹:  </p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> parma <span class="keyword">in</span> model.parameters():</span><br><span class="line">    parma.requires_grad = <span class="keyword">False</span></span><br><span class="line"></span><br><span class="line">model.classifier = torch.nn.Sequential(torch.nn.Linear(<span class="number">25088</span>, <span class="number">4096</span>),</span><br><span class="line">                                           torch.nn.ReLU(),</span><br><span class="line">                                           torch.nn.Dropout(p=<span class="number">0.5</span>),</span><br><span class="line">                                           torch.nn.Linear(<span class="number">4096</span>, <span class="number">4096</span>),</span><br><span class="line">                                           torch.nn.ReLU(),</span><br><span class="line">                                           torch.nn.Dropout(p=<span class="number">0.5</span>),</span><br><span class="line">                                           torch.nn.Linear(<span class="number">4096</span>, <span class="number">2</span>))</span><br><span class="line"><span class="keyword">if</span> Use_gpu:</span><br><span class="line">    model = model.cuda()</span><br><span class="line"></span><br><span class="line">cost = torch.nn.CrossEntropyLoss()</span><br><span class="line">optimizer = torch.optim.Adam(model.classifier.parameters())</span><br></pre></td></tr></table></figure><p>è§‚å¯Ÿè¾“å‡ºç»“æœå¯è§ï¼ŒTrainingâ€¦<code>train Loss:0.0033 Acc:99.8950</code> Validingâ€¦ <code>valid Loss:0.0899 Acc:98.3200</code><br>å‡†ç¡®ç‡æœ‰æ˜æ˜¾æå‡ï¼Œè¯´æ˜äº†è¿ç§»å­¦ä¹ æ˜¯ä¸€ç§æå‡æ£‹å‹æ³›åŒ–èƒ½åŠ›çš„éå¸¸æœ‰æ•ˆçš„æ–¹æ³•ã€‚</p><h4 id="è¿ç§»ResNet50"><a href="#è¿ç§»ResNet50" class="headerlink" title="è¿ç§»ResNet50"></a>è¿ç§»ResNet50</h4><p>æ¨¡å‹è¿ç§»çš„ä»£ç ä¸º <code>model = models.resnet50(pretrained=True)</code><br>å¯¹ ResNet50 çš„å…¨è¿æ¥å±‚éƒ¨åˆ†è¿›è¡Œè°ƒæ•´ï¼Œå…·ä½“<a href="https://github.com/Captainzj/PyTorch_Practice/blob/master/chapter-7/chapter-7.ipynb" target="_blank" rel="noopener">code</a>è°ƒæ•´å¦‚ä¸‹:<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> parma <span class="keyword">in</span> model.parameters(): </span><br><span class="line">    parma . requires_grad = <span class="keyword">False</span></span><br><span class="line">    </span><br><span class="line">model.fc = torch.nn.Linear(<span class="number">2048</span>, <span class="number">2</span>)  <span class="comment"># å› ä¸ºResNet50ä¸­çš„å…¨è¿æ¥å±‚åªæœ‰ä¸€ å±‚ï¼Œæ‰€ä»¥å¯¹ä»£ç çš„è°ƒæ•´éå¸¸ç®€å•</span></span><br></pre></td></tr></table></figure></p><p>è§‚å¯Ÿè¾“å‡ºç»“æœå¯è§ï¼ŒTrainingâ€¦<code>train Loss:0.1349 Acc:95.8950</code> Validingâ€¦ <code>valid Loss:0.0929 Acc:97.7400</code> -&gt;&gt; å‡†ç¡®ç‡è¿‘ä¼¼ï¼ˆç•¥é€Šï¼‰äº VGG16</p><h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><ol><li>GPUè®­ç»ƒä¼˜äºCPUè®­ç»ƒ </li><li>è¿ç§»å­¦ä¹ å¯èŠ‚çº¦æ—¶é—´æˆæœ¬ï¼›ç›¸è¾ƒäºç›²ç›®åœ°ä»å¤´è®­ç»ƒï¼Œå‡†ç¡®ç‡ä¼šæœ‰æ›´å¥½çš„ä¿éšœ</li></ol><p>æ³¨ï¼šå¦‚æœæ¨¡å‹çš„è®­ç»ƒç»“æœä¸å¾ˆç†æƒ³ï¼Œåˆ™è¿˜å¯ä»¥è®­ç»ƒæ›´å¤šçš„æ¨¡å‹å±‚æ¬¡ï¼Œä¼˜åŒ–æ›´å¤šçš„æ¨¡å‹å‚æ•°ã€‚ </p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ã€é˜…è¯»æ—¶é—´ã€‘XXX min XXX words&lt;br&gt;ã€é˜…è¯»å†…å®¹ã€‘æ·±åº¦å­¦ä¹ ä¹‹PyTorchå®æˆ˜è®¡ç®—æœºè§†è§‰ ç¬¬7ç« &lt;/p&gt;
    
    </summary>
    
    
      <category term="PyTorch" scheme="http://yoursite.com/tags/PyTorch/"/>
    
  </entry>
  
  <entry>
    <title>PyQt4_For_Windows_10 </title>
    <link href="http://yoursite.com/2019/02/25/PyQt4-For-Windows-10/"/>
    <id>http://yoursite.com/2019/02/25/PyQt4-For-Windows-10/</id>
    <published>2019-02-25T12:14:37.000Z</published>
    <updated>2019-02-26T13:51:08.582Z</updated>
    
    <content type="html"><![CDATA[<p>ã€é˜…è¯»æ—¶é—´ã€‘XXX min XXX words<br>ã€é˜…è¯»å†…å®¹ã€‘â€¦â€¦</p><a id="more"></a><h3 id="å®‰è£…Python3-6"><a href="#å®‰è£…Python3-6" class="headerlink" title="å®‰è£…Python3.6"></a>å®‰è£…Python3.6</h3><ul><li>æ•™ç¨‹ï¼š<a href="https://blog.51cto.com/5001660/2084273" target="_blank" rel="noopener">windows 10 64ä½å®‰è£…Python3.6.4</a></li><li>ä¸‹è½½åœ°å€ï¼š<a href="https://www.python.org/downloads/windows/" target="_blank" rel="noopener">https://www.python.org/downloads/windows/</a></li><li>è™šæ‹ŸæœºParallels Desktop For Windows10 å®‰è£…è·¯å¾„ï¼š<code>C:\Users\Captain\AppData\Local\Programs\Python\Python36</code></li></ul><h3 id="å®‰è£…PyQt4"><a href="#å®‰è£…PyQt4" class="headerlink" title="å®‰è£…PyQt4"></a>å®‰è£…PyQt4</h3><ul><li>æ•™ç¨‹ï¼š<a href="https://blog.csdn.net/Eppley/article/details/80240305" target="_blank" rel="noopener">Windows+Python 3.6ç¯å¢ƒä¸‹å®‰è£…PyQt4</a></li><li>ä¸‹è½½åœ°å€ï¼š<a href="http://www.lfd.uci.edu/~gohlke/pythonlibs/#pyqt4" target="_blank" rel="noopener">http://www.lfd.uci.edu/~gohlke/pythonlibs/#pyqt4</a> <a href="https://blog.csdn.net/js1568/article/details/80391761" target="_blank" rel="noopener">Win10ï¼ŒPython 3.6ç¯å¢ƒä¸‹å®‰è£…PyQt4</a></li><li><p>å®‰è£…æŒ‡ä»¤ï¼š<code>pip install PyQt4-4.11.4-cp36-cp36m-win_amd64.whl</code></p><center><br>  <img src="/2019/02/25/PyQt4-For-Windows-10/PyQt4ForWin10.png" width="500/"><br></center><ul><li>è‹¥æ‰§è¡ŒæŒ‡ä»¤â€pip install PyQt4-4.11.4-cp36-cp36m-win_amd64.whlâ€åï¼Œæç¤ºâ€PyQt4-4.11.4-cp36-cp36m-win_amd64.whl is not a supported wheel on this platform.â€  å¯èƒ½çš„åŸå› æ˜¯ pip ä¸ è¯¥.whl ç‰ˆæœ¬ä¸åŒ¹é… ï¼ˆpip å¯èƒ½é»˜è®¤è°ƒç”¨äº†Anaconda3çš„python 3.7ç‰ˆæœ¬ï¼‰ </li></ul></li></ul><h3 id="å®‰è£…Anaconda-For-win10"><a href="#å®‰è£…Anaconda-For-win10" class="headerlink" title="å®‰è£…Anaconda For win10"></a>å®‰è£…Anaconda For win10</h3><ul><li>æ•™ç¨‹ï¼š<a href="https://www.zhihu.com/question/50003671" target="_blank" rel="noopener">win10ï¼šAnacondaå®‰è£…å¥½å,å¦‚ä½•å®‰è£…pyqt4ï¼Ÿ</a></li><li>ä¸‹è½½åœ°å€ï¼š<a href="https://stackoverflow.com/questions/21637922/how-to-install-pyqt4-in-anaconda" target="_blank" rel="noopener">How to install PyQt4 in anaconda?</a></li><li>è™šæ‹ŸæœºParallels Desktop For Windows10 å®‰è£…è·¯å¾„ï¼š<code>C:\Users\Captain\Anaconda3</code></li></ul><h3 id="å®‰è£…å…¶ä»–è½¯ä»¶"><a href="#å®‰è£…å…¶ä»–è½¯ä»¶" class="headerlink" title="å®‰è£…å…¶ä»–è½¯ä»¶"></a>å®‰è£…å…¶ä»–è½¯ä»¶</h3><p>è™šæ‹ŸæœºParallels Desktop For Windows10 å®‰è£…è·¯å¾„ï¼š</p><ul><li>ç™¾åº¦ç½‘ç›˜ï¼š<code>C:\Users\Captain\AppData\Roaming\baidu\BaiduNetdisk</code></li><li>è¿…é›·ï¼š<code>C:\Program Files (x86)\Thunder Network\Thunder</code></li><li>VSCodeï¼š<code>C:\Users\Captain\AppData\Local\Programs\Microsoft VS Code</code></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ã€é˜…è¯»æ—¶é—´ã€‘XXX min XXX words&lt;br&gt;ã€é˜…è¯»å†…å®¹ã€‘â€¦â€¦&lt;/p&gt;
    
    </summary>
    
      <category term="ç¯å¢ƒé…ç½®" scheme="http://yoursite.com/categories/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"/>
    
    
      <category term="win10" scheme="http://yoursite.com/tags/win10/"/>
    
  </entry>
  
  <entry>
    <title>å¤è®°</title>
    <link href="http://yoursite.com/2019/02/23/%E5%8F%A4%E9%A3%8E%E5%B0%8F%E8%AE%B0/"/>
    <id>http://yoursite.com/2019/02/23/å¤é£å°è®°/</id>
    <published>2019-02-23T03:20:26.933Z</published>
    <updated>2019-03-08T11:01:47.781Z</updated>
    
    <content type="html"><![CDATA[<p>ã€é˜…è¯»æ—¶é—´ã€‘XXX min XXX words<br>ã€é˜…è¯»å†…å®¹ã€‘</p><a id="more"></a><h1 id="æ€ªå£å†å²"><a href="#æ€ªå£å†å²" class="headerlink" title="æ€ªå£å†å²"></a>æ€ªå£å†å²</h1><blockquote><p>è¯—ä¸è¿œæ–¹çœŸçš„å­˜åœ¨ï¼Œæ„¿ä½ ç›¸ä¿¡</p></blockquote><h2 id="æ–‡åŒ–è‡ªä¿¡"><a href="#æ–‡åŒ–è‡ªä¿¡" class="headerlink" title="æ–‡åŒ–è‡ªä¿¡"></a>æ–‡åŒ–è‡ªä¿¡</h2><ul><li>è®°å¾—2008å¹´å¥¥è¿ä¼šå¼€å¹•å¼ï¼ŒNBCçš„è§£è¯´å‘˜æœ‰ä¸€å¥è¯æˆ‘è‡³ä»Šè®°å¿†çŠ¹æ–°ï¼šâ€œè¿‡å»åä¸ªä¸–çºªé‡Œï¼Œä¸­å›½ğŸ‡¨ğŸ‡³æœ‰ä¹ä¸ªä¸–çºªéƒ½æ˜¯GDPä¸–ç•Œç¬¬ä¸€ã€‚â€œæ²¡é”™ï¼Œæˆ‘ä»¬åªæ˜¯ä¸å°å¿ƒè½åäº†ä¸€é˜µå­è€Œå·²ï¼Œå†çœ‹çœ‹å½“å¹´å’Œæˆ‘ä»¬é½å¤´å¹¶è¿›çš„æ–‡æ˜ï¼Œå¤åŸƒåŠå½“å¹´å¾ˆç‰›å§ï¼Ÿçœ‹çœ‹ç°åœ¨ï¼Œé™¤äº†é‡‘å­—å¡”å’Œè±¡å½¢æ–‡å­—ä»¥å¤–è¿˜å‰©ä¸‹ä»€ä¹ˆå‘¢ï¼Ÿå¤å°åº¦å­”é›€ç‹æœå¾ˆå‰å®³å§ï¼Œç°åœ¨å‘¢ï¼Ÿè¿åˆ›é€ å¤å°åº¦æ–‡æ˜çš„åä»£ç°åœ¨å…¨æ˜¯è´±æ°‘ï¼Œæˆ–è€…æ˜¯â€œä¸å¯æ¥è§¦â€çš„é˜¶å±‚ã€‚å’Œå…¶ä»–æ–‡æ˜ç›¸æ¯”ï¼Œæˆ‘ä»¬çš„æ–‡åŒ–å§‹ç»ˆæ²¡æœ‰æ–­ä»£ã€‚æˆ‘ä»¬æµ·ä¹ƒç™¾å·ï¼ŒåŒ…å®¹å…¼æµï¼ŒåŠ¡å®å˜é€šï¼Œæˆ‘æƒ³è¿™å°±æ˜¯æˆ‘ä»¬çš„æ–‡åŒ–ä¼Ÿå¤§ä¹‹å¤„å§ï¼</li><li><p>æ¯å½“è¿™ä¸ªæ°‘æ—è¿™ä¸ªå›½å®¶é¢ä¸´ç”Ÿæ­»å­˜äº¡ä¹‹é™…â€¦</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">æ¹–å—äººä¼šè¯´ï¼šâ€œè‹¥ä¸­åç­äº¡ï¼Œé™¤éæ¹–å—æ­»å…‰ï¼â€</span><br><span class="line">é™•è¥¿äººè¯´ï¼šâ€œä¸¤ç‹¼å±±æˆ˜èƒ¡å„¿å¤©æ‘‡åœ°åŠ¨ï¼Œå¥½ç”·å„¿ä¸ºå›½å®¶ä½•æƒ§æ­»ç”Ÿï¼â€</span><br><span class="line">å››å·å¨ƒè¯´ï¼šâ€œä¸é€€å¤–æ•Œèª“ä¸å›å·ï¼â€</span><br><span class="line">æ²³å—äººè¯´ï¼šâ€œå›½ç ´å°šå¦‚æ­¤ï¼Œæˆ‘ä½•æƒœæ­¤å¤´ï¼â€</span><br><span class="line">æ±Ÿå—æ°‘è¯´ï¼šâ€œå¯„è¯­è¡Œäººä¼‘æ©é¼»ï¼Œæ´»äººä¸åŠæ­»äººé¦™ï¼â€</span><br><span class="line">æ²³åŒ—äººè¯´ï¼šâ€œç‡•èµµå¤šæœ‰æ…·æ…¨æ‚²æ­Œä¹‹å£«ï¼â€</span><br><span class="line">ä¸¤å¹¿äººæ°‘æ›´æ˜¯æœ‰ï¼šâ€œé¥®å†°åå¹´ï¼Œéš¾å‡‰çƒ­è¡€ï¼â€</span><br><span class="line">ä¸œåŒ—ä¸‰çœä¹Ÿæœ‰ï¼šâ€œä½•å¦‚èª“æ­»ä¸€æ‹¼ä»¥å°½å¤©èŒï¼â€</span><br></pre></td></tr></table></figure><p>è¿™å°±æ˜¯æˆ‘ä»¬å›½å®¶åˆ€åŠˆæ–§å‰çš„å¤©åœ°é—´åˆ°å¤„éƒ½æ˜¯ä¸æ„¿åšå¥´éš¶çš„äººä»¬ã€‚</p></li><li><p>ä¸­åæ–‡æ˜æ˜¯ç‹¬ç«‹åŸ¹è‚²å‡ºç²®é£Ÿä½œç‰©çš„5ä¸ªæ–‡æ˜ä¹‹ä¸€ï¼›ä¸­åæ–‡æ˜æ˜¯ç‹¬ç«‹é©¯åŒ–å‡ºåŠ¨ç‰©çš„4ä¸ªæ–‡æ˜ä¹‹ä¸€ï¼›ä¸­åæ°‘æ—æ˜¯ç‹¬ç«‹å‡ºç°è¯­è¨€çš„17ä¸ªæ–‡æ˜ä¹‹ä¸€ï¼›ä¸­åæ–‡æ˜ä¹Ÿæ˜¯æœ€æ—©ä½¿ç”¨é“å™¨çš„æ–‡æ˜ä¹‹ä¸€ã€‚æ›¾ç»æˆ‘çœ‹è¿‡å°æ¹¾ç½‘å‹è¯´è¿‡ä¸€è¿™æ ·çš„æ®µè¯ï¼šä¸­å›½è¿™ä¸ªæ°‘æ—çš„è‡ªå°Šå¿ƒå’Œè‡ªè±ªæ„Ÿæ¥è‡ªäºå†å²ï¼Œæ˜¯ä¸æ€ä¹ˆä¾èµ–äºå½“ä»Šçš„å¤–åœ¨ä¸–ç•Œè€Œå­˜åœ¨çš„ï¼Œå› ä¸ºå†å²ä¸å¯æ›´æ”¹ï¼Œæ‰€ä»¥æœ€ä¸ºç¨³å›ºã€‚</p></li><li><p>ä»è¥¿æ–¹æ®–æ°‘å²æ¥çœ‹ï¼Œæ‰€æœ‰è¢«è¥¿æ–¹åˆ—å¼ºå…¨åŠ›ä¾µç•¥æˆ–è€…æ®–æ°‘çš„æ°‘æ—é‡Œé¢ï¼Œè¯¸å¦‚å°åº¦ã€å°ç¬¬å®‰äººã€ç›é›…äººã€å°åŠ äººã€éæ´²é»‘äººã€ä¸œå—äºšäº¬æ—äººå’Œé©¬æ¥äººç›¸æ¯”ï¼Œåªæœ‰ä¸­å›½ç¿»èº«æœ€å¿«é€Ÿï¼Œä¹Ÿæœ€å½»åº•ã€‚å…¶ä¸­ä¸€ä¸ªæ ¹æœ¬çš„åŸå› å°±æ˜¯ä¸­å›½äººè‡ªèº«çš„è‡ªå°Šå¿ƒæœ€å¼ºï¼Œå¯¹è¥¿æ–¹åˆ—å¼ºæœ€ä¸æœæ°”ï¼Œä¹Ÿæœ€æ•¢æ–—äº‰ï¼å³ä½¿è´«ç©·è½åä¹Ÿä¸å¦¨ç¢ä¸­å›½äººâ€œæ‚ç„¶â€ç”¨å°ç±³åŠ æ­¥æªå»è·Ÿç¾å›½äººçš„å¦å…‹é£æœºåŸå­å¼¹æ­£é¢å¯¹æŠ—ï¼â€œé¥¿æ­»ä¸å¼¯è…°ï¼Œå†»æ­»è¿é£ç«™â€çš„æ€åº¦å»å¯¹å¾…è‹è”çš„åˆ¶è£ï¼åœ¨åƒä¸é¥±é¥­çš„æƒ…å†µä¸‹ä»ç„¶æå‡ºæ°¢å¼¹ã€æ´²é™…å¼¹é“å¯¼å¼¹å’Œå«æ˜Ÿï¼æ— è®ºæ²»ä¹±å…´è¡°ï¼Œä¸­å›½äººçš„æ°‘æ—è‡ªå°Šå¿ƒå§‹ç»ˆéƒ½åœ¨ã€‚åªå› æˆ‘ä»¬å­˜æ´»äº†5000å¹´ï¼Œè€ç¥–å®—å‘Šè¯‰æˆ‘ä»¬ç²¾å«å¯ä»¥å¡«æµ·ï¼Œåè£”å¯ä»¥å°„æ—¥ã€‚åªå› æˆ‘ä»¬5000å¹´çš„æ–‡åŒ–å‘Šè¯‰æˆ‘ä»¬â€œå¤©è¡Œå¥ï¼Œå›å­ä»¥è‡ªå¼ºä¸æ¯ã€‚â€</p></li><li><p>æœ€åç”¨ä¸‰åä¹ç”»ç”Ÿçš„ä¸€å¥è¯ä½œä¸ºæ€»ç»“ï¼šâ€œæˆ‘èµ°è¿‡çš„å±±è·¯æ˜¯å¾éœå®¢æ›¾ç»ç•™å®¿è¿‡çš„ï¼Œæˆ‘èµ°è¿‡çš„å…³éš˜æ˜¯å…­å›½æ›¾ç»é€¡å·¡è€Œä¸æ•¢å‰çš„ï¼Œæˆ‘é©»è¶³è¿œçœºçš„åŸæ¥¼æ˜¯äºè°¦æ›¾ç»åšå®šå®ˆå«è¿‡çš„ï¼Œæˆ‘ç°åœ¨èƒ½é©°éª‹ç”±ç–†çš„è¥¿åŒ—è‰åŸæ˜¯éœå»ç—…æ›¾ç»ä¸ºä¹‹è€Œå¥‹æˆ˜è¿‡çš„ï¼Œæˆ‘è¿˜èƒ½åƒåˆ°è‹è½¼å½“å¹´æ‰‹ä¸åœç®¸çš„çº¢çƒ§è‚‰ï¼Œæˆ‘è¿˜èƒ½é¥®åˆ°å¤ªç™½å½“å¹´ä¸¾æ¯é‚€æœˆçš„èŠ±é—´ç¾é…’ï¼Œæˆ‘è¿˜èƒ½åœ¨ä¼—å¤šæµ©åŠ«åè¯»åˆ°å‰äººçš„ç­‹éª¨è¡€è‚‰ï¼Œæˆ‘è¿˜èƒ½åœ¨å¤§å–œå¤§æ‚²åè„±å£è€Œå‡ºä¸€å¥ä»–ä»¬æ›¾ç»ç”¨æ¥å½¢å®¹è‡ªå·±çš„çˆ±æ¨ç¦»æ„ã€‚è¿™ç‰‡åœŸåœ°ç•™ç»™æˆ‘ä»¬åäººçš„ç¤¼ç‰©ï¼Œåº”è¯¥å°±è¿™ä¹ˆä¸¤ä»¶äº†å§ï¼Œä¸€ä»¶æ˜¯å†å²ï¼Œä¸€ä»¶æ˜¯æ–‡åŒ–ï¼Œå‰è€…å¯é‰´ä¸–ï¼Œåè€…å¯æ¶¦å¿ƒã€‚â€</p></li></ul><h2 id="ä¸­åæ–‡æ˜ä¸ºä½•æ²¡æœ‰æ–­ä»£"><a href="#ä¸­åæ–‡æ˜ä¸ºä½•æ²¡æœ‰æ–­ä»£" class="headerlink" title="ä¸­åæ–‡æ˜ä¸ºä½•æ²¡æœ‰æ–­ä»£"></a>ä¸­åæ–‡æ˜ä¸ºä½•æ²¡æœ‰æ–­ä»£</h2><blockquote><p>å› ä¸ºæœ‰è¿™æ ·ä¸€ç¾¤ä¼Ÿå¤§çš„äººï¼Œé€ å°±äº†ä¸€ä¸ªä¼Ÿå¤§çš„æ°‘æ—</p></blockquote><ul><li>å‘¨å…¬æ—¦â€”â€”æ–‡åŒ–çš„å¥ å®šè€…ï¼Œä¼ é—»å‘¨å…¬æ—¦ä½œã€Šå‘¨ç¤¼ã€‹ï¼›ç¬¬ä¸€æ¬¡å¼•å‡ºäº†å¤·å¤ä¹‹è¾©ï¼Œåœ¨æ–‡åŒ–ä¸Šï¼Œå½¢æˆäº†ä¸­å›½çš„æ–‡åŒ–èŒƒç•´ï¼Œã€Šå·¦ä¼ ã€‹æœ‰è¨€ï¼šâ€ä¸­å›½æœ‰ç¤¼ä»ªä¹‹å¤§ï¼Œæ•…ç§°å¤ï¼›æœ‰æœç« ä¹‹ç¾ï¼Œè°“ä¹‹åï¼›åå¤ï¼Œçš†å‡ºäºã€Šå‘¨ç¤¼ã€‹ï¼Œã€Šå‘¨ç¤¼ã€‹å‡ºè‡ªå‘¨å…¬æ—¦â€œå½“ä¹‹æ— æ„§çš„åå¤æ–‡åŒ–çš„å¥ å®šè€…ã€‚</li><li>å¬´æ”¿â€”â€”ç»Ÿä¸€çš„å®è·µè€…ï¼Œå†å²æœ€ç»ˆè®©æ­¦ç»Ÿæˆä¸ºä¸­å›½å½¢æˆçš„æœ€åä¸€æ­¥ï¼Œç§¦å§‹çš‡å¬´æ”¿çš„ä¹¦åŒæ–‡ï¼Œè½¦åŒè½¨ï¼Œè¡ŒåŒä¼¦çš„æ”¿ç­–ï¼Œè®©æˆ‘ä»¬è¿™ä¸ªå›½å®¶å¾€åï¼Œæ— è®ºåˆ†è£‚åˆ°ä½•ç§ç¨‹åº¦ï¼Œä¸€å®šä¼šæœ‰å…ˆè´¤å»åŠªåŠ›å†æ¬¡ç»Ÿä¸€ï¼Œä½¿ä¸­å›½æœ€ç»ˆæˆä¸ºä¸­å›½ğŸ‡¨ğŸ‡³ï¼Œè€Œä¸æ˜¯ç±»ä¼¼æ¬§ç›Ÿçš„å­˜åœ¨ï¼Œå¬´æ”¿ç»Ÿä¸€çš„å®è·µè€…ï¼Œåä¸–ä¹‹æ¥·æ¨¡</li><li>æ±‰æ­¦å¸åˆ˜å½»â€”â€”ç–†ç•Œçš„åˆ’å®šè€…ï¼Œä¸­å›½çš„å†œè€•å±æ€§ï¼Œæœ¬åº”è®©è¿™ä¸ªå›½å®¶çš„ç–†åŸŸå®šåœ¨ä¸­åŸæ°”å€™é€‚ä¸­ã€æ¹¿åº¦é€‚ä¸­çš„å¹³åŸåœ°åŒºã€‚ä½†æ˜¯ï¼Œæ­£æ˜¯å› ä¸ºæˆ‘ä»¬æ±‰æ­¦å¤§å¸çš„é›„å¿ƒï¼Œè®©è¿™ä¸ªå›½å®¶å»åšäº†ï¼Œæœ¬ä¸éœ€è¦å»åšçš„äº‹æƒ…ï¼Œä¹Ÿä¸ºåƒç§‹åä¸–æ‰“ä¸‹äº†ä¸€ä¸ªå¤§å¤§çš„ç–†åœŸæ¦‚å¿µï¼Œä¸ä»…åˆ’å®šäº†ä¹æ®µçº¿ï¼Œè¿˜å°†å¤§æ±‰çš„å†›æ——æ’åœ¨äº†é‚£é‡Œã€‚ä½ çŸ¥é“å—ï¼Ÿä¸ä»…ä¹Œé²æœ¨é½ã€å‘¼å’Œæµ©ç‰¹å¸‚éŸ³è¯‘çš„åœ°åï¼Œå…¶å®èŠœæ¹–ã€å§‘è‹ã€ä½™æ­ä¹Ÿéƒ½æ˜¯éŸ³è¯‘ã€‚</li><li>ç‹å¯¼â€”â€”ç«ç§çš„ä¿æŠ¤è€…ï¼Œå½“å¹´äº”èƒ¡ä¹‹ä¹±ï¼Œä¸­åæ°‘æ—åœ¨å¤–æ—çš„å± æ€ä¸‹æ¥è¿‘ç­æ—ã€‚è¿™æ˜¯æˆ‘ä»¬ç¬¬ä¸€ä¸ªæœ€å±é™©çš„æ—¶åˆ»ï¼Œå¾ˆå¯èƒ½åƒå…¶ä»–æ–‡æ˜é‚£æ ·ï¼ŒåŸƒåŠæ–‡æ˜ã€å¤å°åº¦æ–‡æ˜ä¸€æ ·åªç•™åœ¨é—è¿¹ä¹‹ä¸­ï¼Œä½†æ­£æ˜¯ç‹å¯¼åŠ›ä¸»å—è¿ï¼Œè¡£å† å—æ¸¡ï¼Œä½¿å¾—ä¸­åæ°‘æ—åœ¨é•¿æ±Ÿä»¥å—ç•™ä¸‹äº†ç«ç§ï¼Œç­‰å¾…å†æ¬¡ç‡ƒçƒ§çš„æ—¶åˆ»ï¼Œä»¥è‡´æˆ‘ä»¬çš„æ–‡æ˜ä»æœªæœ‰è¿‡æ–­ä»£ã€‚</li><li>æ¨å¹¿â€”â€”éœ¸æƒçš„åˆ¶å®šè€…ï¼Œéš‹ç‚€å¸ç¦»åƒå¤ä¸€å¸åªå·®ä¸€æ­¥ï¼Œä¸ä»…ä¸€æ¡å¤§è¿æ²³æ˜¯å—åŒ—ç»ˆæˆä¸€ä½“ï¼Œä¼é«˜å¥ä¸½ã€å¾çªå¥ï¼Œæ•´ä¸ªåˆå”å’Œç››å”éƒ½åœ¨å»¶ç»­éš‹ç‚€å¸çš„å›½ç­–ï¼Œéš‹å”æ˜¯ä¸ä¿®é•¿åŸçš„ï¼Œé«˜å¥ä¸½çš„è¦†ç­ä¹Ÿè®©æ•´ä¸ªä¸œäºšåœ°åŒºæ°¸è¿œä¸å†å­˜åœ¨ç¬¬äºŒä¸ªå†œè€•æ–‡æ˜å¤§å›½ã€‚</li><li>æœ±å…ƒç’‹â€”â€”æ–‡æ˜çš„æ‹¯æ•‘è€…ï¼Œè¿™æ˜¯æˆ‘ä»¬ç¬¬äºŒä¸ªæœ€å±é™©çš„æ—¶åˆ»ï¼Œåœ¨è’™å…ƒå¸å›½å› ç¼ºå°‘æ–‡åŒ–å› ç´ ï¼Œå°†è‡ªå·±å’Œæ•´ä¸ªä¸­å›½å½»åº•åˆ’å‘ä¼Šæ–¯å…°æ•™æ–‡åŒ–ä¹‹å‰ï¼Œä»¥æœ±å…ƒç’‹ä¸ºä»£è¡¨çš„ä¸­å›½äººå†æ¬¡ç«™äº†å‡ºæ¥ï¼Œè®©ä¸œæ–¹çš„æµ·è¾¹ä¾ç„¶æ˜¯å„’ç”Ÿçš„å›½å®¶è€Œä¸æ˜¯é˜¿è¨‡çš„å›½åº¦ã€‚</li></ul><h2 id="ä¸­å›½ç¥è¯æ³¨å®šåå¤ä¹‹å…‰"><a href="#ä¸­å›½ç¥è¯æ³¨å®šåå¤ä¹‹å…‰" class="headerlink" title="ä¸­å›½ç¥è¯æ³¨å®šåå¤ä¹‹å…‰"></a>ä¸­å›½ç¥è¯æ³¨å®šåå¤ä¹‹å…‰</h2><ul><li>æœ‰äººé—®ï¼Œä»€ä¹ˆæ ·çš„ç²¾ç¥æ˜¯åˆ»åœ¨æ¯ä¸ªä¸­å›½äººçš„éª¨å­é‡Œçš„ï¼Œæˆ‘è§‰å¾—å¯ä»¥åœ¨æˆ‘ä»¬çš„ç¥è¯ä¸­å¯»æ‰¾åˆ°ç­”æ¡ˆã€‚åœ¨è¥¿æ–¹çš„ç¥è¯ä¸­ï¼Œç«æ˜¯ä¸Šå¸èµäºˆçš„ï¼›åœ¨å¸Œè…Šç¥è¯é‡Œï¼Œç«æ˜¯æ™®ç½—ç±³ä¿®æ–¯å·æ¥çš„ï¼›è€Œåœ¨ä¸­å›½çš„ç¥è¯é‡Œï¼Œç«æ˜¯äººä»¬é’»æœ¨å–ç«åšéŸ§ä¸æ‹”æ‘©æ“¦å‡ºæ¥çš„ï¼è¿™å°±æ˜¯ä¸­å›½äººï¼Œä¸åŒäºä¸–ç•Œå…¶ä»–ä»»ä½•æ°‘æ—çš„åœ°æ–¹ã€‚</li><li>åœ¨ç¥è¯ä¸­ï¼Œé¢å¯¹æœ«æ—¥æ´ªæ°´ï¼Œè¥¿æ–¹äººæ˜¯åœ¨è¯ºäºšæ–¹èˆŸé‡Œèº²é¿ï¼›ä½†æ˜¯åœ¨æˆ‘ä»¬çš„ç¥è¯é‡Œï¼Œæ˜¯å¤§ç¦¹æ²»æ°´ï¼Œä¸‰è¿‡å®¶é—¨è€Œä¸å…¥ã€‚å½“æˆ‘ä»¬ä»”ç»†æ€è€ƒè¿™äº›ä»å°æˆ‘ä»¬è€³æ¿¡ç›®æŸ“çš„ç¥è¯æ•…äº‹ä¹‹åï¼ŒæŠ›å¼€é‚£äº›æ•…äº‹æƒ…èŠ‚ï¼Œæ‰¾åˆ°ç¥è¯é‡Œçš„çœŸæ­£æ ¸å¿ƒã€‚ä½ å°±ä¼šå‘ç°ä¸­å›½çš„ç¥è¯åªæœ‰ä¸¤ä¸ªå­—ï¼šæŠ—äº‰ã€‚</li><li>å‡å¦‚æœ‰ä¸€åº§å±±æŒ¡åœ¨ä½ çš„é—¨å‰ï¼Œä½ æ˜¯é€‰æ‹©æ¬å®¶è¿˜æ˜¯æŒ–éš§é“ï¼Ÿæ˜¾è€Œæ˜“è§ï¼Œæ¬å®¶æ˜¯æœ€å¥½çš„é€‰æ‹©ï¼›ä½†æ˜¯åœ¨æˆ‘ä»¬ä¸­åçš„ç¥è¯é‡Œï¼Œæˆ‘ä»¬æ˜¯å¿…é¡»æŠŠå±±ç§»å¼€çš„ã€‚è¿™å°±æ˜¯ç²¾ç¥å†…æ ¸ï¼Œå…¨ä¸–ç•Œåªæœ‰åœ¨æˆ‘ä»¬çš„ç¥è¯é‡Œèƒ½å¤Ÿæ‰¾åˆ°ï¼</li><li>å†æ¯”å¦‚ï¼Œæ¯ä¸ªå›½å®¶éƒ½æœ‰å¤ªé˜³ç¥çš„ä¼ è¯´ï¼Œåœ¨éƒ¨è½æ—¶ä»£ï¼Œå¤ªé˜³ç¥æ˜¯ç»å¯¹çš„æƒå¨ã€‚çºµè§ˆæ‰€æœ‰å¤ªé˜³ç¥çš„ç¥è¯ï¼Œä½ ä¼šå‘ç°åªæœ‰ä¸­å›½äººçš„ç¥è¯é‡Œæœ‰æ•¢äºæŒ‘æˆ˜å¤ªé˜³ç¥çš„æ•…äº‹ï¼šæ®è¯´é‚£ä¸ªæ—¶å€™å¤©ä¸Šæœ‰ä¹ä¸ªå¤ªé˜³ï¼Œå› ä¸ºå¤ªé˜³å¤ªçƒ­ï¼Œä»–ä¸€å£æ°”å°„ä¸‹æ¥å…«ä¸ªï¼Œå¤§æ¦‚å…¨ä¸–ç•Œä¹Ÿåªæœ‰ä¸­å›½ç¥è¯æ•¢è¿™ä¹ˆå†™äº†ã€‚æ¯ä¸€ä»£ä¸­å›½äººå°±æ˜¯å¬ç€è¿™æ ·çš„ç¥è¯æ•…äº‹é•¿å¤§ï¼Œå‹‡äºæŠ—äº‰çš„ç²¾ç¥å·²ç»æˆä¸ºæˆ‘ä»¬çš„é—ä¼ åŸºå› ã€‚</li><li>å½“æœ‰ä¸€ä¸ªå°å¥³å­©è¢«å¤§æµ·æ·¹æ­»ï¼ŒåŒ–ä½œä¸€åªç²¾å«é¸Ÿï¼Œæƒ³è¦æŠŠæµ·å¡«å¹³ï¼›æˆ‘ä»¬ä»æ²¡æœ‰å˜²ç¬‘è¿‡å¥¹çš„æ¸ºå°ã€‚å½“æœ‰ä¸€ä¸ªäººæŒ‘æˆ˜å¤©å¸çš„æƒå¨ï¼Œè¢«ç ä¸‹å¤´é¢…ï¼Œä»–æŒ¥èµ·æ–§å­ç»§ç»­æ–—äº‰ï¼›æˆ‘ä»¬ä»æ²¡æœ‰éª‚ä»–å¤§é€†ä¸é“ï¼Œç›¸åæˆ‘ä»¬å†™è¯—èµç¾ä»–ï¼šâ€œåˆ‘å¤©èˆå¹²æˆšï¼ŒçŒ›å¿—å›ºå¸¸åœ¨â€ã€‚å¯èƒ½æˆ‘ä»¬è‡ªå·±éƒ½æ„è¯†ä¸åˆ°ï¼Œä½†è¿™ç§â€œå†»æ­»è¿é£ç«™,é¥¿æ­»ä¸å¼¯è…°â€çš„ç²¾ç¥ï¼Œæ—©å·²åˆ»åœ¨äº†æˆ‘ä»¬çš„éª¨å­é‡Œã€‚</li><li>å¤§æ¦‚ä¹Ÿæ­£å› ä¸ºæ­¤ï¼Œè®©æˆ‘ä»¬äº”åƒå¹´æ¥ä¸€ç›´å±¹ç«‹åœ¨ä¸–ç•Œæ°‘æ—ä¹‹æ—ï¼Œå¹¶ä¸”å¤§éƒ¨åˆ†æ—¶é—´éƒ½æ˜¯ç¬¬ä¸€åï¼ğŸ‘</li></ul><h1 id="è‹±é›„è¿°è¯´"><a href="#è‹±é›„è¿°è¯´" class="headerlink" title="è‹±é›„è¿°è¯´"></a>è‹±é›„è¿°è¯´</h1><ul><li><a href="https://baike.baidu.com/item/ä¸œçš‡å¤ªä¸€/16006021" target="_blank" rel="noopener"><code>ä¸œçš‡å¤ªä¸€</code></a>,ä¸Šå¤å¤©åº­çš„ä¸»å®°è€…,ä¹ƒæ˜¯æ··æ²Œå­•è‚²è€Œå‡ºçš„å¤§ç¥ã€‚æ‰§æŒå…ˆå¤©è‡³å®æ··æ²Œé’Ÿï¼Œåœ¨ç›˜å¤å¼€å¤©è¾Ÿåœ°ï¼Œå¥³å¨²é€ äººé€ ç‰©ä¹‹é™…é•‡å‹é¸¿è’™ä¸–ç•Œã€‚ä¸œçš‡å¤ªä¸€å¥‰é¸¿é’§é“äººæ³•æ—¨ï¼ˆé¸¿é’§æ³•æ—¨ï¼šç›˜å¤å¼€å¤©ï¼Œå¥³å¨²é€ çµï¼Œå¤ªä¸€æ²»ä¸–ï¼‰ï¼šç»Ÿä¸€æ´ªè’ä¸‡æ—ï¼Œå¹¶ä¸”å°†æ´ªè’ä¸‡æ—åˆç§°ä¸ºâ€œå¦–æ—â€ã€‚å¼€åˆ›æ—·å¤ç»ä»Šçš„æ— ä¸Šéœ¸ä¸šï¼Œç™»ç«‹å¤©å¸ï¼Œè‡ªç§°ä¸œçš‡ã€‚ç«‹å¤©è§„æˆ’å¾‹ï¼Œä¸ºä¸‰ç•Œæ­£ç»Ÿè‡³å°Šã€‚</li></ul><h2 id="æ•…äº‹æ”¹ç¼–"><a href="#æ•…äº‹æ”¹ç¼–" class="headerlink" title="æ•…äº‹æ”¹ç¼–"></a>æ•…äº‹æ”¹ç¼–</h2><h3 id="æ‚Ÿç©º"><a href="#æ‚Ÿç©º" class="headerlink" title="æ‚Ÿç©º"></a>æ‚Ÿç©º</h3><p>å…«æˆ’æƒ…ç»ªä½æ²‰ï¼šçŒ´å“¥æˆ‘æœ‰ä¸€æ•…äº‹ï¼Œä½ æƒ³ä¸æƒ³å¬ï¼Œæ‚Ÿç©ºé—­ç€çœ¼ç›ä¸è€çƒ¦é“ï¼šä¸æƒ³å¬ï¼Œä¸æƒ³å¬â€¦å¹æ¯ä¸€å£°ï¼Œå…«æˆ’è½¬èº«ç¦»å»â€¦<br>å…«æˆ’èµ°åï¼Œæ‚Ÿç©ºçå¼€åŒçœ¼è½»ç¬‘ä¸€å£°ï¼šçœŸæ˜¯ä¸ªå‘†å­ï¼Œæ•°ç™¾å¹´æ¥ä¹Ÿåªä¼šè®²ä¸€ä¸ªæ•…äº‹ï¼Œéšååªè§æ‚Ÿç©ºä¸€æŠŠæ‰¯ä¸‹èº«ä¸Šè¢ˆè£Ÿï¼Œå”¤å‡ºç´«é‡‘æˆ˜ç”²ï¼Œæå‡ºè€³ä¸­é‡‘æ£’ï¼Œè½¬èº«æ¶ˆå¤±ä¸è§â€¦<br>æ²¡æœ‰äººçŸ¥é“æ‚Ÿç©ºå»äº†å“ªé‡Œï¼Œåªæ˜¯åæ¥å¬äººè¯´èµ·ï¼Œé‚£ä¸€æ—¥ï¼Œå±¹ç«‹åƒå¹´çš„å—å¤©é—¨çªç„¶å´©å¡Œï¼Œå¤©åº­è¯¸ç¥çš†æ˜¯èº«å—é‡ä¼¤ï¼Œå‡Œéœ„æ®¿å†…ä¹Ÿæ˜¯ä¹±æˆä¸€å›¢ï¼Œæ›´ä¸ºå¥‡æ€ªçš„æ˜¯é‚£æ·±å±…å¹¿å¯’å®«çš„å«¦å¨¥ä»™å­ï¼Œå´æ˜¯ä»æ­¤æ¶ˆå¤±ä¸è§â€¦</p><h3 id="çŒªå…«æˆ’"><a href="#çŒªå…«æˆ’" class="headerlink" title="çŒªå…«æˆ’"></a>çŒªå…«æˆ’</h3><p>è›®è’å›ä¹±ï¼Œä½¿å¾—ä¸‰ç•ŒåŠ¨è¡ä¸å®‰â€¦<br>è›®å¤·ä¹‹åœ°ï¼Œå¤©è“¬äº²ç‡åä¸‡æ°´å†›å‡»æºƒè›®è’ç™¾ä¸‡å†›å›¢ï¼Œå¹³å®šæˆ˜ä¹±ï¼Œä¸€æˆ˜æˆåï¼Œå”¯æå…»è™ä¸ºæ‚£ï¼Œåº†åŠŸå®´ä¸Šï¼Œç‰å¸æ¯é…’é‡Šå…µæƒï¼Œå°†å¤©è“¬è´¬å…¥å‡¡é—´â€¦<br>è¥¿è¡Œä¹‹é™…ï¼Œå…«æˆ’ä¸€è·¯çš†æ˜¯æ”¾è¡ä¸ç¾æ¸¸æˆäººé—´â€¦åˆ†å°å®Œæ¯•ï¼Œå‡€å›ä½¿è€…å¿ƒä¸­é‡Šç„¶ï¼Œåšä¸ªé—²äººï¼Œåƒé¥±ç©¿æš–ï¼Œè¯¸äº‹ä¸ç®¡â€¦æ•°å¹´ä¹‹åï¼ŒèŠ±æœå±±ä¸Šçƒˆç«ç„šçƒ§ï¼Œæ‚Ÿç©ºæš´æ€’ï¼Œç›´å†²å‡Œéœ„ï¼Œå´é­ä»™ä½›è¯¡è®¡ï¼Œå›°äºå¼‘ç¥é˜µä¸­â€¦<br>å‡€å›åº™ä¸­ï¼Œå…«æˆ’æ€’çåŒçœ¼ï¼šæ¬ºæˆ‘å¯ä»¥ï¼ŒåŠ¨æˆ‘å…„å¼Ÿï¼Œä¸è¡Œâ€¦<br>ä¹å°ºé’‰è€™åˆç°ï¼Œæ€’æ”»æ»¡å¤©ç¥ä½›ï¼Œå¥ˆä½•å­¤ç«‹æ— æ´â€¦<br>åƒé’§ä¸€å‘ä¹‹é™…ï¼Œåªå¬æˆ˜é¼“ä¹‹å£°æ’¼å¤©ï¼Œåä¸‡é“éª‘æ€’å¼ï¼šå…ƒå¸…ï¼Œå¤©æ²³æ°´å†›ï¼Œè¯·æˆ˜â€¦</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ã€é˜…è¯»æ—¶é—´ã€‘XXX min XXX words&lt;br&gt;ã€é˜…è¯»å†…å®¹ã€‘&lt;/p&gt;
    
    </summary>
    
      <category term="è¯­å½•" scheme="http://yoursite.com/categories/%E8%AF%AD%E5%BD%95/"/>
    
    
  </entry>
  
  <entry>
    <title>æœ¬ç§‘ç”Ÿæ¯•ä¸šè®¾è®¡ï¼ˆè®ºæ–‡ï¼‰å®‰æ’</title>
    <link href="http://yoursite.com/2019/02/22/%E6%9C%AC%E7%A7%91%E7%94%9F%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1%EF%BC%88%E8%AE%BA%E6%96%87%EF%BC%89%E5%AE%89%E6%8E%92/"/>
    <id>http://yoursite.com/2019/02/22/æœ¬ç§‘ç”Ÿæ¯•ä¸šè®¾è®¡ï¼ˆè®ºæ–‡ï¼‰å®‰æ’/</id>
    <published>2019-02-22T13:07:09.000Z</published>
    <updated>2019-02-22T14:59:02.030Z</updated>
    
    <content type="html"><![CDATA[<p>ã€é˜…è¯»æ—¶é—´ã€‘XXX min XXX words<br>ã€é˜…è¯»å†…å®¹ã€‘æµç¨‹ç®€è¿°</p><a id="more"></a><ul><li><a href="http://www.sohu.com/a/258607457_682145" target="_blank" rel="noopener">å–‡å­æ‰©éŸ³ä¸¨2015çº§æœ¬ç§‘ç”Ÿæ¯•ä¸šè®¾è®¡ï¼ˆè®ºæ–‡ï¼‰å·¥ä½œå®‰æ’ </a></li><li><a href="http://www.paper120.net/j4786.html" target="_blank" rel="noopener">è¥¿å®‰ç”µå­ç§‘æŠ€å¤§å­¦å…³äºæœ¬ç§‘æ¯•ä¸šç”Ÿæ¯•ä¸šè®¾è®¡è®ºæ–‡æ£€æµ‹æŸ¥é‡ç›¸å…³äº‹é¡¹çš„è¯´æ˜</a></li></ul><p>@timeline{</p><p>@item{</p><h6 id="2018-10æœˆ"><a href="#2018-10æœˆ" class="headerlink" title="2018.10æœˆ"></a>2018.10æœˆ</h6><p>â‘  å¯åŠ¨é€šçŸ¥</p><p>}</p><p>@item{</p><h6 id="2018-11æœˆ"><a href="#2018-11æœˆ" class="headerlink" title="2018.11æœˆ"></a>2018.11æœˆ</h6><p>â‘¡ ç¡®å®šé€‰é¢˜</p><p>}</p><p>@item{</p><h6 id="2019-1æœˆ"><a href="#2019-1æœˆ" class="headerlink" title="2019.1æœˆ"></a>2019.1æœˆ</h6><p>â‘¢ åˆæœŸæ£€æŸ¥ï¼š<br>æ£€æŸ¥å­¦ç”Ÿé€‰é¢˜åå¯¹èµ„æ–™çš„æ”¶é›†ã€é˜…è¯»åŠæŒæ¡æƒ…å†µï¼Œå¯¹ä»»åŠ¡çš„ç†Ÿæ‚‰ç†è§£æƒ…å†µï¼›â€¦</p><p>}</p><p>@item{</p><h6 id="2019-3æœˆä¸­æ—¬-4æœˆä¸Šæ—¬"><a href="#2019-3æœˆä¸­æ—¬-4æœˆä¸Šæ—¬" class="headerlink" title="2019.3æœˆä¸­æ—¬-4æœˆä¸Šæ—¬"></a>2019.3æœˆä¸­æ—¬-4æœˆä¸Šæ—¬</h6><p>â‘£ ä¸­æœŸæ£€æŸ¥ï¼š<br>å¡«å†™â€œæœ¬ç§‘ç”Ÿæ¯•ä¸šè®¾è®¡ï¼ˆè®ºæ–‡ï¼‰ä¸­æœŸæ£€æŸ¥è¡¨â€ï¼›<br>ç»„ç»‡å¤–å‡ºæ¯•ä¸šè®¾è®¡æ£€æŸ¥</p><p>}</p><p>@item{</p><h6 id="2019-5æœˆ"><a href="#2019-5æœˆ" class="headerlink" title="2019.5æœˆ"></a>2019.5æœˆ</h6><p>â‘¤ ç›²å®¡<br>æ•™åŠ¡å¤„ï¼šå…¬å¸ƒå„å­¦é™¢æ¯•ä¸šè®¾è®¡ï¼ˆè®ºæ–‡ï¼‰ç›²å®¡åå•ï¼Œç»„ç»‡ç›²å®¡å·¥ä½œ<br>å­¦é™¢ï¼šæŒ‰è¦æ±‚ä¸Šäº¤ç›²å®¡è®ºæ–‡ï¼›ç›²å®¡ç»“æœå…¬å¸ƒåï¼Œç»„ç»‡å­¦ç”Ÿè¿›è¡Œä¿®æ”¹</p><p>}</p><p>@item{</p><h6 id="2019-6æœˆ"><a href="#2019-6æœˆ" class="headerlink" title="2019.6æœˆ"></a>2019.6æœˆ</h6><p>â‘¥ ç­”è¾©åŠåæœŸæ£€æŸ¥æ£€æŸ¥æ™®æŸ¥è¯„ä¼°<br>æ£€æŸ¥è®ºæ–‡çš„æ ¼å¼è§„èŒƒã€æŒ‡å¯¼æ•™å¸ˆå¯¹è®ºæ–‡çš„å®¡é˜…æ‰¹æ”¹ã€<br>ç­”è¾©çš„ç»„ç»‡å®æ–½ã€è®ºæ–‡æˆç»©è¯„å®šâ€¦</p><p>}</p><p>@item{</p><h6 id="2019-7æœˆ"><a href="#2019-7æœˆ" class="headerlink" title="2019.7æœˆ"></a>2019.7æœˆ</h6><p>â‘¦ è®ºæ–‡è¯„ä¼˜</p><p>}</p><p>@item{</p><h6 id="2019-å¯’å‡å‰"><a href="#2019-å¯’å‡å‰" class="headerlink" title="2019 å¯’å‡å‰"></a>2019 å¯’å‡å‰</h6><p>â‘§ æ€»ç»“ã€å½’æ¡£</p><p>}</p><p>}</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ã€é˜…è¯»æ—¶é—´ã€‘XXX min XXX words&lt;br&gt;ã€é˜…è¯»å†…å®¹ã€‘æµç¨‹ç®€è¿°&lt;/p&gt;
    
    </summary>
    
      <category term="XD" scheme="http://yoursite.com/categories/XD/"/>
    
    
  </entry>
  
  <entry>
    <title>SPJæ–‡ä»¶ç®€ä»‹</title>
    <link href="http://yoursite.com/2019/02/18/SPJ%E6%96%87%E4%BB%B6%E7%AE%80%E4%BB%8B/"/>
    <id>http://yoursite.com/2019/02/18/SPJæ–‡ä»¶ç®€ä»‹/</id>
    <published>2019-02-18T11:01:58.000Z</published>
    <updated>2019-03-02T07:42:37.303Z</updated>
    
    <content type="html"><![CDATA[<p>ã€é˜…è¯»æ—¶é—´ã€‘XXX min XXX words<br>ã€é˜…è¯»å†…å®¹ã€‘spjæ–‡ä»¶æ˜¯å’ŒåŒ»ç–—çš„3ç»´æ•°æ®ç›¸å…³çš„æ–‡ä»¶ â€¦â€¦</p><a id="more"></a><p>åŒæ—¶äº†è§£ stl æ–‡ä»¶</p><h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><ul><li>.spjæ–‡ä»¶â€æ˜¯ç”±æ¸…åæ–¯ç»´å°”å…¬å¸è®¡ä»·è½¯ä»¶â€”â€œæ¸…å•è®¡ä»·2003â€ ç”Ÿæˆçš„é¡¹ç›®æ–‡ä»¶ï¼Œå®ƒæ˜¯é’ˆå¯¹å•ä½å·¥ç¨‹ç¼–åˆ¶çš„é€ ä»·æ–‡ä»¶ã€‚</li></ul><h3 id="How-to-open"><a href="#How-to-open" class="headerlink" title="How to open"></a>How to open</h3><p><a href="https://fileinfo.com/extension/spj" target="_blank" rel="noopener">.SPJ File Extension</a></p><ul><li>PhotoStage Slideshow Project <a href="https://www.nchsoftware.com/slideshow/index.html?ref=cj&amp;cjevent=1f0060ab350811e983be00a70a180514" target="_blank" rel="noopener">PhotoStage</a><ul><li>SPJ file is a <code>PhotoStage Slideshow Project</code>. NCH PhotoStage Slideshow Software is a software that enables you to create dynamic slideshows from your photos.</li></ul></li><li>Microsoft ICE Panorama Project <a href="https://www.microsoft.com/en-us/research/product/computational-photography-applications/image-composite-editor/" target="_blank" rel="noopener">ICE</a></li><li>SPSS Production Job File <a href="http://www.sdifen.com/spssstatistics25.html" target="_blank" rel="noopener">SPSS</a></li></ul><h3 id="How-to-use"><a href="#How-to-use" class="headerlink" title="How to use"></a>How to use</h3>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ã€é˜…è¯»æ—¶é—´ã€‘XXX min XXX words&lt;br&gt;ã€é˜…è¯»å†…å®¹ã€‘spjæ–‡ä»¶æ˜¯å’ŒåŒ»ç–—çš„3ç»´æ•°æ®ç›¸å…³çš„æ–‡ä»¶ â€¦â€¦&lt;/p&gt;
    
    </summary>
    
      <category term="ç²¾è¯Šç§‘æŠ€" scheme="http://yoursite.com/categories/%E7%B2%BE%E8%AF%8A%E7%A7%91%E6%8A%80/"/>
    
    
  </entry>
  
  <entry>
    <title>Frequently-used Software/ISO</title>
    <link href="http://yoursite.com/2019/02/15/Frequently-used-Software-ISO/"/>
    <id>http://yoursite.com/2019/02/15/Frequently-used-Software-ISO/</id>
    <published>2019-02-15T08:36:19.000Z</published>
    <updated>2019-02-15T14:55:38.744Z</updated>
    
    <content type="html"><![CDATA[<p>ã€é˜…è¯»æ—¶é—´ã€‘XXX min XXX words<br>ã€é˜…è¯»å†…å®¹ã€‘â€¦â€¦</p><a id="more"></a><h4 id="Windows-é•œåƒ"><a href="#Windows-é•œåƒ" class="headerlink" title="Windows é•œåƒ"></a>Windows é•œåƒ</h4><p><a href="http://msdn.itellyou.cn" target="_blank" rel="noopener">MSDN, æˆ‘å‘Šè¯‰ä½ </a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ã€é˜…è¯»æ—¶é—´ã€‘XXX min XXX words&lt;br&gt;ã€é˜…è¯»å†…å®¹ã€‘â€¦â€¦&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>PyQt5-Python-å®æˆ˜è¯¾ç¨‹ï¼ˆä¹ï¼‰</title>
    <link href="http://yoursite.com/2019/02/01/PyQt5-Python-%E5%AE%9E%E6%88%98%E8%AF%BE%E7%A8%8B%EF%BC%88%E4%B9%9D%EF%BC%89/"/>
    <id>http://yoursite.com/2019/02/01/PyQt5-Python-å®æˆ˜è¯¾ç¨‹ï¼ˆä¹ï¼‰/</id>
    <published>2019-01-31T16:01:53.000Z</published>
    <updated>2019-02-24T09:31:20.839Z</updated>
    
    <content type="html"><![CDATA[<p>ã€é˜…è¯»æ—¶é—´ã€‘XXX min XXX words<br>ã€é˜…è¯»å†…å®¹ã€‘â€¦â€¦</p><a id="more"></a><h2 id="çª—å£ã€ç»˜å›¾ä¸ç‰¹æ•ˆ"><a href="#çª—å£ã€ç»˜å›¾ä¸ç‰¹æ•ˆ" class="headerlink" title="çª—å£ã€ç»˜å›¾ä¸ç‰¹æ•ˆ"></a>çª—å£ã€ç»˜å›¾ä¸ç‰¹æ•ˆ</h2><h3 id="è®¾ç½®çª—å£é£æ ¼"><a href="#è®¾ç½®çª—å£é£æ ¼" class="headerlink" title="è®¾ç½®çª—å£é£æ ¼"></a>è®¾ç½®çª—å£é£æ ¼</h3><p><strong>Presentation</strong></p><center><br> <img src="/2019/02/01/PyQt5-Python-å®æˆ˜è¯¾ç¨‹ï¼ˆä¹ï¼‰/WindowStyle.png" width="500"><br></center><ul><li><p>è¦ç‚¹è¯´æ˜ï¼š<code>QApplication.setStyle(...)</code></p></li><li><p>å®Œæ•´ä»£ç </p></li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> PyQt5 <span class="keyword">import</span> QtCore</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WindowStyle</span><span class="params">(QWidget)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        self.setWindowTitle(<span class="string">'è®¾ç½®çª—å£é£æ ¼'</span>)</span><br><span class="line">        horizontalLayout = QHBoxLayout()</span><br><span class="line">        self.styleLabel = QLabel(<span class="string">'è®¾ç½®çª—å£é£æ ¼ï¼š'</span>)</span><br><span class="line">        self.styleComboBox = QComboBox()</span><br><span class="line">        self.styleComboBox.addItems(QStyleFactory.keys())</span><br><span class="line"></span><br><span class="line">        <span class="comment"># è·å–å½“å‰çª—å£çš„é£æ ¼</span></span><br><span class="line">        print(QApplication.style().objectName()) <span class="comment"># macintosh</span></span><br><span class="line">        index = self.styleComboBox.findText(QApplication.style().objectName(),QtCore.Qt.MatchFixedString)</span><br><span class="line"></span><br><span class="line">        self.styleComboBox.setCurrentIndex(index)</span><br><span class="line">        self.styleComboBox.activated[str].connect(self.handleStyleChanged)</span><br><span class="line"></span><br><span class="line">        horizontalLayout.addWidget(self.styleLabel)</span><br><span class="line">        horizontalLayout.addWidget(self.styleComboBox)</span><br><span class="line">        self.setLayout(horizontalLayout)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">handleStyleChanged</span><span class="params">(self,style)</span>:</span></span><br><span class="line">        QApplication.setStyle(style)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    app = QApplication(sys.argv)</span><br><span class="line">    form = WindowStyle()</span><br><span class="line">    form.show()</span><br><span class="line">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure><h3 id="è®¾ç½®çª—å£æ ·å¼"><a href="#è®¾ç½®çª—å£æ ·å¼" class="headerlink" title="è®¾ç½®çª—å£æ ·å¼"></a>è®¾ç½®çª—å£æ ·å¼</h3><p><strong>Presentation</strong></p><center><br> <img src="/2019/02/01/PyQt5-Python-å®æˆ˜è¯¾ç¨‹ï¼ˆä¹ï¼‰/WindowPattern.png" width="500"><br></center><ul><li><p>è¦ç‚¹è¯´æ˜ï¼š</p></li><li><p>å®Œæ•´ä»£ç </p></li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtCore <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WindowPattern</span><span class="params">(QMainWindow)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        self.resize(<span class="number">500</span>,<span class="number">260</span>)</span><br><span class="line">        self.setWindowTitle(<span class="string">'è®¾ç½®çª—å£çš„æ ·å¼'</span>)</span><br><span class="line"></span><br><span class="line">        self.setWindowFlags(Qt.WindowMaximizeButtonHint | Qt.WindowStaysOnTopHint )</span><br><span class="line">        self.setObjectName(<span class="string">"MainWindow"</span>)</span><br><span class="line">        self.setStyleSheet(<span class="string">"#MainWindow&#123;border-image:url(images/python.jpg);&#125;"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    app = QApplication(sys.argv)</span><br><span class="line">    form = WindowPattern()</span><br><span class="line">    form.show()</span><br><span class="line">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure><h3 id="ç”¨ä»£ç è®¾ç½®çª—å£çš„æœ€å¤§åŒ–å’Œæœ€å°åŒ–"><a href="#ç”¨ä»£ç è®¾ç½®çª—å£çš„æœ€å¤§åŒ–å’Œæœ€å°åŒ–" class="headerlink" title="ç”¨ä»£ç è®¾ç½®çª—å£çš„æœ€å¤§åŒ–å’Œæœ€å°åŒ–"></a>ç”¨ä»£ç è®¾ç½®çª—å£çš„æœ€å¤§åŒ–å’Œæœ€å°åŒ–</h3><p><strong>Presentation</strong></p><center><br> <img src="/2019/02/01/PyQt5-Python-å®æˆ˜è¯¾ç¨‹ï¼ˆä¹ï¼‰/WindowMaxMin.png" width="500"><br></center><ul><li><p>è¦ç‚¹è¯´æ˜</p></li><li><p>å®Œæ•´ä»£ç </p></li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtCore <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">### è‡ªå®šä¹‰çª—å£ç±»</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WindowMaxMin</span><span class="params">(QWidget)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">###  æ„é€ å‡½æ•°</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, parent=None)</span>:</span></span><br><span class="line">        <span class="string">'''æ„é€ å‡½æ•°'''</span></span><br><span class="line">        <span class="comment"># è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°</span></span><br><span class="line">        super(WindowMaxMin, self).__init__(parent)</span><br><span class="line">        self.resize(<span class="number">300</span>,<span class="number">400</span>)</span><br><span class="line">        self.setWindowTitle(<span class="string">"ç”¨ä»£ç æ§åˆ¶çª—å£çš„æœ€å¤§åŒ–å’Œæœ€å°åŒ–"</span>)</span><br><span class="line">        self.setWindowFlags(Qt.WindowMaximizeButtonHint)</span><br><span class="line"></span><br><span class="line">        layout = QVBoxLayout()</span><br><span class="line">        maxButton1 = QPushButton()</span><br><span class="line">        maxButton1.setText(<span class="string">'çª—å£æœ€å¤§åŒ–1'</span>)</span><br><span class="line">        maxButton1.clicked.connect(self.maximized1)</span><br><span class="line"></span><br><span class="line">        maxButton2 = QPushButton()</span><br><span class="line">        maxButton2.setText(<span class="string">'çª—å£æœ€å¤§åŒ–2'</span>)</span><br><span class="line">        maxButton2.clicked.connect(self.showMaximized)</span><br><span class="line"></span><br><span class="line">        minButton = QPushButton()</span><br><span class="line">        minButton.setText(<span class="string">'çª—å£æœ€å°åŒ–'</span>)</span><br><span class="line">        minButton.clicked.connect(self.showMinimized)</span><br><span class="line"></span><br><span class="line">        layout.addWidget(maxButton1)</span><br><span class="line">        layout.addWidget(maxButton2)</span><br><span class="line">        layout.addWidget(minButton)</span><br><span class="line">        self.setLayout(layout)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">maximized1</span><span class="params">(self)</span>:</span></span><br><span class="line">        desktop = QApplication.desktop()</span><br><span class="line">        <span class="comment"># è·å–æ¡Œé¢å¯ç”¨å°ºå¯¸</span></span><br><span class="line">        rect = desktop.availableGeometry()</span><br><span class="line"></span><br><span class="line">        self.setGeometry(rect)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    app = QApplication(sys.argv)</span><br><span class="line">    window = WindowMaxMin()</span><br><span class="line">    window.show()</span><br><span class="line">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure><h3 id="é¡¹ç›®å®æˆ˜ï¼šå®ç°ç»˜å›¾åº”ç”¨"><a href="#é¡¹ç›®å®æˆ˜ï¼šå®ç°ç»˜å›¾åº”ç”¨" class="headerlink" title="é¡¹ç›®å®æˆ˜ï¼šå®ç°ç»˜å›¾åº”ç”¨"></a>é¡¹ç›®å®æˆ˜ï¼šå®ç°ç»˜å›¾åº”ç”¨</h3><p><strong>Presentation</strong></p><center><br> <img src="/2019/02/01/PyQt5-Python-å®æˆ˜è¯¾ç¨‹ï¼ˆä¹ï¼‰/Drawing.png" width="500"><br></center><ul><li><p>è¦ç‚¹è¯´æ˜ï¼ˆéœ€è¦è§£å†³3ä¸ªæ ¸å¿ƒå†…å®¹ï¼‰</p><ol><li><p>å¦‚ä½•ç»˜å›¾<br>åœ¨paintEventæ–¹æ³•ä¸­ç»˜å›¾ï¼Œé€šè¿‡è°ƒç”¨updateæ–¹æ³•è§¦å‘painEventçš„è°ƒç”¨</p></li><li><p>åœ¨å“ªé‡Œç»˜å›¾<br>åœ¨ç™½è‰²èƒŒæ™¯çš„QPixmapå¯¹è±¡ä¸­ç»˜å›¾</p></li><li><p>å¦‚ä½•é€šè¿‡ç§»åŠ¨é¼ æ ‡è¿›è¡Œç»˜å›¾<br>é¼ æ ‡æ‹¥æœ‰3ä¸ªäº‹ä»¶ï¼š(ç¼ºä»»ä¸€ï¼Œä¸å¯è¿è¡Œ)<br>ï¼ˆ1ï¼‰é¼ æ ‡æŒ‰ä¸‹ï¼šmousePressEvent<br>ï¼ˆ2ï¼‰é¼ æ ‡ç§»åŠ¨ï¼šmouseMoveEvent<br>ï¼ˆ3ï¼‰é¼ æ ‡æŠ¬èµ·ï¼šmouseReleaseEvent</p></li></ol></li><li><p>å®Œæ•´ä»£ç </p></li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> QApplication, QWidget</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtGui <span class="keyword">import</span> QPainter, QPixmap</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtCore <span class="keyword">import</span> Qt, QPoint</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Drawing</span><span class="params">(QWidget)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, parent=None)</span>:</span></span><br><span class="line">        super(Drawing, self).__init__(parent)</span><br><span class="line">        self.setWindowTitle(<span class="string">"ç»˜å›¾åº”ç”¨"</span>)</span><br><span class="line">        self.pix = QPixmap()</span><br><span class="line">        self.lastPoint = QPoint()</span><br><span class="line">        self.endPoint = QPoint()</span><br><span class="line">        self.initUi()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">initUi</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.resize(<span class="number">600</span>, <span class="number">600</span>)</span><br><span class="line">        <span class="comment"># ç”»å¸ƒå¤§å°ä¸º400*400ï¼ŒèƒŒæ™¯ä¸ºç™½è‰²</span></span><br><span class="line">        self.pix = QPixmap(<span class="number">600</span>, <span class="number">600</span>)</span><br><span class="line">        self.pix.fill(Qt.white)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">paintEvent</span><span class="params">(self, event)</span>:</span></span><br><span class="line">        pp = QPainter(self.pix)</span><br><span class="line">        <span class="comment"># æ ¹æ®é¼ æ ‡æŒ‡é’ˆå‰åä¸¤ä¸ªä½ç½®ç»˜åˆ¶ç›´çº¿</span></span><br><span class="line">        pp.drawLine(self.lastPoint, self.endPoint)</span><br><span class="line">        <span class="comment"># è®©å‰ä¸€ä¸ªåæ ‡å€¼ç­‰äºåä¸€ä¸ªåæ ‡å€¼ï¼Œè¿™æ ·å°±èƒ½å®ç°ç”»å‡ºè¿ç»­çš„çº¿</span></span><br><span class="line">        self.lastPoint = self.endPoint</span><br><span class="line">        painter = QPainter(self)</span><br><span class="line">        painter.drawPixmap(<span class="number">0</span>, <span class="number">0</span>, self.pix)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">mousePressEvent</span><span class="params">(self, event)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> event.button() == Qt.LeftButton:</span><br><span class="line">            self.lastPoint = event.pos()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">mouseMoveEvent</span><span class="params">(self, event)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> event.buttons() <span class="keyword">and</span> Qt.LeftButton:</span><br><span class="line">            self.endPoint = event.pos()</span><br><span class="line">            self.update()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">mouseReleaseEvent</span><span class="params">(self, event)</span>:</span></span><br><span class="line">        <span class="comment"># é¼ æ ‡å·¦é”®é‡Šæ”¾</span></span><br><span class="line">        <span class="keyword">if</span> event.button() == Qt.LeftButton:</span><br><span class="line">            self.endPoint = event.pos()</span><br><span class="line">            <span class="comment"># è¿›è¡Œé‡æ–°ç»˜åˆ¶</span></span><br><span class="line">            self.update()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    app = QApplication(sys.argv)</span><br><span class="line">    form = Drawing()</span><br><span class="line">    form.show()</span><br><span class="line">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure><h3 id="QSSåŸºç¡€"><a href="#QSSåŸºç¡€" class="headerlink" title="QSSåŸºç¡€"></a>QSSåŸºç¡€</h3><p><strong>Presentation</strong></p><center><br> <img src="/2019/02/01/PyQt5-Python-å®æˆ˜è¯¾ç¨‹ï¼ˆä¹ï¼‰/BasicQSS.png" width="500"><br></center><ul><li>è¦ç‚¹è¯´æ˜<br>  QSSï¼ˆ<code>Qt Style Sheets</code>ï¼‰ Qtæ ·å¼è¡¨</li><li>å®Œæ•´ä»£ç </li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BasicQSS</span><span class="params">(QWidget)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        self.setWindowTitle(<span class="string">"QSSæ ·å¼"</span>)</span><br><span class="line">        btn1 = QPushButton(self)</span><br><span class="line">        btn1.setText(<span class="string">"æŒ‰é’®1"</span>)</span><br><span class="line">        btn2 = QPushButton(self)</span><br><span class="line">        btn2.setText(<span class="string">"æŒ‰é’®2"</span>)</span><br><span class="line">        btn3 = QPushButton(self)</span><br><span class="line">        btn3.setText(<span class="string">"æŒ‰é’®3"</span>)</span><br><span class="line"></span><br><span class="line">        vbox = QVBoxLayout()</span><br><span class="line">        vbox.addWidget(btn1)</span><br><span class="line">        vbox.addWidget(btn2)</span><br><span class="line">        vbox.addWidget(btn3)</span><br><span class="line"></span><br><span class="line">        self.setLayout(vbox)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    app = QApplication(sys.argv)</span><br><span class="line">    form = BasicQSS()</span><br><span class="line">    <span class="comment"># é€‰æ‹©å™¨</span></span><br><span class="line">    qssStyle = <span class="string">'''</span></span><br><span class="line"><span class="string">        QPushButton &#123;</span></span><br><span class="line"><span class="string">            background-color:pink</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    form.setStyleSheet(qssStyle)</span><br><span class="line">    form.show()</span><br><span class="line">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨QSSé€‰æ‹©å™¨è®¾ç½®æ§ä»¶æ ·å¼"><a href="#ä½¿ç”¨QSSé€‰æ‹©å™¨è®¾ç½®æ§ä»¶æ ·å¼" class="headerlink" title="ä½¿ç”¨QSSé€‰æ‹©å™¨è®¾ç½®æ§ä»¶æ ·å¼"></a>ä½¿ç”¨QSSé€‰æ‹©å™¨è®¾ç½®æ§ä»¶æ ·å¼</h3><p><strong>Presentation</strong></p><center><br> <img src="/2019/02/01/PyQt5-Python-å®æˆ˜è¯¾ç¨‹ï¼ˆä¹ï¼‰/QSSSelector.png" width="500"><br></center><ul><li><p>è¦ç‚¹è¯´æ˜</p></li><li><p>å®Œæ•´ä»£ç </p></li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> qdarkstyle</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QSSSelector</span><span class="params">(QWidget)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        self.setWindowTitle(<span class="string">"QSSæ ·å¼"</span>)</span><br><span class="line"></span><br><span class="line">        btn1 = QPushButton(self)</span><br><span class="line">        btn1.setText(<span class="string">"æŒ‰é’®1"</span>)</span><br><span class="line">        btn2 = QPushButton(self)</span><br><span class="line">        btn2.setProperty(<span class="string">'name'</span>,<span class="string">'btn2'</span>)</span><br><span class="line">        btn2.setText(<span class="string">"æŒ‰é’®2"</span>)</span><br><span class="line">        btn3 = QPushButton(self)</span><br><span class="line">        btn3.setProperty(<span class="string">'name'</span>,<span class="string">'btn3'</span>)</span><br><span class="line">        btn3.setText(<span class="string">"æŒ‰é’®3"</span>)</span><br><span class="line"></span><br><span class="line">        vbox = QVBoxLayout()</span><br><span class="line">        vbox.addWidget(btn1)</span><br><span class="line">        vbox.addWidget(btn2)</span><br><span class="line">        vbox.addWidget(btn3)</span><br><span class="line"></span><br><span class="line">        self.setLayout(vbox)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    app = QApplication(sys.argv)</span><br><span class="line">    form = QSSSelector()</span><br><span class="line">    <span class="comment"># é€‰æ‹©å™¨</span></span><br><span class="line">    qssStyle = <span class="string">'''</span></span><br><span class="line"><span class="string">        QPushButton[name="btn2"] &#123;</span></span><br><span class="line"><span class="string">            background-color:red;</span></span><br><span class="line"><span class="string">            color:yellow;</span></span><br><span class="line"><span class="string">            height:50;</span></span><br><span class="line"><span class="string">            font-size:30px;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        QPushButton[name="btn3"] &#123;</span></span><br><span class="line"><span class="string">            background-color:blue;</span></span><br><span class="line"><span class="string">            color:yellow;</span></span><br><span class="line"><span class="string">            height:25;</span></span><br><span class="line"><span class="string">            font-size:15px;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="comment"># form.setStyleSheet(qssStyle)</span></span><br><span class="line">    form.setStyleSheet(qdarkstyle.load_stylesheet_pyqt5())</span><br><span class="line">    form.show()</span><br><span class="line">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure><h3 id="QSSå­æ§ä»¶é€‰æ‹©å™¨"><a href="#QSSå­æ§ä»¶é€‰æ‹©å™¨" class="headerlink" title="QSSå­æ§ä»¶é€‰æ‹©å™¨"></a>QSSå­æ§ä»¶é€‰æ‹©å™¨</h3><p><strong>Presentation</strong></p><center><br> <img src="/2019/02/01/PyQt5-Python-å®æˆ˜è¯¾ç¨‹ï¼ˆä¹ï¼‰/QSSSubControl.png" width="500"><br></center><ul><li><p>è¦ç‚¹è¯´æ˜</p></li><li><p>å®Œæ•´ä»£ç </p></li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QSSSubControl</span><span class="params">(QWidget)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        self.setWindowTitle(<span class="string">"QSSå­æ§ä»¶é€‰æ‹©å™¨"</span>)</span><br><span class="line">        combo = QComboBox(self)</span><br><span class="line">        combo.setObjectName(<span class="string">"myComboBox"</span>)</span><br><span class="line">        combo.addItem(<span class="string">"Window"</span>)</span><br><span class="line">        combo.addItem(<span class="string">"Linux"</span>)</span><br><span class="line">        combo.addItem(<span class="string">"Mac OS X"</span>)</span><br><span class="line"></span><br><span class="line">        combo.move(<span class="number">50</span>,<span class="number">50</span>)</span><br><span class="line"></span><br><span class="line">        self.setGeometry(<span class="number">250</span>,<span class="number">200</span>,<span class="number">320</span>,<span class="number">150</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    app = QApplication(sys.argv)</span><br><span class="line">    form = QSSSubControl()</span><br><span class="line">    qssStyle = <span class="string">'''</span></span><br><span class="line"><span class="string">       QComboBox#myComboBox::drop-down &#123;</span></span><br><span class="line"><span class="string">           image:url(./images/dropdown.png)</span></span><br><span class="line"><span class="string">       &#125;</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    form.setStyleSheet(qssStyle)</span><br><span class="line">    form.show()</span><br><span class="line">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure><h3 id="QDarkStyleSheetæ ·å¼"><a href="#QDarkStyleSheetæ ·å¼" class="headerlink" title="QDarkStyleSheetæ ·å¼"></a>QDarkStyleSheetæ ·å¼</h3><p><strong>Presentation</strong></p><center><br> <img src="/2019/02/01/PyQt5-Python-å®æˆ˜è¯¾ç¨‹ï¼ˆä¹ï¼‰/DarkStyleSheet.png" width="500"><br></center><ul><li><p>è¦ç‚¹è¯´æ˜ï¼š<code>pip install qdarkstyle</code>/<code>conda install qdarkstyle</code></p></li><li><p>å®Œæ•´ä»£ç </p></li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> PyQt5 <span class="keyword">import</span> QtWidgets, QtCore</span><br><span class="line"><span class="comment"># make the example runnable without the need to install</span></span><br><span class="line"><span class="keyword">from</span> os.path <span class="keyword">import</span> abspath, dirname</span><br><span class="line">sys.path.insert(<span class="number">0</span>, abspath(dirname(abspath(__file__)) + <span class="string">'/..'</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> qdarkstyle</span><br><span class="line"><span class="keyword">import</span> ui.example_pyqt5_ui <span class="keyword">as</span> example_ui</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    Application entry point</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    logging.basicConfig(level=logging.DEBUG)</span><br><span class="line">    <span class="comment"># create the application and the main window</span></span><br><span class="line">    app = QtWidgets.QApplication(sys.argv)</span><br><span class="line">    window = QtWidgets.QMainWindow()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># setup ui</span></span><br><span class="line">    ui = example_ui.Ui_MainWindow()</span><br><span class="line">    ui.setupUi(window)</span><br><span class="line">    ui.bt_delay_popup.addActions([</span><br><span class="line">        ui.actionAction,</span><br><span class="line">        ui.actionAction_C</span><br><span class="line">    ])</span><br><span class="line">    ui.bt_instant_popup.addActions([</span><br><span class="line">        ui.actionAction,</span><br><span class="line">        ui.actionAction_C</span><br><span class="line">    ])</span><br><span class="line">    ui.bt_menu_button_popup.addActions([</span><br><span class="line">        ui.actionAction,</span><br><span class="line">        ui.actionAction_C</span><br><span class="line">    ])</span><br><span class="line">    item = QtWidgets.QTableWidgetItem(<span class="string">"Test"</span>)</span><br><span class="line">    item.setCheckState(QtCore.Qt.Checked)</span><br><span class="line">    ui.tableWidget.setItem(<span class="number">0</span>, <span class="number">0</span>, item)</span><br><span class="line">    window.setWindowTitle(<span class="string">"QDarkStyle example"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># tabify dock widgets to show bug #6</span></span><br><span class="line">    window.tabifyDockWidget(ui.dockWidget1, ui.dockWidget2)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># setup stylesheet</span></span><br><span class="line">    print(qdarkstyle.load_stylesheet_pyqt5())</span><br><span class="line">    app.setStyleSheet(qdarkstyle.load_stylesheet_pyqt5())</span><br><span class="line"></span><br><span class="line">    <span class="comment"># auto quit after 2s when testing on travis-ci</span></span><br><span class="line">    <span class="keyword">if</span> <span class="string">"--travis"</span> <span class="keyword">in</span> sys.argv:</span><br><span class="line">        QtCore.QTimer.singleShot(<span class="number">2000</span>, app.exit)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># run</span></span><br><span class="line">    window.show()</span><br><span class="line">    app.exec_()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><h3 id="3ç§è®¾ç½®èƒŒæ™¯è‰²å’ŒèƒŒæ™¯å›¾ç‰‡çš„æ–¹å¼"><a href="#3ç§è®¾ç½®èƒŒæ™¯è‰²å’ŒèƒŒæ™¯å›¾ç‰‡çš„æ–¹å¼" class="headerlink" title="3ç§è®¾ç½®èƒŒæ™¯è‰²å’ŒèƒŒæ™¯å›¾ç‰‡çš„æ–¹å¼"></a>3ç§è®¾ç½®èƒŒæ™¯è‰²å’ŒèƒŒæ™¯å›¾ç‰‡çš„æ–¹å¼</h3><ul><li>ä½¿ç”¨å¤šç§æ–¹å¼è®¾ç½®çª—å£èƒŒæ™¯è‰²å’ŒèƒŒæ™¯å›¾ç‰‡<ol><li>QSS</li><li>QPalette</li><li>ç›´æ¥ç»˜åˆ¶</li></ol></li></ul><p><strong>Presentation</strong></p><center><br> <img src="/2019/02/01/PyQt5-Python-å®æˆ˜è¯¾ç¨‹ï¼ˆä¹ï¼‰/Background.png" width="500"><br></center><ul><li>å®Œæ•´ä»£ç </li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">app = QApplication(sys.argv)</span><br><span class="line">win = QMainWindow()</span><br><span class="line">win.setWindowTitle(<span class="string">"èƒŒæ™¯å›¾ç‰‡"</span>)</span><br><span class="line">win.resize(<span class="number">350</span>,<span class="number">250</span>)</span><br><span class="line">win.setObjectName(<span class="string">"MainWindow"</span>)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string"># é€šè¿‡QSSåŠ¨æ€ä¿®æ”¹çª—å£çš„èƒŒæ™¯é¢œè‰²å’ŒèƒŒæ™¯å›¾ç‰‡</span></span><br><span class="line"><span class="string">#win.setStyleSheet("#MainWindow&#123;border-image:url(./images/python.jpg);&#125;")</span></span><br><span class="line"><span class="string">win.setStyleSheet("#MainWindow&#123;background-color:yellow&#125;")</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é€šè¿‡QPaletteè®¾ç½®èƒŒæ™¯å›¾ç‰‡å’ŒèƒŒæ™¯é¢œè‰²</span></span><br><span class="line"><span class="comment"># palette = QPalette()</span></span><br><span class="line"><span class="comment"># palette.setBrush(QPalette.Background,QBrush(QPixmap("./images/python.jpg")))</span></span><br><span class="line"><span class="comment"># palette.setColor(QPalette.Background,Qt.red)</span></span><br><span class="line"><span class="comment"># win.setPalette(palette)</span></span><br><span class="line"></span><br><span class="line">win.show()</span><br><span class="line">sys.exit(app.exec())</span><br></pre></td></tr></table></figure><p><strong>Presentation</strong></p><center><br> <img src="/2019/02/01/PyQt5-Python-å®æˆ˜è¯¾ç¨‹ï¼ˆä¹ï¼‰/Background1.png" width="500"><br></center><ul><li>å®Œæ•´ä»£ç </li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtGui <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtCore <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Background1</span><span class="params">(QWidget)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        self.setWindowTitle(<span class="string">"ç»˜åˆ¶èƒŒæ™¯é¢œè‰²"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">paintEvent</span><span class="params">(self, event)</span>:</span></span><br><span class="line">        painter = QPainter(self)</span><br><span class="line">        painter.setBrush(Qt.yellow)</span><br><span class="line">        painter.drawRect(self.rect())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    app = QApplication(sys.argv)</span><br><span class="line">    form = Background1()</span><br><span class="line"></span><br><span class="line">    form.show()</span><br><span class="line">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure><p><strong>Presentation</strong></p><center><br> <img src="/2019/02/01/PyQt5-Python-å®æˆ˜è¯¾ç¨‹ï¼ˆä¹ï¼‰/Background2.png" width="500"><br></center><ul><li>å®Œæ•´ä»£ç </li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtGui <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Background2</span><span class="params">(QWidget)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        self.setWindowTitle(<span class="string">"ç»˜åˆ¶èƒŒæ™¯å›¾ç‰‡"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">paintEvent</span><span class="params">(self, event)</span>:</span></span><br><span class="line">        painter = QPainter(self)</span><br><span class="line">        pixmap = QPixmap(<span class="string">'./images/screen1.jpg'</span>)</span><br><span class="line"></span><br><span class="line">        painter.drawPixmap(self.rect(),pixmap)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    app = QApplication(sys.argv)</span><br><span class="line">    form = Background2()</span><br><span class="line">    form.show()</span><br><span class="line">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure><h3 id="å®ç°ä¸è§„åˆ™çª—å£ï¼ˆå¼‚å½¢çª—å£ï¼‰"><a href="#å®ç°ä¸è§„åˆ™çª—å£ï¼ˆå¼‚å½¢çª—å£ï¼‰" class="headerlink" title="å®ç°ä¸è§„åˆ™çª—å£ï¼ˆå¼‚å½¢çª—å£ï¼‰"></a>å®ç°ä¸è§„åˆ™çª—å£ï¼ˆå¼‚å½¢çª—å£ï¼‰</h3><p><strong>Presentation</strong></p><center><br> <img src="/2019/02/01/PyQt5-Python-å®æˆ˜è¯¾ç¨‹ï¼ˆä¹ï¼‰/AbnormityWindow.png" width="500"><br></center><ul><li><p>è¦ç‚¹è¯´æ˜</p><ol><li>é€šè¿‡maskå®ç°å¼‚å½¢çª—å£</li><li>éœ€è¦ä¸€å¼ é€æ˜çš„pngå›¾ï¼Œé€æ˜éƒ¨åˆ†è¢«æ‰£å‡ºï¼Œå½¢æˆä¸€ä¸ªéçŸ©å½¢çš„åŒºåŸŸ</li><li>ç§»åŠ¨å’Œå…³é—­ä¸è§„åˆ™çª—å£</li></ol></li><li><p>å®Œæ•´ä»£ç </p></li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtGui <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtCore <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AbnormityWindow</span><span class="params">(QWidget)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        self.setWindowTitle(<span class="string">"å¼‚å½¢çª—å£"</span>)</span><br><span class="line">        self.pix = QBitmap(<span class="string">'./images/mask.png'</span>)</span><br><span class="line">        self.resize(self.pix.size())</span><br><span class="line">        self.setMask(self.pix)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">mousePressEvent</span><span class="params">(self, event)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> event.button() == Qt.LeftButton:</span><br><span class="line">            self.m_drag = <span class="keyword">True</span></span><br><span class="line">            self.m_DragPosition = event.globalPos() - self.pos()</span><br><span class="line">            self.setCursor(QCursor(Qt.OpenHandCursor))</span><br><span class="line">            print(<span class="string">"event.globalPos()"</span>,event.globalPos())  <span class="comment">#</span></span><br><span class="line">            print(<span class="string">"event.pos()"</span>,event.pos())</span><br><span class="line">            print(<span class="string">"self.pos()"</span>,self.pos())</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> event.button() == Qt.RightButton:</span><br><span class="line">            self.close()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">mouseMoveEvent</span><span class="params">(self, QMouseEvent)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> Qt.LeftButton <span class="keyword">and</span> self.m_drag:</span><br><span class="line">            <span class="comment"># å½“å·¦é”®ç§»åŠ¨çª—ä½“ä¿®æ”¹åç§»å€¼</span></span><br><span class="line">            <span class="comment"># QPoint</span></span><br><span class="line">            <span class="comment"># å®æ—¶è®¡ç®—çª—å£å·¦ä¸Šè§’åæ ‡</span></span><br><span class="line">            self.move(QMouseEvent.globalPos() - self.m_DragPosition)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">mouseReleaseEvent</span><span class="params">(self, QMouseEvent)</span>:</span></span><br><span class="line">        self.m_drag = <span class="keyword">False</span></span><br><span class="line">        self.setCursor(QCursor(Qt.ArrowCursor))</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">paintEvent</span><span class="params">(self, event)</span>:</span></span><br><span class="line">        painter = QPainter(self)</span><br><span class="line">        painter.drawPixmap(<span class="number">0</span>,<span class="number">0</span>,self.pix.width(),self.pix.height(),QPixmap(<span class="string">'./images/screen1.jpg'</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    app = QApplication(sys.argv)</span><br><span class="line">    form = AbnormityWindow()</span><br><span class="line">    form.show()</span><br><span class="line">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure><h3 id="ç§»åŠ¨å’Œå…³é—­ä¸è§„åˆ™çª—å£ï¼ˆå¼‚å½¢çª—å£ï¼‰"><a href="#ç§»åŠ¨å’Œå…³é—­ä¸è§„åˆ™çª—å£ï¼ˆå¼‚å½¢çª—å£ï¼‰" class="headerlink" title="ç§»åŠ¨å’Œå…³é—­ä¸è§„åˆ™çª—å£ï¼ˆå¼‚å½¢çª—å£ï¼‰"></a>ç§»åŠ¨å’Œå…³é—­ä¸è§„åˆ™çª—å£ï¼ˆå¼‚å½¢çª—å£ï¼‰</h3><h3 id="å®ç°å¼‚å½¢çª—å£åŠ¨ç”»æ•ˆæœ"><a href="#å®ç°å¼‚å½¢çª—å£åŠ¨ç”»æ•ˆæœ" class="headerlink" title="å®ç°å¼‚å½¢çª—å£åŠ¨ç”»æ•ˆæœ"></a>å®ç°å¼‚å½¢çª—å£åŠ¨ç”»æ•ˆæœ</h3><p><strong>Presentation</strong></p><center><br> <img src="/2019/02/01/PyQt5-Python-å®æˆ˜è¯¾ç¨‹ï¼ˆä¹ï¼‰/AnimationWindows.png" width="500"><br></center><ul><li><p>è¦ç‚¹è¯´æ˜</p></li><li><p>å®Œæ•´ä»£ç </p></li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> QApplication, QWidget</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtGui <span class="keyword">import</span> QPixmap, QPainter, QCursor</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtCore <span class="keyword">import</span> Qt, QTimer</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AnimationWindows</span><span class="params">(QWidget)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, parent=None)</span>:</span></span><br><span class="line">        super(AnimationWindows, self).__init__(parent)</span><br><span class="line">        self.i = <span class="number">1</span></span><br><span class="line">        self.mypix()</span><br><span class="line">        self.timer = QTimer()</span><br><span class="line">        self.timer.setInterval(<span class="number">500</span>)  <span class="comment"># 500æ¯«ç§’</span></span><br><span class="line">        self.timer.timeout.connect(self.timeChange)</span><br><span class="line">        self.timer.start()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ˜¾ç¤ºä¸è§„åˆ™ pic</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">mypix</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.update()</span><br><span class="line">        <span class="keyword">if</span> self.i == <span class="number">5</span>:</span><br><span class="line">            self.i = <span class="number">1</span></span><br><span class="line">        self.mypic = &#123;<span class="number">1</span>: <span class="string">'./images/left.png'</span>, <span class="number">2</span>: <span class="string">"./images/up.png"</span>, <span class="number">3</span>: <span class="string">'./images/right.png'</span>, <span class="number">4</span>: <span class="string">'./images/down.png'</span>&#125;</span><br><span class="line">        self.pix = QPixmap(self.mypic[self.i])</span><br><span class="line">        self.resize(self.pix.size())</span><br><span class="line">        self.setMask(self.pix.mask())</span><br><span class="line">        self.dragPosition = <span class="keyword">None</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># é¼ æ ‡åŒå‡»äº‹ä»¶</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">mouseDoubleClickEvent</span><span class="params">(self, event)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> event.button() == <span class="number">1</span>:</span><br><span class="line">            self.i += <span class="number">1</span></span><br><span class="line">            self.mypix()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ¯500æ¯«ç§’ä¿®æ”¹paint</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">timeChange</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.i += <span class="number">1</span></span><br><span class="line">        self.mypix()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">mousePressEvent</span><span class="params">(self, event)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> event.button() == Qt.LeftButton:</span><br><span class="line">            self.m_drag = <span class="keyword">True</span></span><br><span class="line">            self.m_DragPosition = event.globalPos() - self.pos()</span><br><span class="line"></span><br><span class="line">            self.setCursor(QCursor(Qt.OpenHandCursor))</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">mouseMoveEvent</span><span class="params">(self, QMouseEvent)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> Qt.LeftButton <span class="keyword">and</span> self.m_drag:</span><br><span class="line">            self.move(QMouseEvent.globalPos() - self.m_DragPosition)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">mouseReleaseEvent</span><span class="params">(self, QMouseEvent)</span>:</span></span><br><span class="line">        self.m_drag = <span class="keyword">False</span></span><br><span class="line">        self.setCursor(QCursor(Qt.ArrowCursor))</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">paintEvent</span><span class="params">(self, event)</span>:</span></span><br><span class="line">        painter = QPainter(self)</span><br><span class="line">        painter.drawPixmap(<span class="number">0</span>, <span class="number">0</span>, self.pix.width(), self.pix.height(), self.pix)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    app = QApplication(sys.argv)</span><br><span class="line">    form = AnimationWindows()</span><br><span class="line">    form.show()</span><br><span class="line">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure><h3 id="è£…è½½gifåŠ¨ç”»æ–‡ä»¶"><a href="#è£…è½½gifåŠ¨ç”»æ–‡ä»¶" class="headerlink" title="è£…è½½gifåŠ¨ç”»æ–‡ä»¶"></a>è£…è½½gifåŠ¨ç”»æ–‡ä»¶</h3><p><strong>Presentation</strong></p><center><br> <img src="/2019/02/01/PyQt5-Python-å®æˆ˜è¯¾ç¨‹ï¼ˆä¹ï¼‰/gifanim.png" width="500"><br></center><ul><li><p>è¦ç‚¹è¯´æ˜ï¼š <code>QMovie</code></p></li><li><p>å®Œæ•´ä»£ç </p></li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> QApplication,  QLabel  ,QWidget</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtCore <span class="keyword">import</span> Qt</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtGui <span class="keyword">import</span> QMovie</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LoadingGif</span><span class="params">(QWidget)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        self.label = QLabel(<span class="string">""</span>,self)</span><br><span class="line">        self.setFixedSize(<span class="number">128</span>,<span class="number">128</span>)</span><br><span class="line">        self.setWindowFlags(Qt.Dialog | Qt.CustomizeWindowHint)</span><br><span class="line">        self.movie = QMovie(<span class="string">'./images/loading.gif'</span>)</span><br><span class="line">        self.label.setMovie(self.movie)</span><br><span class="line">        self.movie.start()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    app = QApplication(sys.argv)</span><br><span class="line">    form = LoadingGif()</span><br><span class="line">    form.show()</span><br><span class="line">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨QSSä¸ºæ ‡ç­¾å’ŒæŒ‰é’®æ·»åŠ èƒŒæ™¯å›¾"><a href="#ä½¿ç”¨QSSä¸ºæ ‡ç­¾å’ŒæŒ‰é’®æ·»åŠ èƒŒæ™¯å›¾" class="headerlink" title="ä½¿ç”¨QSSä¸ºæ ‡ç­¾å’ŒæŒ‰é’®æ·»åŠ èƒŒæ™¯å›¾"></a>ä½¿ç”¨QSSä¸ºæ ‡ç­¾å’ŒæŒ‰é’®æ·»åŠ èƒŒæ™¯å›¾</h3><p><strong>Presentation</strong></p><center><br> <img src="/2019/02/01/PyQt5-Python-å®æˆ˜è¯¾ç¨‹ï¼ˆä¹ï¼‰/LabelButtonBackground.png" width="500"><br></center><ul><li><p>è¦ç‚¹è¯´æ˜</p></li><li><p>å®Œæ•´ä»£ç </p></li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LabelButtonBackground</span><span class="params">(QWidget)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        label1 = QLabel(self)</span><br><span class="line">        label1.setToolTip(<span class="string">'è¿™æ˜¯ä¸€ä¸ªæ–‡æœ¬æ ‡ç­¾'</span>)</span><br><span class="line">        label1.setStyleSheet(<span class="string">'QLabel&#123;border-image:url(./images/python.jpg);&#125;'</span>)</span><br><span class="line">        label1.setFixedWidth(<span class="number">476</span>)</span><br><span class="line">        label1.setFixedHeight(<span class="number">259</span>)</span><br><span class="line"></span><br><span class="line">        btn1 = QPushButton(self)</span><br><span class="line">        btn1.setObjectName(<span class="string">'btn1'</span>)</span><br><span class="line">        btn1.setMaximumSize(<span class="number">48</span>, <span class="number">48</span>)</span><br><span class="line">        btn1.setMinimumSize(<span class="number">48</span>, <span class="number">48</span>)</span><br><span class="line"></span><br><span class="line">        style = <span class="string">'''</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">            #btn1&#123;</span></span><br><span class="line"><span class="string">                border-radius:4px;</span></span><br><span class="line"><span class="string">                background-image:url('./images/add.png');</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">            #btn1:Pressed &#123;</span></span><br><span class="line"><span class="string">                background-image:url('./images/addhover.png');</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        '''</span></span><br><span class="line">        btn1.setStyleSheet(style)</span><br><span class="line"></span><br><span class="line">        vbox = QVBoxLayout()</span><br><span class="line">        vbox.addWidget(label1)</span><br><span class="line">        vbox.addStretch()</span><br><span class="line">        vbox.addWidget(btn1)</span><br><span class="line"></span><br><span class="line">        self.setLayout(vbox)</span><br><span class="line">        self.setWindowTitle(<span class="string">'ä½¿ç”¨QSSä¸ºæ ‡ç­¾å’ŒæŒ‰é’®æ·»åŠ èƒŒæ™¯å›¾'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    app = QApplication(sys.argv)</span><br><span class="line">    form = LabelButtonBackground()</span><br><span class="line">    form.show()</span><br><span class="line">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure><h3 id="ç¼©æ”¾å›¾ç‰‡"><a href="#ç¼©æ”¾å›¾ç‰‡" class="headerlink" title="ç¼©æ”¾å›¾ç‰‡"></a>ç¼©æ”¾å›¾ç‰‡</h3><p><strong>Presentation</strong></p><center><br> <img src="/2019/02/01/PyQt5-Python-å®æˆ˜è¯¾ç¨‹ï¼ˆä¹ï¼‰/ScaleImage.png" width="500"><br></center><ul><li><p>è¦ç‚¹è¯´æ˜ï¼š<code>QImage.scaled</code></p></li><li><p>å®Œæ•´ä»£ç </p></li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> QApplication, QLabel, QWidget, QVBoxLayout</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtGui <span class="keyword">import</span> QImage, QPixmap</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtCore <span class="keyword">import</span> Qt</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ScaleImage</span><span class="params">(QWidget)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        self.setWindowTitle(<span class="string">"å›¾ç‰‡å¤§å°ç¼©æ”¾ä¾‹å­"</span>)</span><br><span class="line">        filename = <span class="string">'./images/Cloudy_72px.png'</span></span><br><span class="line">        img = QImage(filename)</span><br><span class="line">        label1 = QLabel(self)</span><br><span class="line">        label1.setFixedWidth(<span class="number">200</span>)</span><br><span class="line">        label1.setFixedHeight(<span class="number">200</span>)</span><br><span class="line"></span><br><span class="line">        result = img.scaled(label1.width(),label1.height(),Qt.IgnoreAspectRatio,Qt.SmoothTransformation)</span><br><span class="line">        label1.setPixmap(QPixmap.fromImage(result))</span><br><span class="line"></span><br><span class="line">        vbox = QVBoxLayout()</span><br><span class="line">        vbox.addWidget(label1)</span><br><span class="line"></span><br><span class="line">        self.setLayout(vbox)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    app = QApplication(sys.argv)</span><br><span class="line">    win = ScaleImage()</span><br><span class="line">    win.show()</span><br><span class="line">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºé€æ˜å’ŒåŠé€æ˜çª—å£"><a href="#åˆ›å»ºé€æ˜å’ŒåŠé€æ˜çª—å£" class="headerlink" title="åˆ›å»ºé€æ˜å’ŒåŠé€æ˜çª—å£"></a>åˆ›å»ºé€æ˜å’ŒåŠé€æ˜çª—å£</h3><p><strong>Presentation</strong></p><center><br> <img src="/2019/02/01/PyQt5-Python-å®æˆ˜è¯¾ç¨‹ï¼ˆä¹ï¼‰/OpacityWindow.png" width="500"><br></center><ul><li><p>è¦ç‚¹è¯´æ˜ï¼š<code>win.setWindowOpacity(0.6)</code></p></li><li><p>å®Œæ•´ä»£ç </p></li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> PyQt5.Qt <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    app = QApplication(sys.argv)</span><br><span class="line">    win = QMainWindow()</span><br><span class="line">    win.setWindowTitle(<span class="string">'çª—å£çš„é€æ˜åº¦è®¾ç½®'</span>)</span><br><span class="line">    <span class="comment"># 0åˆ°1ï¼Œ1è¡¨ç¤ºä¸é€æ˜ï¼Œ0è¡¨ç¤ºå®Œå…¨é€æ˜</span></span><br><span class="line">    win.setWindowOpacity(<span class="number">0.6</span>)</span><br><span class="line"></span><br><span class="line">    button = QPushButton(<span class="string">'æˆ‘çš„æŒ‰é’®'</span>,win)</span><br><span class="line"></span><br><span class="line">    win.resize(<span class="number">400</span>,<span class="number">200</span>)</span><br><span class="line">    win.show()</span><br><span class="line">    sys.exit(app.exec())</span><br></pre></td></tr></table></figure><h3 id="è£…è½½QSSæ–‡ä»¶"><a href="#è£…è½½QSSæ–‡ä»¶" class="headerlink" title="è£…è½½QSSæ–‡ä»¶"></a>è£…è½½QSSæ–‡ä»¶</h3><p><strong>Presentation</strong></p><center><br> <img src="/2019/02/01/PyQt5-Python-å®æˆ˜è¯¾ç¨‹ï¼ˆä¹ï¼‰/LoadQSS.png" width="500"><br></center><ul><li><p>è¦ç‚¹è¯´æ˜</p></li><li><p>å®Œæ•´ä»£ç </p></li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> CommonHelper <span class="keyword">import</span> CommonHelper</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MainWindow</span><span class="params">(QMainWindow)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, parent=None)</span>:</span></span><br><span class="line">        super(MainWindow, self).__init__(parent)</span><br><span class="line">        self.resize(<span class="number">477</span>, <span class="number">258</span>)</span><br><span class="line">        self.setWindowTitle(<span class="string">"åŠ è½½QSSæ–‡ä»¶"</span>)</span><br><span class="line">        btn = QPushButton()</span><br><span class="line">        btn.setText(<span class="string">'è£…è½½QSSæ–‡ä»¶'</span>)</span><br><span class="line">        btn.setToolTip(<span class="string">'æç¤ºæ–‡æœ¬'</span>)</span><br><span class="line"></span><br><span class="line">        vbox = QVBoxLayout()</span><br><span class="line">        vbox.addWidget(btn)</span><br><span class="line">        btn.clicked.connect(self.onClick)</span><br><span class="line">        self.setLayout(vbox)</span><br><span class="line"></span><br><span class="line">        widget  = QWidget(self)</span><br><span class="line">        self.setCentralWidget(widget)</span><br><span class="line">        widget.setLayout(vbox)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">onClick</span><span class="params">(self)</span>:</span></span><br><span class="line">        styleFile = <span class="string">'./style.qss'</span></span><br><span class="line">        qssStyle = CommonHelper.readQSS(styleFile)</span><br><span class="line">        win.setStyleSheet(qssStyle)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    app = QApplication(sys.argv)</span><br><span class="line">    win = MainWindow()</span><br><span class="line">    win.show()</span><br><span class="line">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure><p>CommonHelper.py ğŸ‘‡</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CommonHelper</span>:</span></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">readQSS</span><span class="params">(style)</span>:</span></span><br><span class="line">        <span class="keyword">with</span> open(style,<span class="string">'r'</span>) <span class="keyword">as</span> f:</span><br><span class="line">            <span class="keyword">return</span> f.read()</span><br></pre></td></tr></table></figure><p>style.qss ğŸ‘‡</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">QMainWindow</span>&#123;</span><br><span class="line">    <span class="attribute">border-image</span>:<span class="built_in">url</span>(./images/python.jpg);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">QToolTip</span> &#123;</span><br><span class="line">   <span class="attribute">border</span>:<span class="number">1px</span> solid <span class="built_in">rgb</span>(45,45,45);</span><br><span class="line">   <span class="attribute">background</span>:white;</span><br><span class="line">   <span class="attribute">color</span>:red</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç”¨åŠ¨ç”»æ•ˆæœæ”¹å˜çª—å£çš„å°ºå¯¸"><a href="#ç”¨åŠ¨ç”»æ•ˆæœæ”¹å˜çª—å£çš„å°ºå¯¸" class="headerlink" title="ç”¨åŠ¨ç”»æ•ˆæœæ”¹å˜çª—å£çš„å°ºå¯¸"></a>ç”¨åŠ¨ç”»æ•ˆæœæ”¹å˜çª—å£çš„å°ºå¯¸</h3><p><strong>Presentation</strong></p><center><br> <img src="/2019/02/01/PyQt5-Python-å®æˆ˜è¯¾ç¨‹ï¼ˆä¹ï¼‰/AnimWindow.png" width="500"><br></center><ul><li><p>è¦ç‚¹è¯´æ˜ï¼š<code>QPropertyAnimation</code></p></li><li><p>å®Œæ•´ä»£ç </p></li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> PyQt5.QtCore <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AnimWindow</span><span class="params">(QWidget)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super(AnimWindow, self).__init__()</span><br><span class="line">        self.OrigHeight = <span class="number">50</span></span><br><span class="line">        self.ChangeHeight = <span class="number">150</span></span><br><span class="line">        self.setGeometry(QRect(<span class="number">500</span>, <span class="number">400</span>, <span class="number">150</span>, self.OrigHeight))</span><br><span class="line">        self.btn = QPushButton(<span class="string">'å±•å¼€'</span>, self)</span><br><span class="line">        self.btn.setGeometry(<span class="number">10</span>, <span class="number">10</span>, <span class="number">60</span>, <span class="number">35</span>)</span><br><span class="line">        self.btn.clicked.connect(self.change)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">change</span><span class="params">(self)</span>:</span></span><br><span class="line">        currentHeight = self.height()</span><br><span class="line">        <span class="keyword">if</span> self.OrigHeight == currentHeight:</span><br><span class="line">            startHeight = self.OrigHeight</span><br><span class="line">            endHeight = self.ChangeHeight</span><br><span class="line">            self.btn.setText(<span class="string">'æ”¶ç¼©'</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            startHeight = self.ChangeHeight</span><br><span class="line">            endHeight= self.OrigHeight</span><br><span class="line">            self.btn.setText(<span class="string">'å±•å¼€'</span>)</span><br><span class="line"></span><br><span class="line">        self.animation = QPropertyAnimation(self,<span class="string">b'geometry'</span>)</span><br><span class="line">        self.animation.setDuration(<span class="number">500</span>)</span><br><span class="line">        self.animation.setStartValue(QRect(<span class="number">500</span>,<span class="number">400</span>,<span class="number">150</span>,startHeight))</span><br><span class="line">        self.animation.setEndValue(QRect(<span class="number">500</span>,<span class="number">400</span>,<span class="number">150</span>,endHeight))</span><br><span class="line">        self.animation.start()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    app = QApplication(sys.argv)</span><br><span class="line">    window = AnimWindow()</span><br><span class="line">    window.show()</span><br><span class="line">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure><h3 id="ç”¨åŠ¨ç”»æ•ˆæœâ€“ä¸åŒé€Ÿåº¦ç§»åŠ¨çª—å£"><a href="#ç”¨åŠ¨ç”»æ•ˆæœâ€“ä¸åŒé€Ÿåº¦ç§»åŠ¨çª—å£" class="headerlink" title="ç”¨åŠ¨ç”»æ•ˆæœâ€“ä¸åŒé€Ÿåº¦ç§»åŠ¨çª—å£"></a>ç”¨åŠ¨ç”»æ•ˆæœâ€“ä¸åŒé€Ÿåº¦ç§»åŠ¨çª—å£</h3><ul><li>æ•ˆæœè¯´æ˜: ä¸¤ä¸ªçª—å£ï¼ˆwindow1ã€window2ï¼‰å¹¶è¡Œï¼ˆåŒæ—¶ï¼‰/ä¸²è¡Œï¼ˆä¸€å…ˆä¸€åï¼‰biubiubiuåŠ¨ç”»ç§»åŠ¨</li><li>å®Œæ•´ä»£ç </li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> PyQt5.QtCore <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line">app = QApplication(sys.argv)</span><br><span class="line"></span><br><span class="line">window1 = QMainWindow()</span><br><span class="line">window1.show()</span><br><span class="line">window2 = QMainWindow()</span><br><span class="line">window2.show()</span><br><span class="line"></span><br><span class="line">animation1 = QPropertyAnimation(window1, <span class="string">b'geometry'</span>)</span><br><span class="line">animation2 = QPropertyAnimation(window2, <span class="string">b'geometry'</span>)</span><br><span class="line"></span><br><span class="line">group = QParallelAnimationGroup()  <span class="comment"># å¹¶è¡Œ</span></span><br><span class="line"><span class="comment"># group = QSequentialAnimationGroup()  # ä¸²è¡Œ</span></span><br><span class="line"></span><br><span class="line">group.addAnimation(animation1)</span><br><span class="line">group.addAnimation(animation2)</span><br><span class="line"></span><br><span class="line">animation1.setDuration(<span class="number">3000</span>)</span><br><span class="line">animation1.setStartValue(QRect(<span class="number">0</span>,<span class="number">0</span>,<span class="number">100</span>,<span class="number">30</span>))</span><br><span class="line">animation1.setEndValue(QRect(<span class="number">250</span>,<span class="number">250</span>,<span class="number">100</span>,<span class="number">30</span>))</span><br><span class="line">animation1.setEasingCurve(QEasingCurve.OutBounce)</span><br><span class="line"></span><br><span class="line">animation2.setDuration(<span class="number">4000</span>)</span><br><span class="line">animation2.setStartValue(QRect(<span class="number">250</span>,<span class="number">150</span>,<span class="number">100</span>,<span class="number">30</span>))</span><br><span class="line">animation2.setEndValue(QRect(<span class="number">850</span>,<span class="number">250</span>,<span class="number">100</span>,<span class="number">30</span>))</span><br><span class="line">animation2.setEasingCurve(QEasingCurve.CosineCurve)</span><br><span class="line"></span><br><span class="line">group.start()</span><br><span class="line"></span><br><span class="line">sys.exit(app.exec())</span><br></pre></td></tr></table></figure><h2 id="å…¶ä»–åº”ç”¨"><a href="#å…¶ä»–åº”ç”¨" class="headerlink" title="å…¶ä»–åº”ç”¨"></a>å…¶ä»–åº”ç”¨</h2><h3 id="ç”¨PyInstalleræ‰“åŒ…PyQt5"><a href="#ç”¨PyInstalleræ‰“åŒ…PyQt5" class="headerlink" title="ç”¨PyInstalleræ‰“åŒ…PyQt5"></a>ç”¨PyInstalleræ‰“åŒ…PyQt5</h3><ul><li>è¦ç‚¹è¯´æ˜</li></ul><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pip install pyinstaller</span><br><span class="line"></span><br><span class="line">pyinstaller -Fw Calc.py</span><br><span class="line"></span><br><span class="line">-wï¼šä¸æ˜¾ç¤ºç»ˆç«¯</span><br><span class="line">-Fï¼šå°†æ‰€æœ‰çš„åº“æ‰“åŒ…æˆä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶</span><br></pre></td></tr></table></figure><h3 id="æ“ä½œSQLiteæ•°æ®åº“"><a href="#æ“ä½œSQLiteæ•°æ®åº“" class="headerlink" title="æ“ä½œSQLiteæ•°æ®åº“"></a>æ“ä½œSQLiteæ•°æ®åº“</h3><ul><li>å®Œæ•´ä»£ç </li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> PyQt5.QtSql <span class="keyword">import</span> QSqlDatabase,QSqlQuery</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">createDB</span><span class="params">()</span>:</span></span><br><span class="line">    db = QSqlDatabase.addDatabase(<span class="string">'QSQLITE'</span>)</span><br><span class="line">    <span class="comment"># æŒ‡å®šSQLiteæ•°æ®åº“çš„æ–‡ä»¶å</span></span><br><span class="line">    db.setDatabaseName(<span class="string">'./db/database.db'</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> db.open():</span><br><span class="line">        print(<span class="string">'æ— æ³•å»ºç«‹ä¸æ•°æ®åº“çš„è¿æ¥'</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line">    query = QSqlQuery()</span><br><span class="line">    query.exec(<span class="string">'create table people(id int primary key,name varchar(10),address varchar(50))'</span>)</span><br><span class="line">    query.exec(<span class="string">'insert into people values(1,"æå®","Shenyang")'</span>)</span><br><span class="line">    query.exec(<span class="string">'insert into people values(2,"è¶…äºº","å…‹æ˜Ÿ")'</span>)</span><br><span class="line">    db.close()</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">True</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    createDB()</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨å¯è§†åŒ–çš„æ–¹å¼å¯¹SQLiteæ•°æ®åº“è¿›è¡Œå¢ã€åˆ ã€æ”¹ã€æŸ¥æ“ä½œ"><a href="#ä½¿ç”¨å¯è§†åŒ–çš„æ–¹å¼å¯¹SQLiteæ•°æ®åº“è¿›è¡Œå¢ã€åˆ ã€æ”¹ã€æŸ¥æ“ä½œ" class="headerlink" title="ä½¿ç”¨å¯è§†åŒ–çš„æ–¹å¼å¯¹SQLiteæ•°æ®åº“è¿›è¡Œå¢ã€åˆ ã€æ”¹ã€æŸ¥æ“ä½œ"></a>ä½¿ç”¨å¯è§†åŒ–çš„æ–¹å¼å¯¹SQLiteæ•°æ®åº“è¿›è¡Œå¢ã€åˆ ã€æ”¹ã€æŸ¥æ“ä½œ</h3><p><strong>Presentation</strong></p><center><br> <img src="/2019/02/01/PyQt5-Python-å®æˆ˜è¯¾ç¨‹ï¼ˆä¹ï¼‰/DataGrid.png" width="500"><br></center><ul><li><p>è¦ç‚¹è¯´æ˜</p></li><li><p>å®Œæ•´ä»£ç </p></li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtCore <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtSql <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">initializeModel</span><span class="params">(model)</span>:</span></span><br><span class="line">    model.setTable(<span class="string">'people'</span>)</span><br><span class="line">    model.setEditStrategy(QSqlTableModel.OnFieldChange)</span><br><span class="line">    model.select()</span><br><span class="line">    model.setHeaderData(<span class="number">0</span>, Qt.Horizontal,<span class="string">'ID'</span>)</span><br><span class="line">    model.setHeaderData(<span class="number">1</span>, Qt.Horizontal, <span class="string">'å§“å'</span>)</span><br><span class="line">    model.setHeaderData(<span class="number">2</span>, Qt.Horizontal, <span class="string">'åœ°å€'</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">createView</span><span class="params">(title,model)</span>:</span></span><br><span class="line">    view = QTableView()</span><br><span class="line">    view.setModel(model)</span><br><span class="line">    view.setWindowTitle(title)</span><br><span class="line">    <span class="keyword">return</span> view</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">findrow</span><span class="params">(i)</span>:</span></span><br><span class="line">    delrow = i.row()</span><br><span class="line">    print(<span class="string">'find row=%s'</span> % str(delrow))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">addrow</span><span class="params">()</span>:</span></span><br><span class="line">    ret = model.insertRows(model.rowCount(),<span class="number">1</span>)</span><br><span class="line">    print(<span class="string">'insertRow=%s'</span> % str(ret))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    app = QApplication(sys.argv)</span><br><span class="line"></span><br><span class="line">    db = QSqlDatabase.addDatabase(<span class="string">'QSQLITE'</span>)</span><br><span class="line">    db.setDatabaseName(<span class="string">'./db/database.db'</span>)</span><br><span class="line"></span><br><span class="line">    model = QSqlTableModel()</span><br><span class="line">    delrow = <span class="number">-1</span></span><br><span class="line">    initializeModel(model)</span><br><span class="line">    view = createView(<span class="string">"å±•ç¤ºæ•°æ®"</span>,model)</span><br><span class="line">    view.clicked.connect(findrow)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    addBtn = QPushButton(<span class="string">'æ·»åŠ ä¸€è¡Œ'</span>)</span><br><span class="line">    addBtn.clicked.connect(addrow)</span><br><span class="line"></span><br><span class="line">    delBtn = QPushButton(<span class="string">'åˆ é™¤ä¸€è¡Œ'</span>)</span><br><span class="line">    delBtn.clicked.connect(<span class="keyword">lambda</span> :model.removeRow(view.currentIndex().row()))</span><br><span class="line"></span><br><span class="line">    layout = QVBoxLayout()</span><br><span class="line">    layout.addWidget(view)</span><br><span class="line">    layout.addWidget(addBtn)</span><br><span class="line">    layout.addWidget(delBtn)</span><br><span class="line"></span><br><span class="line">    dlg = QDialog()</span><br><span class="line">    dlg.setLayout(layout)</span><br><span class="line">    dlg.setWindowTitle(<span class="string">"Database Demo"</span>)</span><br><span class="line">    dlg.resize(<span class="number">500</span>,<span class="number">400</span>)</span><br><span class="line">    dlg.show()</span><br><span class="line">    sys.exit(app.exec())</span><br></pre></td></tr></table></figure><h3 id="åˆ†é¡µæ˜¾ç¤ºæ•°æ®"><a href="#åˆ†é¡µæ˜¾ç¤ºæ•°æ®" class="headerlink" title="åˆ†é¡µæ˜¾ç¤ºæ•°æ®"></a>åˆ†é¡µæ˜¾ç¤ºæ•°æ®</h3><p><strong>Presentation</strong></p><center><br> <img src="/2019/02/01/PyQt5-Python-å®æˆ˜è¯¾ç¨‹ï¼ˆä¹ï¼‰/DataGrid1.png" width="500"><br></center><ul><li><p>è¦ç‚¹è¯´æ˜ï¼š<code>limit n,m</code></p></li><li><p>å®Œæ•´ä»£ç ï¼š<a href="https://github.com/Captainzj/PyQt5_Practice/blob/master/src/ext/DataGrid1.py" target="_blank" rel="noopener">DataGrid1.py</a></p></li></ul><h3 id="ä½¿ç”¨PyQtGraphè¿›è¡Œæ•°æ®å¯è§†åŒ–"><a href="#ä½¿ç”¨PyQtGraphè¿›è¡Œæ•°æ®å¯è§†åŒ–" class="headerlink" title="ä½¿ç”¨PyQtGraphè¿›è¡Œæ•°æ®å¯è§†åŒ–"></a>ä½¿ç”¨PyQtGraphè¿›è¡Œæ•°æ®å¯è§†åŒ–</h3><p><strong>Presentation</strong></p><center><br> <img src="/2019/02/01/PyQt5-Python-å®æˆ˜è¯¾ç¨‹ï¼ˆä¹ï¼‰/Graph.png" width="500"><br></center><ul><li>å®Œæ•´ä»£ç </li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> QMainWindow, QApplication</span><br><span class="line"><span class="keyword">import</span> pyqtgraph <span class="keyword">as</span> pg</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> pyqtgraph_pyqt <span class="keyword">import</span> Ui_MainWindow</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MainWindow</span><span class="params">(QMainWindow, Ui_MainWindow)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, parent=None)</span>:</span></span><br><span class="line"></span><br><span class="line">        super(MainWindow, self).__init__(parent)</span><br><span class="line"></span><br><span class="line">        pg.setConfigOption(<span class="string">'background'</span>, <span class="string">'#f0f0f0'</span>)</span><br><span class="line">        pg.setConfigOption(<span class="string">'foreground'</span>, <span class="string">'d'</span>)</span><br><span class="line"></span><br><span class="line">        self.setupUi(self)</span><br><span class="line">        self.draw1()</span><br><span class="line">        self.draw2()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">draw1</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.pyqtgraph1.clear()</span><br><span class="line"></span><br><span class="line">        <span class="string">'''ç¬¬ä¸€ç§ç»˜å›¾æ–¹å¼'''</span></span><br><span class="line">        print(np.random.normal(size=<span class="number">120</span>))</span><br><span class="line">        self.pyqtgraph1.addPlot(title=<span class="string">"ç»˜å›¾å•æ¡çº¿"</span>, y=np.random.normal(size=<span class="number">120</span>), pen=pg.mkPen(color=<span class="string">'b'</span>, width=<span class="number">2</span>))</span><br><span class="line"></span><br><span class="line">        <span class="string">'''ç¬¬äºŒç§ç»˜å›¾æ–¹å¼'''</span></span><br><span class="line">        plt2 = self.pyqtgraph1.addPlot(title=<span class="string">'ç»˜åˆ¶å¤šæ¡çº¿'</span>)</span><br><span class="line"></span><br><span class="line">        plt2.plot(np.random.normal(size=<span class="number">150</span>), pen=pg.mkPen(color=<span class="string">'r'</span>, width=<span class="number">2</span>),</span><br><span class="line">                  name=<span class="string">"Red curve"</span>)</span><br><span class="line">        plt2.plot(np.random.normal(size=<span class="number">110</span>) + <span class="number">5</span>, pen=(<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>), name=<span class="string">"Green curve"</span>)</span><br><span class="line">        plt2.plot(np.random.normal(size=<span class="number">120</span>) + <span class="number">10</span>, pen=(<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), name=<span class="string">"Blue curve"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">draw2</span><span class="params">(self)</span>:</span></span><br><span class="line">        plt = self.pyqtgraph2.addPlot(title=<span class="string">'ç»˜åˆ¶æ¡çŠ¶å›¾'</span>)</span><br><span class="line">        x = np.arange(<span class="number">10</span>)</span><br><span class="line">        print(x)</span><br><span class="line">        y1 = np.sin(x)</span><br><span class="line">        y2 = <span class="number">1.1</span> * np.sin(x + <span class="number">1</span>)</span><br><span class="line">        y3 = <span class="number">1.2</span> * np.sin(x + <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">        bg1 = pg.BarGraphItem(x=x, height=y1, width=<span class="number">0.3</span>, brush=<span class="string">'r'</span>)</span><br><span class="line">        bg2 = pg.BarGraphItem(x=x + <span class="number">0.33</span>, height=y2, width=<span class="number">0.3</span>, brush=<span class="string">'g'</span>)</span><br><span class="line">        bg3 = pg.BarGraphItem(x=x + <span class="number">0.66</span>, height=y3, width=<span class="number">0.3</span>, brush=<span class="string">'b'</span>)</span><br><span class="line"></span><br><span class="line">        plt.addItem(bg1)</span><br><span class="line">        plt.addItem(bg2)</span><br><span class="line">        plt.addItem(bg3)</span><br><span class="line"></span><br><span class="line">        self.pyqtgraph2.nextRow()</span><br><span class="line"></span><br><span class="line">        p4 = self.pyqtgraph2.addPlot(title=<span class="string">"å‚æ•°å›¾+æ˜¾ç¤ºç½‘æ ¼"</span>)</span><br><span class="line">        x = np.cos(np.linspace(<span class="number">0</span>, <span class="number">2</span> * np.pi, <span class="number">1000</span>))</span><br><span class="line">        y = np.sin(np.linspace(<span class="number">0</span>, <span class="number">4</span> * np.pi, <span class="number">1000</span>))</span><br><span class="line">        p4.plot(x, y, pen=pg.mkPen(color=<span class="string">'d'</span>, width=<span class="number">2</span>))</span><br><span class="line">        <span class="comment">#p4.showGrid(x=True, y=True)  # æ˜¾ç¤ºç½‘æ ¼</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    app = QApplication(sys.argv)</span><br><span class="line">    ui = MainWindow()</span><br><span class="line">    ui.show()</span><br><span class="line">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure><p>pyqtgraph_pyqt.py ğŸ‘‡</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Form implementation generated from reading ui file 'pyqtgraph_pyqt.ui'</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Created by: PyQt5 UI code generator 5.9.2</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># WARNING! All changes made in this file will be lost!</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> PyQt5 <span class="keyword">import</span> QtCore, QtGui, QtWidgets</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Ui_MainWindow</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">setupUi</span><span class="params">(self, MainWindow)</span>:</span></span><br><span class="line">        MainWindow.setObjectName(<span class="string">"MainWindow"</span>)</span><br><span class="line">        MainWindow.resize(<span class="number">800</span>, <span class="number">600</span>)</span><br><span class="line">        self.centralwidget = QtWidgets.QWidget(MainWindow)</span><br><span class="line">        self.centralwidget.setObjectName(<span class="string">"centralwidget"</span>)</span><br><span class="line">        self.pyqtgraph1 = GraphicsLayoutWidget(self.centralwidget)</span><br><span class="line">        self.pyqtgraph1.setGeometry(QtCore.QRect(<span class="number">10</span>, <span class="number">10</span>, <span class="number">721</span>, <span class="number">251</span>))</span><br><span class="line">        self.pyqtgraph1.setObjectName(<span class="string">"pyqtgraph1"</span>)</span><br><span class="line">        self.pyqtgraph2 = GraphicsLayoutWidget(self.centralwidget)</span><br><span class="line">        self.pyqtgraph2.setGeometry(QtCore.QRect(<span class="number">10</span>, <span class="number">290</span>, <span class="number">501</span>, <span class="number">281</span>))</span><br><span class="line">        self.pyqtgraph2.setObjectName(<span class="string">"pyqtgraph2"</span>)</span><br><span class="line">        MainWindow.setCentralWidget(self.centralwidget)</span><br><span class="line">        self.menubar = QtWidgets.QMenuBar(MainWindow)</span><br><span class="line">        self.menubar.setGeometry(QtCore.QRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">800</span>, <span class="number">22</span>))</span><br><span class="line">        self.menubar.setObjectName(<span class="string">"menubar"</span>)</span><br><span class="line">        MainWindow.setMenuBar(self.menubar)</span><br><span class="line">        self.statusbar = QtWidgets.QStatusBar(MainWindow)</span><br><span class="line">        self.statusbar.setObjectName(<span class="string">"statusbar"</span>)</span><br><span class="line">        MainWindow.setStatusBar(self.statusbar)</span><br><span class="line"></span><br><span class="line">        self.retranslateUi(MainWindow)</span><br><span class="line">        QtCore.QMetaObject.connectSlotsByName(MainWindow)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">retranslateUi</span><span class="params">(self, MainWindow)</span>:</span></span><br><span class="line">        _translate = QtCore.QCoreApplication.translate</span><br><span class="line">        MainWindow.setWindowTitle(_translate(<span class="string">"MainWindow"</span>, <span class="string">"MainWindow"</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> pyqtgraph <span class="keyword">import</span> GraphicsLayoutWidget</span><br></pre></td></tr></table></figure><h3 id="é¡¹ç›®å®æˆ˜ï¼šå¤©æ°”ä¿¡æ¯æŸ¥è¯¢"><a href="#é¡¹ç›®å®æˆ˜ï¼šå¤©æ°”ä¿¡æ¯æŸ¥è¯¢" class="headerlink" title="é¡¹ç›®å®æˆ˜ï¼šå¤©æ°”ä¿¡æ¯æŸ¥è¯¢"></a>é¡¹ç›®å®æˆ˜ï¼šå¤©æ°”ä¿¡æ¯æŸ¥è¯¢</h3><p><strong>Presentation</strong></p><center><br> <img src="/2019/02/01/PyQt5-Python-å®æˆ˜è¯¾ç¨‹ï¼ˆä¹ï¼‰/CallWeatherWin.png" width="500"><br></center><ul><li><p>è¦ç‚¹è¯´æ˜</p></li><li><p>å®Œæ•´ä»£ç </p></li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys,requests</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> QApplication, QMainWindow</span><br><span class="line"><span class="keyword">from</span> WeatherWin <span class="keyword">import</span> Ui_Form</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MainWindow</span><span class="params">(QMainWindow)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, parent=None)</span>:</span></span><br><span class="line">        super(MainWindow, self).__init__(parent)</span><br><span class="line">        self.ui = Ui_Form()</span><br><span class="line">        self.ui.setupUi(self)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">queryWeather</span><span class="params">(self)</span>:</span></span><br><span class="line">        cityName = self.ui.weatherComboBox.currentText()</span><br><span class="line">        cityCode = self.transCityName(cityName)</span><br><span class="line"></span><br><span class="line">        rep = requests.get(<span class="string">'http://www.weather.com.cn/data/sk/'</span> + cityCode + <span class="string">'.html'</span>)</span><br><span class="line">        rep.encoding = <span class="string">'utf-8'</span></span><br><span class="line">        print(rep.json())</span><br><span class="line"></span><br><span class="line">        msg1 = <span class="string">'åŸå¸‚: %s'</span> % rep.json()[<span class="string">'weatherinfo'</span>][<span class="string">'city'</span>] + <span class="string">'\n'</span></span><br><span class="line">        msg2 = <span class="string">'é£å‘: %s'</span> % rep.json()[<span class="string">'weatherinfo'</span>][<span class="string">'WD'</span>] + <span class="string">'\n'</span></span><br><span class="line">        msg3 = <span class="string">'æ¸©åº¦: %s'</span> % rep.json()[<span class="string">'weatherinfo'</span>][<span class="string">'temp'</span>] + <span class="string">' åº¦'</span> + <span class="string">'\n'</span></span><br><span class="line">        msg4 = <span class="string">'é£åŠ›: %s'</span> % rep.json()[<span class="string">'weatherinfo'</span>][<span class="string">'WS'</span>] + <span class="string">'\n'</span></span><br><span class="line">        msg5 = <span class="string">'æ¹¿åº¦: %s'</span> % rep.json()[<span class="string">'weatherinfo'</span>][<span class="string">'SD'</span>] + <span class="string">'\n'</span></span><br><span class="line">        result = msg1 + msg2 + msg3 + msg4 + msg5</span><br><span class="line">        self.ui.resultText.setText(result)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">transCityName</span><span class="params">(self, cityName)</span>:</span></span><br><span class="line">        cityCode = <span class="string">''</span></span><br><span class="line">        <span class="keyword">if</span> cityName == <span class="string">'åŒ—äº¬'</span>:</span><br><span class="line">            cityCode = <span class="string">'101010100'</span></span><br><span class="line">        <span class="keyword">elif</span> cityName == <span class="string">'å¤©æ´¥'</span>:</span><br><span class="line">            cityCode = <span class="string">'101030100'</span></span><br><span class="line">        <span class="keyword">elif</span> cityName == <span class="string">'ä¸Šæµ·'</span>:</span><br><span class="line">            cityCode = <span class="string">'101020100'</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> cityCode</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">clearResult</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'* clearResult  '</span>)</span><br><span class="line">        self.ui.resultText.clear()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    app = QApplication(sys.argv)</span><br><span class="line">    win = MainWindow()</span><br><span class="line">    win.show()</span><br><span class="line">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure><p>WeatherWin.py ğŸ‘‡</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Form implementation generated from reading ui file 'WeatherWin.ui'</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Created by: PyQt5 UI code generator 5.9.2</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># WARNING! All changes made in this file will be lost!</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> PyQt5 <span class="keyword">import</span> QtCore, QtWidgets</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Ui_Form</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">setupUi</span><span class="params">(self, Form)</span>:</span></span><br><span class="line">        Form.setObjectName(<span class="string">"Form"</span>)</span><br><span class="line">        Form.resize(<span class="number">450</span>, <span class="number">347</span>)</span><br><span class="line">        self.groupBox = QtWidgets.QGroupBox(Form)</span><br><span class="line">        self.groupBox.setGeometry(QtCore.QRect(<span class="number">10</span>, <span class="number">10</span>, <span class="number">431</span>, <span class="number">251</span>))</span><br><span class="line">        self.groupBox.setObjectName(<span class="string">"groupBox"</span>)</span><br><span class="line">        self.weatherComboBox = QtWidgets.QComboBox(self.groupBox)</span><br><span class="line">        self.weatherComboBox.setGeometry(QtCore.QRect(<span class="number">60</span>, <span class="number">30</span>, <span class="number">131</span>, <span class="number">21</span>))</span><br><span class="line">        self.weatherComboBox.setObjectName(<span class="string">"weatherComboBox"</span>)</span><br><span class="line">        self.weatherComboBox.addItem(<span class="string">""</span>)</span><br><span class="line">        self.weatherComboBox.addItem(<span class="string">""</span>)</span><br><span class="line">        self.weatherComboBox.addItem(<span class="string">""</span>)</span><br><span class="line">        self.resultText = QtWidgets.QTextEdit(self.groupBox)</span><br><span class="line">        self.resultText.setGeometry(QtCore.QRect(<span class="number">10</span>, <span class="number">60</span>, <span class="number">411</span>, <span class="number">181</span>))</span><br><span class="line">        self.resultText.setObjectName(<span class="string">"resultText"</span>)</span><br><span class="line">        self.label = QtWidgets.QLabel(self.groupBox)</span><br><span class="line">        self.label.setGeometry(QtCore.QRect(<span class="number">20</span>, <span class="number">30</span>, <span class="number">72</span>, <span class="number">21</span>))</span><br><span class="line">        self.label.setObjectName(<span class="string">"label"</span>)</span><br><span class="line">        self.queryBtn = QtWidgets.QPushButton(Form)</span><br><span class="line">        self.queryBtn.setGeometry(QtCore.QRect(<span class="number">90</span>, <span class="number">300</span>, <span class="number">93</span>, <span class="number">28</span>))</span><br><span class="line">        self.queryBtn.setObjectName(<span class="string">"queryBtn"</span>)</span><br><span class="line">        self.clearBtn = QtWidgets.QPushButton(Form)</span><br><span class="line">        self.clearBtn.setGeometry(QtCore.QRect(<span class="number">230</span>, <span class="number">300</span>, <span class="number">93</span>, <span class="number">28</span>))</span><br><span class="line">        self.clearBtn.setObjectName(<span class="string">"clearBtn"</span>)</span><br><span class="line"></span><br><span class="line">        self.retranslateUi(Form)</span><br><span class="line">        self.clearBtn.clicked.connect(Form.clearResult)</span><br><span class="line">        self.queryBtn.clicked.connect(Form.queryWeather)</span><br><span class="line">        QtCore.QMetaObject.connectSlotsByName(Form)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">retranslateUi</span><span class="params">(self, Form)</span>:</span></span><br><span class="line">        _translate = QtCore.QCoreApplication.translate</span><br><span class="line">        Form.setWindowTitle(_translate(<span class="string">"Form"</span>, <span class="string">"Form"</span>))</span><br><span class="line">        self.groupBox.setTitle(_translate(<span class="string">"Form"</span>, <span class="string">"æŸ¥è¯¢åŸå¸‚å¤©æ°”"</span>))</span><br><span class="line">        self.weatherComboBox.setItemText(<span class="number">0</span>, _translate(<span class="string">"Form"</span>, <span class="string">"åŒ—äº¬"</span>))</span><br><span class="line">        self.weatherComboBox.setItemText(<span class="number">1</span>, _translate(<span class="string">"Form"</span>, <span class="string">"å¤©æ´¥"</span>))</span><br><span class="line">        self.weatherComboBox.setItemText(<span class="number">2</span>, _translate(<span class="string">"Form"</span>, <span class="string">"ä¸Šæµ·"</span>))</span><br><span class="line">        self.label.setText(_translate(<span class="string">"Form"</span>, <span class="string">"åŸå¸‚"</span>))</span><br><span class="line">        self.queryBtn.setText(_translate(<span class="string">"Form"</span>, <span class="string">"æŸ¥è¯¢"</span>))</span><br><span class="line">        self.clearBtn.setText(_translate(<span class="string">"Form"</span>, <span class="string">"æ¸…ç©º"</span>))</span><br></pre></td></tr></table></figure><p>Test_demo ğŸ‘‡</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">rep = requests.get(<span class="string">'http://www.weather.com.cn/data/sk/101010100.html'</span>)</span><br><span class="line">rep.encoding = <span class="string">'utf-8'</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">'è¿”å›ç»“æœ: %s'</span> % rep.json() )</span><br><span class="line">print(<span class="string">'åŸå¸‚: %s'</span> % rep.json()[<span class="string">'weatherinfo'</span>][<span class="string">'city'</span>] )</span><br><span class="line">print(<span class="string">'é£å‘: %s'</span> % rep.json()[<span class="string">'weatherinfo'</span>][<span class="string">'WD'</span>] )</span><br><span class="line">print(<span class="string">'æ¸©åº¦: %s'</span> % rep.json()[<span class="string">'weatherinfo'</span>][<span class="string">'temp'</span>] + <span class="string">" åº¦"</span>)</span><br><span class="line">print(<span class="string">'é£åŠ›: %s'</span> % rep.json()[<span class="string">'weatherinfo'</span>][<span class="string">'WS'</span>] )</span><br><span class="line">print(<span class="string">'æ¹¿åº¦: %s'</span> % rep.json()[<span class="string">'weatherinfo'</span>][<span class="string">'SD'</span>] )</span><br></pre></td></tr></table></figure><p>Out: </p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">è¿”å›ç»“æœ: &#123;'weatherinfo': &#123;'city': 'åŒ—äº¬', 'cityid': '101010100', 'temp': '27.9', 'WD': 'å—é£', 'WS': 'å°äº3çº§', 'SD': '28%', 'AP': '1002hPa', 'njd': 'æš‚æ— å®å†µ', 'WSE': '&lt;3', 'time': '17:55', 'sm': '2.1', 'isRadar': '1', 'Radar': 'JC_RADAR_AZ9010_JB'&#125;&#125;</span><br><span class="line">åŸå¸‚: åŒ—äº¬</span><br><span class="line">é£å‘: å—é£</span><br><span class="line">æ¸©åº¦: 27.9 åº¦</span><br><span class="line">é£åŠ›: å°äº3çº§</span><br><span class="line">æ¹¿åº¦: 28%</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ã€é˜…è¯»æ—¶é—´ã€‘XXX min XXX words&lt;br&gt;ã€é˜…è¯»å†…å®¹ã€‘â€¦â€¦&lt;/p&gt;
    
    </summary>
    
    
      <category term="PyQt5" scheme="http://yoursite.com/tags/PyQt5/"/>
    
  </entry>
  
</feed>
